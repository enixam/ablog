<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Time series graphics | A Minimal Book Example</title>
  <meta name="description" content="A personal solution manul to “Forecasting: Principles and Practice, 3rd edition”" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Time series graphics | A Minimal Book Example" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A personal solution manul to “Forecasting: Principles and Practice, 3rd edition”" />
  <meta name="github-repo" content="user/fpp-exercise" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Time series graphics | A Minimal Book Example" />
  
  <meta name="twitter:description" content="A personal solution manul to “Forecasting: Principles and Practice, 3rd edition”" />
  

<meta name="author" content="" />


<meta name="date" content="2020-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started.html"/>
<link rel="next" href="time-series-decomposition.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a></li>
<li class="chapter" data-level="2" data-path="time-series-graphics.html"><a href="time-series-graphics.html"><i class="fa fa-check"></i><b>2</b> Time series graphics</a></li>
<li class="chapter" data-level="3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html"><i class="fa fa-check"></i><b>3</b> Time series decomposition</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Written with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="time-series-graphics" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Time series graphics</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(tsibble)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(tsibbledata)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">library</span>(fable)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">library</span>(feasts)</a></code></pre></div>

<div class="exercise">
<p><span id="exr:unnamed-chunk-3" class="exercise"><strong>Exercise 2.1  </strong></span>Use the <code>help()</code> function to explore what the series <code>gafa_stock</code>, <code>PBS</code>, <code>vic_elec</code> and <code>pelt</code> represent.</p>
<ul>
<li><p>Use <code>autoplot()</code> to plot some of the series in these data sets.</p></li>
<li><p>What is the time interval of each series?</p></li>
<li><p>Use <code>filter()</code> to find what days corresponded to the peak closing price for each of the four stocks in gafa_stock.</p>
</div></li>
</ul>
<p><code>gafa_stock</code>: Historical stock prices from 2014-2018 for Google, Amazon, Facebook and Apple.<br />
<code>PBS</code>: Monthly Medicare Australia prescription data<br />
<code>vic_elec</code>: Half-hourly electricity demand for Victoria, Australia<br />
<code>pelt</code>: Hudson Bay Company trading records for Snowshoe Hare and Canadian Lynx furs from 1845 to 1935.</p>
<p>Use <code>autoplot()</code> on <code>pelt</code>, both <code>Hare</code> and <code>Lynx</code> are showing some sort of cyclic patterns:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">pelt <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">autoplot</span>(Hare)</a></code></pre></div>
<p><img src="ch2_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">pelt <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">autoplot</span>(Lynx)</a></code></pre></div>
<p><img src="ch2_files/figure-html/unnamed-chunk-4-2.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The four respective time interval are day (irregular but collected on a daily basis for the most part), month, 30 minutes and year.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">gafa_stock <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Symbol) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">min_rank</span>(<span class="kw">desc</span>(Close)) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; # A tsibble: 4 x 8 [!]</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; # Key:       Symbol [4]</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; # Groups:    Symbol [4]</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;   Symbol Date        Open  High   Low Close Adj_Close   Volume</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;   &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 1 AAPL   2018-10-03  230.  233.  230.  232.      230. 28654800</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 2 AMZN   2018-09-04 2026. 2050. 2013  2040.     2040.  5721100</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 3 FB     2018-07-25  216.  219.  214.  218.      218. 58954200</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 4 GOOG   2018-07-26 1251  1270. 1249. 1268.     1268.  2405600</span></a></code></pre></div>

<div class="exercise">
<span id="exr:unnamed-chunk-6" class="exercise"><strong>Exercise 2.2  </strong></span>The <code>aus_livestock</code> data contains the monthly total number of pigs slaughtered in Victoria, Australia, from Jul 1972 to Dec 2018. Use <code>filter()</code> to extract pig slaughters in Victoria between 1990 and 1995. Use <code>autoplot()</code> and ACF for this data and compare these to white noise plots.
</div>

<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">aus_livestock &lt;-<span class="st"> </span>aus_livestock <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">year</span>(Month)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1990</span>, year <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1995</span>, </a>
<a class="sourceLine" id="cb5-4" title="4">         Animal <span class="op">==</span><span class="st"> &quot;Pigs&quot;</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">         State <span class="op">==</span><span class="st"> &quot;Victoria&quot;</span>)</a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">aus_livestock</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; # A tsibble: 72 x 5 [1M]</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; # Key:       Animal, State [1]</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;      Month Animal State    Count  year</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;      &lt;mth&gt; &lt;fct&gt;  &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; 1 1990 Jan Pigs   Victoria 76000  1990</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; 2 1990 Feb Pigs   Victoria 78100  1990</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; 3 1990 Mar Pigs   Victoria 77600  1990</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; 4 1990 Apr Pigs   Victoria 84100  1990</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; 5 1990 May Pigs   Victoria 98000  1990</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; 6 1990 Jun Pigs   Victoria 89100  1990</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; # ... with 66 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">aus_livestock <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">autoplot</span>(Count)</a>
<a class="sourceLine" id="cb6-2" title="2">aus_livestock <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gg_season</span>(Count)</a></code></pre></div>
<p><img src="ch2_files/figure-html/unnamed-chunk-8-1.png" width="50%" /><img src="ch2_files/figure-html/unnamed-chunk-8-2.png" width="50%" /></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">aus_livestock <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">ACF</span>(Count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">autoplot</span>()</a></code></pre></div>
<p><img src="ch2_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Based on current plots, it seems that pig slaughters in Victoria between 1990 and 1995 expericenced a general increase despite fluctuations. Lag plots have shown some sort of seasonality on a yearly basis. Pig slaughters tend to peak in one of the summer months, while remaining at a faily low level at both ends of a year.</p>

<div class="exercise">
<span id="exr:unnamed-chunk-10" class="exercise"><strong>Exercise 2.3  </strong></span>The following time plots and ACF plots correspond to four different time series. Your task is to match each time plot in the first row with one of the ACF plots in the second row.
</div>

<p><img src="images/match_acf.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>3 -&gt; D</strong>, <strong>1 -&gt; B</strong>, both time series have a long-term trend (increasing and decreasing respectively), and the ACF plots should generally turn to be positive. And there is a clear seasonal effect in monthly air passengers so that its corresponding ACF plots should not be within the zero interval.</p>
<p><strong>2 -&gt; A, 4 -&gt; C</strong>, time plot 2 has demonstrated seasonality within a year, while plot 4 seems to have some white noise.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series-decomposition.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/enixam/fpp-exercise/edit/master/ch2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
