<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 purrr | R for data science: tidyverse and beyond</title>
  <meta name="description" content="9 purrr | R for data science: tidyverse and beyond" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="9 purrr | R for data science: tidyverse and beyond" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="enixam/rfordatascience" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 purrr | R for data science: tidyverse and beyond" />
  
  
  

<meta name="author" content="Maxine" />


<meta name="date" content="2020-01-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="broom.html"/>
<link rel="next" href="vroom.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R4DS: tidyverse and beyond</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="part"><span><b>I R for data science</b></span></li>
<li class="chapter" data-level="1" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>1</b> dplyr</a><ul>
<li class="chapter" data-level="1.1" data-path="dplyr.html"><a href="dplyr.html#个数据转换核心函数"><i class="fa fa-check"></i><b>1.1</b> 5个数据转换核心函数</a></li>
<li class="chapter" data-level="1.2" data-path="dplyr.html"><a href="dplyr.html#filter筛选行"><i class="fa fa-check"></i><b>1.2</b> <code>filter()</code>筛选行</a><ul>
<li class="chapter" data-level="1.2.1" data-path="dplyr.html"><a href="dplyr.html#运算符"><i class="fa fa-check"></i><b>1.2.1</b> 运算符</a></li>
<li class="chapter" data-level="1.2.2" data-path="dplyr.html"><a href="dplyr.html#缺失值"><i class="fa fa-check"></i><b>1.2.2</b> 缺失值</a></li>
<li class="chapter" data-level="1.2.3" data-path="dplyr.html"><a href="dplyr.html#练习"><i class="fa fa-check"></i><b>1.2.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="dplyr.html"><a href="dplyr.html#arrange-排列行"><i class="fa fa-check"></i><b>1.3</b> <code>arrange()</code> 排列行</a><ul>
<li class="chapter" data-level="1.3.1" data-path="dplyr.html"><a href="dplyr.html#slice"><i class="fa fa-check"></i><b>1.3.1</b> <code>slice()</code></a></li>
<li class="chapter" data-level="1.3.2" data-path="dplyr.html"><a href="dplyr.html#练习-1"><i class="fa fa-check"></i><b>1.3.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="dplyr.html"><a href="dplyr.html#使用select选择列"><i class="fa fa-check"></i><b>1.4</b> 使用<code>select()</code>选择列</a><ul>
<li class="chapter" data-level="1.4.1" data-path="dplyr.html"><a href="dplyr.html#练习-2"><i class="fa fa-check"></i><b>1.4.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="dplyr.html"><a href="dplyr.html#mutate-创建变量"><i class="fa fa-check"></i><b>1.5</b> <code>mutate()</code> 创建变量</a><ul>
<li class="chapter" data-level="1.5.1" data-path="dplyr.html"><a href="dplyr.html#常用创建函数using-creation-functions"><i class="fa fa-check"></i><b>1.5.1</b> 常用创建函数（Using creation functions）</a></li>
<li class="chapter" data-level="1.5.2" data-path="dplyr.html"><a href="dplyr.html#练习-3"><i class="fa fa-check"></i><b>1.5.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="dplyr.html"><a href="dplyr.html#使用summarize进行分组摘要"><i class="fa fa-check"></i><b>1.6</b> 使用<code>summarize()</code>进行分组摘要</a><ul>
<li class="chapter" data-level="1.6.1" data-path="dplyr.html"><a href="dplyr.html#缺失值-1"><i class="fa fa-check"></i><b>1.6.1</b> 缺失值</a></li>
<li class="chapter" data-level="1.6.2" data-path="dplyr.html"><a href="dplyr.html#计数函数"><i class="fa fa-check"></i><b>1.6.2</b> 计数函数</a></li>
<li class="chapter" data-level="1.6.3" data-path="dplyr.html"><a href="dplyr.html#逻辑值的计数和比例sumx-10-和-meany-0"><i class="fa fa-check"></i><b>1.6.3</b> 逻辑值的计数和比例:<code>sum(x &gt; 10) 和 mean(y == 0)</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="dplyr.html"><a href="dplyr.html#其他常用的摘要函数"><i class="fa fa-check"></i><b>1.6.4</b> 其他常用的摘要函数</a></li>
<li class="chapter" data-level="1.6.5" data-path="dplyr.html"><a href="dplyr.html#多个分组变量的消耗"><i class="fa fa-check"></i><b>1.6.5</b> 多个分组变量的消耗</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="dplyr.html"><a href="dplyr.html#group_by-结合其他函数"><i class="fa fa-check"></i><b>1.7</b> <code>group_by()</code> 结合其他函数</a></li>
<li class="chapter" data-level="1.8" data-path="dplyr.html"><a href="dplyr.html#练习-4"><i class="fa fa-check"></i><b>1.8</b> 练习</a></li>
<li class="chapter" data-level="1.9" data-path="dplyr.html"><a href="dplyr.html#作用域"><i class="fa fa-check"></i><b>1.9</b> 作用域</a><ul>
<li class="chapter" data-level="1.9.1" data-path="dplyr.html"><a href="dplyr.html#arrange"><i class="fa fa-check"></i><b>1.9.1</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="1.9.2" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>1.9.2</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="1.9.3" data-path="dplyr.html"><a href="dplyr.html#summarize"><i class="fa fa-check"></i><b>1.9.3</b> <code>summarize()</code></a></li>
<li class="chapter" data-level="1.9.4" data-path="dplyr.html"><a href="dplyr.html#dance"><i class="fa fa-check"></i><b>1.9.4</b> dance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tibble.html"><a href="tibble.html"><i class="fa fa-check"></i><b>2</b> tibble</a><ul>
<li class="chapter" data-level="2.1" data-path="tibble.html"><a href="tibble.html#tibble-intro"><i class="fa fa-check"></i><b>2.1</b> 简介</a></li>
<li class="chapter" data-level="2.2" data-path="tibble.html"><a href="tibble.html#tibble-data.frame"><i class="fa fa-check"></i><b>2.2</b> 对比 tibble 和 data.frame</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tibble.html"><a href="tibble.html#创建"><i class="fa fa-check"></i><b>2.2.1</b> 创建</a></li>
<li class="chapter" data-level="2.2.2" data-path="tibble.html"><a href="tibble.html#打印"><i class="fa fa-check"></i><b>2.2.2</b> 打印</a></li>
<li class="chapter" data-level="2.2.3" data-path="tibble.html"><a href="tibble.html#取子集"><i class="fa fa-check"></i><b>2.2.3</b> 取子集</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tibble.html"><a href="tibble.html#tibble-exercise"><i class="fa fa-check"></i><b>2.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="readr.html"><a href="readr.html"><i class="fa fa-check"></i><b>3</b> readr</a><ul>
<li class="chapter" data-level="3.1" data-path="readr.html"><a href="readr.html#base-r-中的数据读取"><i class="fa fa-check"></i><b>3.1</b> base R 中的数据读取</a></li>
<li class="chapter" data-level="3.2" data-path="readr.html"><a href="readr.html#readr-简介"><i class="fa fa-check"></i><b>3.2</b> readr 简介</a><ul>
<li class="chapter" data-level="3.2.1" data-path="readr.html"><a href="readr.html#写入文件"><i class="fa fa-check"></i><b>3.2.1</b> 写入文件</a></li>
<li class="chapter" data-level="3.2.2" data-path="readr.html"><a href="readr.html#练习-5"><i class="fa fa-check"></i><b>3.2.2</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="readr.html"><a href="readr.html#解析向量parsing-a-vector"><i class="fa fa-check"></i><b>3.3</b> 解析向量(Parsing a vector)</a><ul>
<li class="chapter" data-level="3.3.1" data-path="readr.html"><a href="readr.html#数值"><i class="fa fa-check"></i><b>3.3.1</b> 数值</a></li>
<li class="chapter" data-level="3.3.2" data-path="readr.html"><a href="readr.html#字符串"><i class="fa fa-check"></i><b>3.3.2</b> 字符串</a></li>
<li class="chapter" data-level="3.3.3" data-path="readr.html"><a href="readr.html#因子"><i class="fa fa-check"></i><b>3.3.3</b> 因子</a></li>
<li class="chapter" data-level="3.3.4" data-path="readr.html"><a href="readr.html#日期时间日期时间"><i class="fa fa-check"></i><b>3.3.4</b> 日期时间、日期、时间</a></li>
<li class="chapter" data-level="3.3.5" data-path="readr.html"><a href="readr.html#练习-6"><i class="fa fa-check"></i><b>3.3.5</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="readr.html"><a href="readr.html#解析文件"><i class="fa fa-check"></i><b>3.4</b> 解析文件</a><ul>
<li class="chapter" data-level="3.4.1" data-path="readr.html"><a href="readr.html#解析策略strategies"><i class="fa fa-check"></i><b>3.4.1</b> 解析策略(strategies)</a></li>
<li class="chapter" data-level="3.4.2" data-path="readr.html"><a href="readr.html#可能遇到的问题"><i class="fa fa-check"></i><b>3.4.2</b> 可能遇到的问题</a></li>
<li class="chapter" data-level="3.4.3" data-path="readr.html"><a href="readr.html#其他技巧"><i class="fa fa-check"></i><b>3.4.3</b> 其他技巧</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="readr.html"><a href="readr.html#readxl"><i class="fa fa-check"></i><b>3.5</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lubridate.html"><a href="lubridate.html"><i class="fa fa-check"></i><b>4</b> lubridate</a><ul>
<li class="chapter" data-level="4.1" data-path="lubridate.html"><a href="lubridate.html#创建日期和时间"><i class="fa fa-check"></i><b>4.1</b> 创建日期和时间</a><ul>
<li class="chapter" data-level="4.1.1" data-path="lubridate.html"><a href="lubridate.html#通过字符串创建"><i class="fa fa-check"></i><b>4.1.1</b> 通过字符串创建</a></li>
<li class="chapter" data-level="4.1.2" data-path="lubridate.html"><a href="lubridate.html#通过各个成分创建"><i class="fa fa-check"></i><b>4.1.2</b> 通过各个成分创建</a></li>
<li class="chapter" data-level="4.1.3" data-path="lubridate.html"><a href="lubridate.html#日期时间型和日期型数据的相互转换"><i class="fa fa-check"></i><b>4.1.3</b> 日期时间型和日期型数据的相互转换</a></li>
<li class="chapter" data-level="4.1.4" data-path="lubridate.html"><a href="lubridate.html#练习-7"><i class="fa fa-check"></i><b>4.1.4</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="lubridate.html"><a href="lubridate.html#日期时间成分"><i class="fa fa-check"></i><b>4.2</b> 日期时间成分</a><ul>
<li class="chapter" data-level="4.2.1" data-path="lubridate.html"><a href="lubridate.html#获取成分"><i class="fa fa-check"></i><b>4.2.1</b> 获取成分</a></li>
<li class="chapter" data-level="4.2.2" data-path="lubridate.html"><a href="lubridate.html#舍入rouding"><i class="fa fa-check"></i><b>4.2.2</b> 舍入（Rouding）</a></li>
<li class="chapter" data-level="4.2.3" data-path="lubridate.html"><a href="lubridate.html#设置成分"><i class="fa fa-check"></i><b>4.2.3</b> 设置成分</a></li>
<li class="chapter" data-level="4.2.4" data-path="lubridate.html"><a href="lubridate.html#练习-8"><i class="fa fa-check"></i><b>4.2.4</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="lubridate.html"><a href="lubridate.html#时间间隔time-span"><i class="fa fa-check"></i><b>4.3</b> 时间间隔（Time Span）</a><ul>
<li class="chapter" data-level="4.3.1" data-path="lubridate.html"><a href="lubridate.html#时期-durations"><i class="fa fa-check"></i><b>4.3.1</b> 时期 Durations</a></li>
<li class="chapter" data-level="4.3.2" data-path="lubridate.html"><a href="lubridate.html#阶段-periods"><i class="fa fa-check"></i><b>4.3.2</b> 阶段 Periods</a></li>
<li class="chapter" data-level="4.3.3" data-path="lubridate.html"><a href="lubridate.html#区间-intervals"><i class="fa fa-check"></i><b>4.3.3</b> 区间 Intervals</a></li>
<li class="chapter" data-level="4.3.4" data-path="lubridate.html"><a href="lubridate.html#小结"><i class="fa fa-check"></i><b>4.3.4</b> 小结</a></li>
<li class="chapter" data-level="4.3.5" data-path="lubridate.html"><a href="lubridate.html#练习-9"><i class="fa fa-check"></i><b>4.3.5</b> 练习</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="forcats.html"><a href="forcats.html"><i class="fa fa-check"></i><b>5</b> forcats</a><ul>
<li class="chapter" data-level="5.1" data-path="forcats.html"><a href="forcats.html#简介"><i class="fa fa-check"></i><b>5.1</b> 简介</a><ul>
<li class="chapter" data-level="5.1.1" data-path="forcats.html"><a href="forcats.html#因子基础"><i class="fa fa-check"></i><b>5.1.1</b> 因子基础</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="forcats.html"><a href="forcats.html#排序"><i class="fa fa-check"></i><b>5.2</b> 排序</a><ul>
<li class="chapter" data-level="5.2.1" data-path="forcats.html"><a href="forcats.html#按照水平的频次排序"><i class="fa fa-check"></i><b>5.2.1</b> 按照水平的频次排序</a></li>
<li class="chapter" data-level="5.2.2" data-path="forcats.html"><a href="forcats.html#按照其他变量排序"><i class="fa fa-check"></i><b>5.2.2</b> 按照其他变量排序</a></li>
<li class="chapter" data-level="5.2.3" data-path="forcats.html"><a href="forcats.html#人工指定顺序"><i class="fa fa-check"></i><b>5.2.3</b> 人工指定顺序</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="forcats.html"><a href="forcats.html#改变水平个数"><i class="fa fa-check"></i><b>5.3</b> 改变水平个数</a><ul>
<li class="chapter" data-level="5.3.1" data-path="forcats.html"><a href="forcats.html#合并水平"><i class="fa fa-check"></i><b>5.3.1</b> 合并水平</a></li>
<li class="chapter" data-level="5.3.2" data-path="forcats.html"><a href="forcats.html#增加水平"><i class="fa fa-check"></i><b>5.3.2</b> 增加水平</a></li>
<li class="chapter" data-level="5.3.3" data-path="forcats.html"><a href="forcats.html#舍弃水平dropping-unused-levels"><i class="fa fa-check"></i><b>5.3.3</b> 舍弃水平(Dropping unused levels)</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="forcats.html"><a href="forcats.html#编码"><i class="fa fa-check"></i><b>5.4</b> 编码</a><ul>
<li class="chapter" data-level="5.4.1" data-path="forcats.html"><a href="forcats.html#练习-10"><i class="fa fa-check"></i><b>5.4.1</b> 练习：</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="forcats.html"><a href="forcats.html#合并因子"><i class="fa fa-check"></i><b>5.5</b> 合并因子</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>6</b> tidyr</a><ul>
<li class="chapter" data-level="6.1" data-path="tidyr.html"><a href="tidyr.html#tidyr-intro"><i class="fa fa-check"></i><b>6.1</b> tidy data 简介</a><ul>
<li class="chapter" data-level="6.1.1" data-path="tidyr.html"><a href="tidyr.html#练习-11"><i class="fa fa-check"></i><b>6.1.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidyr.html"><a href="tidyr.html#pivoting"><i class="fa fa-check"></i><b>6.2</b> pivoting</a><ul>
<li class="chapter" data-level="6.2.1" data-path="tidyr.html"><a href="tidyr.html#pivot_longer"><i class="fa fa-check"></i><b>6.2.1</b> <code>pivot_longer()</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="tidyr.html"><a href="tidyr.html#pivot_wider"><i class="fa fa-check"></i><b>6.2.2</b> <code>pivot_wider()</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="tidyr.html"><a href="tidyr.html#combining-pivot_longer-and-pivot_wider"><i class="fa fa-check"></i><b>6.2.3</b> Combining <code>pivot_longer()</code> and <code>pivot_wider()</code></a></li>
<li class="chapter" data-level="6.2.4" data-path="tidyr.html"><a href="tidyr.html#练习-12"><i class="fa fa-check"></i><b>6.2.4</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidyr.html"><a href="tidyr.html#nesting"><i class="fa fa-check"></i><b>6.3</b> nesting</a><ul>
<li class="chapter" data-level="6.3.1" data-path="tidyr.html"><a href="tidyr.html#nested-data-and-models"><i class="fa fa-check"></i><b>6.3.1</b> nested data and models</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidyr.html"><a href="tidyr.html#rectangling"><i class="fa fa-check"></i><b>6.4</b> rectangling</a><ul>
<li class="chapter" data-level="6.4.1" data-path="tidyr.html"><a href="tidyr.html#github-users"><i class="fa fa-check"></i><b>6.4.1</b> Github users</a></li>
<li class="chapter" data-level="6.4.2" data-path="tidyr.html"><a href="tidyr.html#github-repos"><i class="fa fa-check"></i><b>6.4.2</b> Github repos</a></li>
<li class="chapter" data-level="6.4.3" data-path="tidyr.html"><a href="tidyr.html#game-of-throne-characters"><i class="fa fa-check"></i><b>6.4.3</b> Game of Throne characters</a></li>
<li class="chapter" data-level="6.4.4" data-path="tidyr.html"><a href="tidyr.html#sharla-gelfands-discography"><i class="fa fa-check"></i><b>6.4.4</b> Sharla Gelfand’s discography</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tidyr.html"><a href="tidyr.html#separate-和-untie"><i class="fa fa-check"></i><b>6.5</b> <code>separate()</code> 和 <code>untie()</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="tidyr.html"><a href="tidyr.html#separate"><i class="fa fa-check"></i><b>6.5.1</b> <code>separate()</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="tidyr.html"><a href="tidyr.html#unite"><i class="fa fa-check"></i><b>6.5.2</b> <code>unite()</code></a></li>
<li class="chapter" data-level="6.5.3" data-path="tidyr.html"><a href="tidyr.html#练习-13"><i class="fa fa-check"></i><b>6.5.3</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="tidyr.html"><a href="tidyr.html#miscellanea-functions"><i class="fa fa-check"></i><b>6.6</b> Miscellanea Functions</a><ul>
<li class="chapter" data-level="6.6.1" data-path="tidyr.html"><a href="tidyr.html#uncount"><i class="fa fa-check"></i><b>6.6.1</b> <code>uncount()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="tidyr.html"><a href="tidyr.html#tidyr-missing"><i class="fa fa-check"></i><b>6.7</b> 缺失值</a></li>
<li class="chapter" data-level="6.8" data-path="tidyr.html"><a href="tidyr.html#case-study"><i class="fa fa-check"></i><b>6.8</b> Case Study</a><ul>
<li class="chapter" data-level="6.8.1" data-path="tidyr.html"><a href="tidyr.html#练习-14"><i class="fa fa-check"></i><b>6.8.1</b> 练习</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="tidyr.html"><a href="tidyr.html#non-tidy"><i class="fa fa-check"></i><b>6.9</b> 拓展：None-tidy data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>7</b> relational data</a><ul>
<li class="chapter" data-level="7.1" data-path="relational-data.html"><a href="relational-data.html#introduction"><i class="fa fa-check"></i><b>7.1</b> introduction</a></li>
<li class="chapter" data-level="7.2" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>7.2</b> mutating joins</a></li>
<li class="chapter" data-level="7.3" data-path="relational-data.html"><a href="relational-data.html#filtering-join"><i class="fa fa-check"></i><b>7.3</b> filtering join</a></li>
<li class="chapter" data-level="7.4" data-path="relational-data.html"><a href="relational-data.html#fuzzy-join"><i class="fa fa-check"></i><b>7.4</b> fuzzy join</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="broom.html"><a href="broom.html"><i class="fa fa-check"></i><b>8</b> broom</a></li>
<li class="chapter" data-level="9" data-path="purrr.html"><a href="purrr.html"><i class="fa fa-check"></i><b>9</b> purrr</a><ul>
<li class="chapter" data-level="9.1" data-path="purrr.html"><a href="purrr.html#map-family"><i class="fa fa-check"></i><b>9.1</b> <code>map()</code> family</a></li>
<li class="chapter" data-level="9.2" data-path="purrr.html"><a href="purrr.html#producing-atomic-vectors"><i class="fa fa-check"></i><b>9.2</b> Producing atomic vectors</a><ul>
<li class="chapter" data-level="9.2.1" data-path="purrr.html"><a href="purrr.html#purrr-style-anonymous-functions"><i class="fa fa-check"></i><b>9.2.1</b> purrr-style anonymous functions</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="purrr.html"><a href="purrr.html#predicate-functions"><i class="fa fa-check"></i><b>9.3</b> Predicate functions</a><ul>
<li class="chapter" data-level="9.3.1" data-path="purrr.html"><a href="purrr.html#basics"><i class="fa fa-check"></i><b>9.3.1</b> Basics</a></li>
<li class="chapter" data-level="9.3.2" data-path="purrr.html"><a href="purrr.html#map-variants"><i class="fa fa-check"></i><b>9.3.2</b> Map variants</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="purrr.html"><a href="purrr.html#group_"><i class="fa fa-check"></i><b>9.4</b> group_</a><ul>
<li class="chapter" data-level="9.4.1" data-path="purrr.html"><a href="purrr.html#group_mapgroup_modify"><i class="fa fa-check"></i><b>9.4.1</b> group_map、group_modify</a></li>
<li class="chapter" data-level="9.4.2" data-path="purrr.html"><a href="purrr.html#group_nestgroup_splitgroup_keysgroup_data"><i class="fa fa-check"></i><b>9.4.2</b> group_nest、group_split、group_keys、group_data</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Importing</b></span></li>
<li class="chapter" data-level="10" data-path="vroom.html"><a href="vroom.html"><i class="fa fa-check"></i><b>10</b> vroom</a></li>
<li class="chapter" data-level="11" data-path="data-apis.html"><a href="data-apis.html"><i class="fa fa-check"></i><b>11</b> Data APIs</a><ul>
<li class="chapter" data-level="11.1" data-path="data-apis.html"><a href="data-apis.html#wdi"><i class="fa fa-check"></i><b>11.1</b> WDI</a><ul>
<li class="chapter" data-level="11.1.1" data-path="data-apis.html"><a href="data-apis.html#wdisearch"><i class="fa fa-check"></i><b>11.1.1</b> <code>WDIsearch()</code></a></li>
<li class="chapter" data-level="11.1.2" data-path="data-apis.html"><a href="data-apis.html#wdi-1"><i class="fa fa-check"></i><b>11.1.2</b> <code>WDI</code></a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-apis.html"><a href="data-apis.html#ipumsr"><i class="fa fa-check"></i><b>11.2</b> ipumsr</a></li>
</ul></li>
<li class="part"><span><b>III Exploring and Wrangling</b></span></li>
<li class="chapter" data-level="12" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>12</b> data.table</a><ul>
<li class="chapter" data-level="12.1" data-path="data-table.html"><a href="data-table.html#data-table-basics"><i class="fa fa-check"></i><b>12.1</b> 基本使用</a></li>
<li class="chapter" data-level="12.2" data-path="data-table.html"><a href="data-table.html#dtplyr"><i class="fa fa-check"></i><b>12.2</b> dtplyr</a></li>
<li class="chapter" data-level="12.3" data-path="data-table.html"><a href="data-table.html#maditr"><i class="fa fa-check"></i><b>12.3</b> maditr</a></li>
<li class="chapter" data-level="12.4" data-path="data-table.html"><a href="data-table.html#tidyfast"><i class="fa fa-check"></i><b>12.4</b> tidyfast</a></li>
<li class="chapter" data-level="12.5" data-path="data-table.html"><a href="data-table.html#disk.frame"><i class="fa fa-check"></i><b>12.5</b> disk.frame</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="rowwise-operation.html"><a href="rowwise-operation.html"><i class="fa fa-check"></i><b>13</b> rowwise operation</a><ul>
<li class="chapter" data-level="13.1" data-path="rowwise-operation.html"><a href="rowwise-operation.html#do-rowwise"><i class="fa fa-check"></i><b>13.1</b> do() + rowwise()</a></li>
<li class="chapter" data-level="13.2" data-path="rowwise-operation.html"><a href="rowwise-operation.html#rap"><i class="fa fa-check"></i><b>13.2</b> rap</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sjmisc.html"><a href="sjmisc.html"><i class="fa fa-check"></i><b>14</b> sjmisc</a><ul>
<li class="chapter" data-level="14.1" data-path="sjmisc.html"><a href="sjmisc.html#frq-和-flat_table-一维和二维频数表"><i class="fa fa-check"></i><b>14.1</b> <code>frq()</code> 和 <code>flat_table()</code> 一维和二维频数表</a></li>
<li class="chapter" data-level="14.2" data-path="sjmisc.html"><a href="sjmisc.html#rec-重新编码"><i class="fa fa-check"></i><b>14.2</b> <code>rec()</code>: 重新编码</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="data-summary.html"><a href="data-summary.html"><i class="fa fa-check"></i><b>15</b> Data Summary</a><ul>
<li class="chapter" data-level="15.1" data-path="data-summary.html"><a href="data-summary.html#skimr"><i class="fa fa-check"></i><b>15.1</b> skimr</a></li>
<li class="chapter" data-level="15.2" data-path="data-summary.html"><a href="data-summary.html#visdat"><i class="fa fa-check"></i><b>15.2</b> visdat</a></li>
<li class="chapter" data-level="15.3" data-path="data-summary.html"><a href="data-summary.html#summarytools"><i class="fa fa-check"></i><b>15.3</b> summarytools</a><ul>
<li class="chapter" data-level="15.3.1" data-path="data-summary.html"><a href="data-summary.html#freq"><i class="fa fa-check"></i><b>15.3.1</b> <code>freq</code></a></li>
<li class="chapter" data-level="15.3.2" data-path="data-summary.html"><a href="data-summary.html#descr"><i class="fa fa-check"></i><b>15.3.2</b> <code>descr()</code></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Cleaning and Tidying</b></span></li>
<li class="chapter" data-level="16" data-path="janitor.html"><a href="janitor.html"><i class="fa fa-check"></i><b>16</b> Janitor</a><ul>
<li class="chapter" data-level="16.1" data-path="janitor.html"><a href="janitor.html#qingxi"><i class="fa fa-check"></i><b>16.1</b> 清洗</a><ul>
<li class="chapter" data-level="16.1.1" data-path="janitor.html"><a href="janitor.html#clean_names"><i class="fa fa-check"></i><b>16.1.1</b> <code>clean_names</code></a></li>
<li class="chapter" data-level="16.1.2" data-path="janitor.html"><a href="janitor.html#compare_df_cols"><i class="fa fa-check"></i><b>16.1.2</b> <code>compare_df_cols</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="janitor.html"><a href="janitor.html#tansuo"><i class="fa fa-check"></i><b>16.2</b> 探索</a><ul>
<li class="chapter" data-level="16.2.1" data-path="janitor.html"><a href="janitor.html#tabyl"><i class="fa fa-check"></i><b>16.2.1</b> <code>tabyl</code></a></li>
<li class="chapter" data-level="16.2.2" data-path="janitor.html"><a href="janitor.html#get_dupes"><i class="fa fa-check"></i><b>16.2.2</b> <code>get_dupes</code></a></li>
<li class="chapter" data-level="16.2.3" data-path="janitor.html"><a href="janitor.html#remove_"><i class="fa fa-check"></i><b>16.2.3</b> <code>remove_</code></a></li>
<li class="chapter" data-level="16.2.4" data-path="janitor.html"><a href="janitor.html#round_half_up"><i class="fa fa-check"></i><b>16.2.4</b> <code>round_half_up</code></a></li>
<li class="chapter" data-level="16.2.5" data-path="janitor.html"><a href="janitor.html#excel_numeric_to_date"><i class="fa fa-check"></i><b>16.2.5</b> <code>excel_numeric_to_date</code></a></li>
<li class="chapter" data-level="16.2.6" data-path="janitor.html"><a href="janitor.html#top_levels"><i class="fa fa-check"></i><b>16.2.6</b> <code>top_levels</code></a></li>
<li class="chapter" data-level="16.2.7" data-path="janitor.html"><a href="janitor.html#row_to_names"><i class="fa fa-check"></i><b>16.2.7</b> <code>row_to_names</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>17</b> 处理缺失值</a><ul>
<li class="chapter" data-level="17.1" data-path="missing-values.html"><a href="missing-values.html#explore-missing"><i class="fa fa-check"></i><b>17.1</b> 探索</a></li>
<li class="chapter" data-level="17.2" data-path="missing-values.html"><a href="missing-values.html#fill-missing"><i class="fa fa-check"></i><b>17.2</b> 填充</a></li>
</ul></li>
<li class="part"><span><b>V Modelling</b></span></li>
<li class="chapter" data-level="18" data-path="tidymodels.html"><a href="tidymodels.html"><i class="fa fa-check"></i><b>18</b> tidymodels</a></li>
<li class="chapter" data-level="19" data-path="caret.html"><a href="caret.html"><i class="fa fa-check"></i><b>19</b> caret</a></li>
<li class="chapter" data-level="20" data-path="vtreat.html"><a href="vtreat.html"><i class="fa fa-check"></i><b>20</b> vtreat</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">written with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for data science: tidyverse and beyond</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="purrr" class="section level1">
<h1><span class="header-section-number">9</span> purrr</h1>
<p>purrr tutorial : <a href="https://jennybc.github.io/purrr-tutorial/" class="uri">https://jennybc.github.io/purrr-tutorial/</a></p>
<div id="map-family" class="section level2">
<h2><span class="header-section-number">9.1</span> <code>map()</code> family</h2>
<p><img src="images/map.png" width="80%" /></p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb406-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb406-2" title="2"><span class="st">  </span><span class="kw">map</span>(mean) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb406-3" title="3"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb406-4" title="4"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb406-5" title="5"><span class="co">#&gt;  $ mpg : num 20.1</span></a>
<a class="sourceLine" id="cb406-6" title="6"><span class="co">#&gt;  $ cyl : num 6.19</span></a>
<a class="sourceLine" id="cb406-7" title="7"><span class="co">#&gt;  $ disp: num 231</span></a>
<a class="sourceLine" id="cb406-8" title="8"><span class="co">#&gt;  $ hp  : num 147</span></a>
<a class="sourceLine" id="cb406-9" title="9"><span class="co">#&gt;  $ drat: num 3.6</span></a>
<a class="sourceLine" id="cb406-10" title="10"><span class="co">#&gt;  $ wt  : num 3.22</span></a>
<a class="sourceLine" id="cb406-11" title="11"><span class="co">#&gt;  $ qsec: num 17.8</span></a>
<a class="sourceLine" id="cb406-12" title="12"><span class="co">#&gt;  $ vs  : num 0.438</span></a>
<a class="sourceLine" id="cb406-13" title="13"><span class="co">#&gt;  $ am  : num 0.406</span></a>
<a class="sourceLine" id="cb406-14" title="14"><span class="co">#&gt;  $ gear: num 3.69</span></a>
<a class="sourceLine" id="cb406-15" title="15"><span class="co">#&gt;  $ carb: num 2.81</span></a></code></pre></div>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb407-1" title="1">simple_map &lt;-<span class="st"> </span><span class="cf">function</span>(x, fun, ...) {</a>
<a class="sourceLine" id="cb407-2" title="2">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="dt">length =</span> <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb407-3" title="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb407-4" title="4">    output[[i]] &lt;-<span class="st"> </span><span class="kw">fun</span>(x[[i]], ...)</a>
<a class="sourceLine" id="cb407-5" title="5">  }</a>
<a class="sourceLine" id="cb407-6" title="6">  output</a>
<a class="sourceLine" id="cb407-7" title="7">}</a></code></pre></div>
</div>
<div id="producing-atomic-vectors" class="section level2">
<h2><span class="header-section-number">9.2</span> Producing atomic vectors</h2>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb408-1" title="1"><span class="co"># map_chr() always returns a character vector</span></a>
<a class="sourceLine" id="cb408-2" title="2">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb408-3" title="3"><span class="st">  </span><span class="kw">map_chr</span>(typeof)</a>
<a class="sourceLine" id="cb408-4" title="4"><span class="co">#&gt;      mpg      cyl     disp       hp     drat       wt     qsec       vs </span></a>
<a class="sourceLine" id="cb408-5" title="5"><span class="co">#&gt; &quot;double&quot; &quot;double&quot; &quot;double&quot; &quot;double&quot; &quot;double&quot; &quot;double&quot; &quot;double&quot; &quot;double&quot; </span></a>
<a class="sourceLine" id="cb408-6" title="6"><span class="co">#&gt;       am     gear     carb </span></a>
<a class="sourceLine" id="cb408-7" title="7"><span class="co">#&gt; &quot;double&quot; &quot;double&quot; &quot;double&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb409-1" title="1"><span class="co"># map_lgl() always returns a logical vector</span></a>
<a class="sourceLine" id="cb409-2" title="2">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb409-3" title="3"><span class="st">  </span><span class="kw">map_lgl</span>(is.double)</a>
<a class="sourceLine" id="cb409-4" title="4"><span class="co">#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb </span></a>
<a class="sourceLine" id="cb409-5" title="5"><span class="co">#&gt; TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb410-1" title="1"><span class="co"># map_int() always returns a integer vector</span></a>
<a class="sourceLine" id="cb410-2" title="2">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb410-3" title="3"><span class="st">  </span><span class="kw">map_int</span>(<span class="cf">function</span>(x) <span class="kw">length</span>(<span class="kw">unique</span>(x)))</a>
<a class="sourceLine" id="cb410-4" title="4"><span class="co">#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb </span></a>
<a class="sourceLine" id="cb410-5" title="5"><span class="co">#&gt;   25    3   27   22   22   29   30    2    2    3    6</span></a></code></pre></div>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb411-1" title="1"><span class="co"># map_dbl() always returns a double vector</span></a>
<a class="sourceLine" id="cb411-2" title="2">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb411-3" title="3"><span class="st">  </span><span class="kw">map_dbl</span>(mean)</a>
<a class="sourceLine" id="cb411-4" title="4"><span class="co">#&gt;     mpg     cyl    disp      hp    drat      wt    qsec      vs      am    gear </span></a>
<a class="sourceLine" id="cb411-5" title="5"><span class="co">#&gt;  20.091   6.188 230.722 146.688   3.597   3.217  17.849   0.438   0.406   3.688 </span></a>
<a class="sourceLine" id="cb411-6" title="6"><span class="co">#&gt;    carb </span></a>
<a class="sourceLine" id="cb411-7" title="7"><span class="co">#&gt;   2.812</span></a></code></pre></div>
<p><img src="images/map_2.png" width="80%" /></p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb412-1" title="1">pair &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">c</span>(x, x)</a>
<a class="sourceLine" id="cb412-2" title="2"><span class="kw">map_dbl</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, pair)</a>
<a class="sourceLine" id="cb412-3" title="3"><span class="co">#&gt; Error: Result 1 must be a single double, not an integer vector of length 2</span></a></code></pre></div>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb413-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb413-2" title="2"><span class="st">  </span><span class="kw">map</span>(pair)</a>
<a class="sourceLine" id="cb413-3" title="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb413-4" title="4"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb413-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb413-6" title="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb413-7" title="7"><span class="co">#&gt; [1] 2 2</span></a></code></pre></div>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb414-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb414-2" title="2"><span class="st">  </span><span class="kw">map_dbl</span>(as.character)</a>
<a class="sourceLine" id="cb414-3" title="3"><span class="co">#&gt; Error: Can&#39;t coerce element 1 from a character to a double</span></a></code></pre></div>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb415-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb415-2" title="2"><span class="st">  </span><span class="kw">map_chr</span>(as.character)</a>
<a class="sourceLine" id="cb415-3" title="3"><span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot;</span></a></code></pre></div>
<div id="purrr-style-anonymous-functions" class="section level3">
<h3><span class="header-section-number">9.2.1</span> purrr-style anonymous functions</h3>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb416-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb416-2" title="2"><span class="st">  </span><span class="kw">map_dbl</span>(<span class="cf">function</span>(x) <span class="kw">length</span>(<span class="kw">unique</span>(x)))</a>
<a class="sourceLine" id="cb416-3" title="3"><span class="co">#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb </span></a>
<a class="sourceLine" id="cb416-4" title="4"><span class="co">#&gt;   25    3   27   22   22   29   30    2    2    3    6</span></a></code></pre></div>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb417-2" title="2"><span class="st">  </span><span class="kw">map_dbl</span>(<span class="op">~</span><span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(.x)))</a>
<a class="sourceLine" id="cb417-3" title="3"><span class="co">#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb </span></a>
<a class="sourceLine" id="cb417-4" title="4"><span class="co">#&gt;   25    3   27   22   22   29   30    2    2    3    6</span></a></code></pre></div>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb418-1" title="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb418-2" title="2"><span class="st">  </span><span class="kw">map_dbl</span>(<span class="op">~</span><span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(.)))</a>
<a class="sourceLine" id="cb418-3" title="3"><span class="co">#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb </span></a>
<a class="sourceLine" id="cb418-4" title="4"><span class="co">#&gt;   25    3   27   22   22   29   30    2    2    3    6</span></a></code></pre></div>
<p>This shortcut is particularly useful for generating random data:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">5</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb419-2" title="2"><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">mean =</span> .x, <span class="dt">n =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb419-3" title="3"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb419-4" title="4"><span class="co">#&gt; List of 5</span></a>
<a class="sourceLine" id="cb419-5" title="5"><span class="co">#&gt;  $ : num [1:5] 1.788 0.578 1.057 1.711 -0.587</span></a>
<a class="sourceLine" id="cb419-6" title="6"><span class="co">#&gt;  $ : num [1:5] 2.6 3.22 1.69 1.79 1.63</span></a>
<a class="sourceLine" id="cb419-7" title="7"><span class="co">#&gt;  $ : num [1:5] 3.33 4.88 2.52 4.74 3.32</span></a>
<a class="sourceLine" id="cb419-8" title="8"><span class="co">#&gt;  $ : num [1:5] 3.9 3.22 4.1 3.95 3.73</span></a>
<a class="sourceLine" id="cb419-9" title="9"><span class="co">#&gt;  $ : num [1:5] 5.65 3.43 2.95 6.02 5.6</span></a></code></pre></div>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb420-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb420-2" title="2">  <span class="kw">list</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">2</span>), <span class="dt">z =</span> <span class="st">&quot;a&quot;</span>),</a>
<a class="sourceLine" id="cb420-3" title="3">  <span class="kw">list</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dt">x =</span> <span class="dv">4</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="dt">z =</span> <span class="st">&quot;b&quot;</span>),</a>
<a class="sourceLine" id="cb420-4" title="4">  <span class="kw">list</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dt">x =</span> <span class="dv">8</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>))</a>
<a class="sourceLine" id="cb420-5" title="5">)</a>
<a class="sourceLine" id="cb420-6" title="6"></a>
<a class="sourceLine" id="cb420-7" title="7"><span class="co"># select by position</span></a>
<a class="sourceLine" id="cb420-8" title="8">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb420-9" title="9"><span class="st">  </span><span class="kw">map</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb420-10" title="10"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb420-11" title="11"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb420-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb420-13" title="13"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb420-14" title="14"><span class="co">#&gt; [1] 4</span></a>
<a class="sourceLine" id="cb420-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb420-16" title="16"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb420-17" title="17"><span class="co">#&gt; [1] 8</span></a></code></pre></div>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb421-1" title="1"><span class="co"># select by name</span></a>
<a class="sourceLine" id="cb421-2" title="2">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb421-3" title="3"><span class="st">  </span><span class="kw">map</span>(<span class="st">&quot;x&quot;</span>)</a>
<a class="sourceLine" id="cb421-4" title="4"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb421-5" title="5"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb421-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb421-7" title="7"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb421-8" title="8"><span class="co">#&gt; [1] 4</span></a>
<a class="sourceLine" id="cb421-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb421-10" title="10"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb421-11" title="11"><span class="co">#&gt; [1] 8</span></a></code></pre></div>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb422-1" title="1"><span class="co"># select by both position and name</span></a>
<a class="sourceLine" id="cb422-2" title="2">x <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb422-3" title="3"><span class="st">  </span><span class="kw">map</span>(<span class="kw">list</span>(<span class="st">&quot;y&quot;</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb422-4" title="4"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb422-5" title="5"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb422-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb422-7" title="7"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb422-8" title="8"><span class="co">#&gt; [1] 6</span></a>
<a class="sourceLine" id="cb422-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb422-10" title="10"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb422-11" title="11"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
</div>
</div>
<div id="predicate-functions" class="section level2">
<h2><span class="header-section-number">9.3</span> Predicate functions</h2>
<div id="basics" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Basics</h3>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb423-1" title="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a></code></pre></div>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb424-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb424-2" title="2"><span class="st">  </span><span class="kw">keep</span>(is.numeric)</a>
<a class="sourceLine" id="cb424-3" title="3"><span class="co">#&gt;   x</span></a>
<a class="sourceLine" id="cb424-4" title="4"><span class="co">#&gt; 1 1</span></a>
<a class="sourceLine" id="cb424-5" title="5"><span class="co">#&gt; 2 2</span></a>
<a class="sourceLine" id="cb424-6" title="6"><span class="co">#&gt; 3 3</span></a></code></pre></div>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb425-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb425-2" title="2"><span class="st">  </span><span class="kw">discard</span>(is.numeric)</a>
<a class="sourceLine" id="cb425-3" title="3"><span class="co">#&gt;   y</span></a>
<a class="sourceLine" id="cb425-4" title="4"><span class="co">#&gt; 1 a</span></a>
<a class="sourceLine" id="cb425-5" title="5"><span class="co">#&gt; 2 b</span></a>
<a class="sourceLine" id="cb425-6" title="6"><span class="co">#&gt; 3 c</span></a></code></pre></div>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb426-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb426-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">new_col =</span> LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb426-3" title="3"><span class="st">  </span><span class="kw">detect</span>(is.factor)</a>
<a class="sourceLine" id="cb426-4" title="4"><span class="co">#&gt; [1] a b c</span></a>
<a class="sourceLine" id="cb426-5" title="5"><span class="co">#&gt; Levels: a b c</span></a></code></pre></div>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb427-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb427-2" title="2"><span class="st">  </span><span class="kw">detect_index</span>(is.factor)</a>
<a class="sourceLine" id="cb427-3" title="3"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
</div>
<div id="map-variants" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Map variants</h3>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb428-1" title="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb428-2" title="2">  <span class="dt">num1 =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb428-3" title="3">  <span class="dt">num2 =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>),</a>
<a class="sourceLine" id="cb428-4" title="4">  <span class="dt">chr1 =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>),</a>
<a class="sourceLine" id="cb428-5" title="5">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb428-6" title="6">)</a>
<a class="sourceLine" id="cb428-7" title="7"></a>
<a class="sourceLine" id="cb428-8" title="8"></a>
<a class="sourceLine" id="cb428-9" title="9">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb428-10" title="10"><span class="st">  </span><span class="kw">map_if</span>(is.numeric, mean, <span class="dt">na.rm =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb428-11" title="11"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb428-12" title="12"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb428-13" title="13"><span class="co">#&gt;  $ num1: num 10</span></a>
<a class="sourceLine" id="cb428-14" title="14"><span class="co">#&gt;  $ num2: num 6</span></a>
<a class="sourceLine" id="cb428-15" title="15"><span class="co">#&gt;  $ chr1: chr [1:3] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb429-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb429-2" title="2"><span class="st">  </span><span class="kw">modify_if</span>(is.character, str_to_upper) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb429-3" title="3"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb429-4" title="4"><span class="co">#&gt; &#39;data.frame&#39;:    3 obs. of  3 variables:</span></a>
<a class="sourceLine" id="cb429-5" title="5"><span class="co">#&gt;  $ num1: num  0 10 20</span></a>
<a class="sourceLine" id="cb429-6" title="6"><span class="co">#&gt;  $ num2: num  5 6 7</span></a>
<a class="sourceLine" id="cb429-7" title="7"><span class="co">#&gt;  $ chr1: chr  &quot;A&quot; &quot;B&quot; &quot;C&quot;</span></a></code></pre></div>
</div>
</div>
<div id="group_" class="section level2">
<h2><span class="header-section-number">9.4</span> group_</h2>
<div id="group_mapgroup_modify" class="section level3">
<h3><span class="header-section-number">9.4.1</span> group_map、group_modify</h3>
<p><code>group_map()</code>, <code>group_modify()</code> and <code>group_walk()</code> are purrr-style functions that can be used to iterate on grouped tibbles.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb430-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb430-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb430-3" title="3"><span class="st">  </span><span class="kw">group_map</span>(<span class="op">~</span><span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(<span class="kw">lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Width, <span class="dt">data =</span> .x))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb430-4" title="4"><span class="st">  </span><span class="kw">bind_rows</span>()</a>
<a class="sourceLine" id="cb430-5" title="5"><span class="co">#&gt; # A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb430-6" title="6"><span class="co">#&gt;   term        estimate std.error statistic  p.value</span></a>
<a class="sourceLine" id="cb430-7" title="7"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb430-8" title="8"><span class="co">#&gt; 1 (Intercept)    2.64     0.310       8.51 3.74e-11</span></a>
<a class="sourceLine" id="cb430-9" title="9"><span class="co">#&gt; 2 Sepal.Width    0.690    0.0899      7.68 6.71e-10</span></a>
<a class="sourceLine" id="cb430-10" title="10"><span class="co">#&gt; 3 (Intercept)    3.54     0.563       6.29 9.07e- 8</span></a>
<a class="sourceLine" id="cb430-11" title="11"><span class="co">#&gt; 4 Sepal.Width    0.865    0.202       4.28 8.77e- 5</span></a>
<a class="sourceLine" id="cb430-12" title="12"><span class="co">#&gt; 5 (Intercept)    3.91     0.757       5.16 4.66e- 6</span></a>
<a class="sourceLine" id="cb430-13" title="13"><span class="co">#&gt; 6 Sepal.Width    0.902    0.253       3.56 8.43e- 4</span></a></code></pre></div>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb431-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb431-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb431-3" title="3"><span class="st">  </span><span class="kw">group_modify</span>(<span class="op">~</span><span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(<span class="kw">lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Width, <span class="dt">data =</span> .x)))</a>
<a class="sourceLine" id="cb431-4" title="4"><span class="co">#&gt; # A tibble: 6 x 6</span></a>
<a class="sourceLine" id="cb431-5" title="5"><span class="co">#&gt; # Groups:   Species [3]</span></a>
<a class="sourceLine" id="cb431-6" title="6"><span class="co">#&gt;   Species    term        estimate std.error statistic  p.value</span></a>
<a class="sourceLine" id="cb431-7" title="7"><span class="co">#&gt;   &lt;fct&gt;      &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb431-8" title="8"><span class="co">#&gt; 1 setosa     (Intercept)    2.64     0.310       8.51 3.74e-11</span></a>
<a class="sourceLine" id="cb431-9" title="9"><span class="co">#&gt; 2 setosa     Sepal.Width    0.690    0.0899      7.68 6.71e-10</span></a>
<a class="sourceLine" id="cb431-10" title="10"><span class="co">#&gt; 3 versicolor (Intercept)    3.54     0.563       6.29 9.07e- 8</span></a>
<a class="sourceLine" id="cb431-11" title="11"><span class="co">#&gt; 4 versicolor Sepal.Width    0.865    0.202       4.28 8.77e- 5</span></a>
<a class="sourceLine" id="cb431-12" title="12"><span class="co">#&gt; 5 virginica  (Intercept)    3.91     0.757       5.16 4.66e- 6</span></a>
<a class="sourceLine" id="cb431-13" title="13"><span class="co">#&gt; 6 virginica  Sepal.Width    0.902    0.253       3.56 8.43e- 4</span></a></code></pre></div>
<p>This is similar to <code>split()</code> and then <code>map()</code>:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb432-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb432-2" title="2"><span class="st">  </span><span class="kw">split</span>(.<span class="op">$</span>Species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb432-3" title="3"><span class="st">  </span><span class="kw">map_dfr</span>(<span class="op">~</span><span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(<span class="kw">lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Length, <span class="dt">data =</span> .x)))</a>
<a class="sourceLine" id="cb432-4" title="4"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb432-5" title="5"><span class="co">#&gt;   term        estimate std.error statistic  p.value</span></a>
<a class="sourceLine" id="cb432-6" title="6"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb432-7" title="7"><span class="co">#&gt; 1 (Intercept)     5.01    0.0498     100.  2.11e-58</span></a>
<a class="sourceLine" id="cb432-8" title="8"><span class="co">#&gt; 2 (Intercept)     5.94    0.0730      81.3 6.14e-54</span></a>
<a class="sourceLine" id="cb432-9" title="9"><span class="co">#&gt; 3 (Intercept)     6.59    0.0899      73.3 9.80e-52</span></a></code></pre></div>
</div>
<div id="group_nestgroup_splitgroup_keysgroup_data" class="section level3">
<h3><span class="header-section-number">9.4.2</span> group_nest、group_split、group_keys、group_data</h3>
<p><code>group_nest()</code> is similar to <code>tidyr::nest()</code>, but focuses on the variables to <strong>nest</strong> by instead of the nested columns.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb433-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb433-2" title="2"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb433-3" title="3"><span class="st">  </span><span class="kw">group_nest</span>(Species)</a>
<a class="sourceLine" id="cb433-4" title="4"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb433-5" title="5"><span class="co">#&gt;   Species    data             </span></a>
<a class="sourceLine" id="cb433-6" title="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;list&gt;           </span></a>
<a class="sourceLine" id="cb433-7" title="7"><span class="co">#&gt; 1 setosa     &lt;tibble [50 x 4]&gt;</span></a>
<a class="sourceLine" id="cb433-8" title="8"><span class="co">#&gt; 2 versicolor &lt;tibble [50 x 4]&gt;</span></a>
<a class="sourceLine" id="cb433-9" title="9"><span class="co">#&gt; 3 virginica  &lt;tibble [50 x 4]&gt;</span></a></code></pre></div>
<p><code>group_split()</code> is a tidy version of <code>base::split()</code>. In particular, it respects a group_by()-like grouping specification, and refuses to name its result.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb434-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb434-2" title="2"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb434-3" title="3"><span class="st">  </span><span class="kw">group_split</span>(Species)</a>
<a class="sourceLine" id="cb434-4" title="4"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb434-5" title="5"><span class="co">#&gt; # A tibble: 50 x 5</span></a>
<a class="sourceLine" id="cb434-6" title="6"><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></a>
<a class="sourceLine" id="cb434-7" title="7"><span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb434-8" title="8"><span class="co">#&gt; 1          5.1         3.5          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb434-9" title="9"><span class="co">#&gt; 2          4.9         3            1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb434-10" title="10"><span class="co">#&gt; 3          4.7         3.2          1.3         0.2 setosa </span></a>
<a class="sourceLine" id="cb434-11" title="11"><span class="co">#&gt; 4          4.6         3.1          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb434-12" title="12"><span class="co">#&gt; 5          5           3.6          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb434-13" title="13"><span class="co">#&gt; 6          5.4         3.9          1.7         0.4 setosa </span></a>
<a class="sourceLine" id="cb434-14" title="14"><span class="co">#&gt; # ... with 44 more rows</span></a>
<a class="sourceLine" id="cb434-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb434-16" title="16"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb434-17" title="17"><span class="co">#&gt; # A tibble: 50 x 5</span></a>
<a class="sourceLine" id="cb434-18" title="18"><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species   </span></a>
<a class="sourceLine" id="cb434-19" title="19"><span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;     </span></a>
<a class="sourceLine" id="cb434-20" title="20"><span class="co">#&gt; 1          7           3.2          4.7         1.4 versicolor</span></a>
<a class="sourceLine" id="cb434-21" title="21"><span class="co">#&gt; 2          6.4         3.2          4.5         1.5 versicolor</span></a>
<a class="sourceLine" id="cb434-22" title="22"><span class="co">#&gt; 3          6.9         3.1          4.9         1.5 versicolor</span></a>
<a class="sourceLine" id="cb434-23" title="23"><span class="co">#&gt; 4          5.5         2.3          4           1.3 versicolor</span></a>
<a class="sourceLine" id="cb434-24" title="24"><span class="co">#&gt; 5          6.5         2.8          4.6         1.5 versicolor</span></a>
<a class="sourceLine" id="cb434-25" title="25"><span class="co">#&gt; 6          5.7         2.8          4.5         1.3 versicolor</span></a>
<a class="sourceLine" id="cb434-26" title="26"><span class="co">#&gt; # ... with 44 more rows</span></a>
<a class="sourceLine" id="cb434-27" title="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb434-28" title="28"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb434-29" title="29"><span class="co">#&gt; # A tibble: 50 x 5</span></a>
<a class="sourceLine" id="cb434-30" title="30"><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species  </span></a>
<a class="sourceLine" id="cb434-31" title="31"><span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;    </span></a>
<a class="sourceLine" id="cb434-32" title="32"><span class="co">#&gt; 1          6.3         3.3          6           2.5 virginica</span></a>
<a class="sourceLine" id="cb434-33" title="33"><span class="co">#&gt; 2          5.8         2.7          5.1         1.9 virginica</span></a>
<a class="sourceLine" id="cb434-34" title="34"><span class="co">#&gt; 3          7.1         3            5.9         2.1 virginica</span></a>
<a class="sourceLine" id="cb434-35" title="35"><span class="co">#&gt; 4          6.3         2.9          5.6         1.8 virginica</span></a>
<a class="sourceLine" id="cb434-36" title="36"><span class="co">#&gt; 5          6.5         3            5.8         2.2 virginica</span></a>
<a class="sourceLine" id="cb434-37" title="37"><span class="co">#&gt; 6          7.6         3            6.6         2.1 virginica</span></a>
<a class="sourceLine" id="cb434-38" title="38"><span class="co">#&gt; # ... with 44 more rows</span></a>
<a class="sourceLine" id="cb434-39" title="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb434-40" title="40"><span class="co">#&gt; attr(,&quot;ptype&quot;)</span></a>
<a class="sourceLine" id="cb434-41" title="41"><span class="co">#&gt; # A tibble: 0 x 5</span></a>
<a class="sourceLine" id="cb434-42" title="42"><span class="co">#&gt; # ... with 5 variables: Sepal.Length &lt;dbl&gt;, Sepal.Width &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb434-43" title="43"><span class="co">#&gt; #   Petal.Length &lt;dbl&gt;, Petal.Width &lt;dbl&gt;, Species &lt;fct&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb435-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb435-2" title="2"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb435-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb435-4" title="4"><span class="st">  </span><span class="kw">group_data</span>()</a>
<a class="sourceLine" id="cb435-5" title="5"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb435-6" title="6"><span class="co">#&gt;   Species    .rows     </span></a>
<a class="sourceLine" id="cb435-7" title="7"><span class="co">#&gt;   &lt;fct&gt;      &lt;list&gt;    </span></a>
<a class="sourceLine" id="cb435-8" title="8"><span class="co">#&gt; 1 setosa     &lt;int [50]&gt;</span></a>
<a class="sourceLine" id="cb435-9" title="9"><span class="co">#&gt; 2 versicolor &lt;int [50]&gt;</span></a>
<a class="sourceLine" id="cb435-10" title="10"><span class="co">#&gt; 3 virginica  &lt;int [50]&gt;</span></a></code></pre></div>
<p>only grouping variables:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb436-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb436-2" title="2"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb436-3" title="3"><span class="st">  </span><span class="kw">group_keys</span>(Species)</a>
<a class="sourceLine" id="cb436-4" title="4"><span class="co">#&gt; # A tibble: 3 x 1</span></a>
<a class="sourceLine" id="cb436-5" title="5"><span class="co">#&gt;   Species   </span></a>
<a class="sourceLine" id="cb436-6" title="6"><span class="co">#&gt;   &lt;fct&gt;     </span></a>
<a class="sourceLine" id="cb436-7" title="7"><span class="co">#&gt; 1 setosa    </span></a>
<a class="sourceLine" id="cb436-8" title="8"><span class="co">#&gt; 2 versicolor</span></a>
<a class="sourceLine" id="cb436-9" title="9"><span class="co">#&gt; 3 virginica</span></a></code></pre></div>
<p>only rows:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb437-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb437-2" title="2"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb437-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb437-4" title="4"><span class="st">  </span><span class="kw">group_rows</span>()</a>
<a class="sourceLine" id="cb437-5" title="5"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb437-6" title="6"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</span></a>
<a class="sourceLine" id="cb437-7" title="7"><span class="co">#&gt; [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</span></a>
<a class="sourceLine" id="cb437-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb437-9" title="9"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb437-10" title="10"><span class="co">#&gt;  [1]  51  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69</span></a>
<a class="sourceLine" id="cb437-11" title="11"><span class="co">#&gt; [20]  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88</span></a>
<a class="sourceLine" id="cb437-12" title="12"><span class="co">#&gt; [39]  89  90  91  92  93  94  95  96  97  98  99 100</span></a>
<a class="sourceLine" id="cb437-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb437-14" title="14"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb437-15" title="15"><span class="co">#&gt;  [1] 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119</span></a>
<a class="sourceLine" id="cb437-16" title="16"><span class="co">#&gt; [20] 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138</span></a>
<a class="sourceLine" id="cb437-17" title="17"><span class="co">#&gt; [39] 139 140 141 142 143 144 145 146 147 148 149 150</span></a></code></pre></div>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="broom.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vroom.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/enixam/rfordatascience/edit/master/purrr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
