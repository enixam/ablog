<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B.3 Extracting text from pdf and other files | Text Mining with R — Notes</title>
  <meta name="description" content="B.3 Extracting text from pdf and other files | Text Mining with R — Notes" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="B.3 Extracting text from pdf and other files | Text Mining with R — Notes" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="enixam/tidy-text-mining" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B.3 Extracting text from pdf and other files | Text Mining with R — Notes" />
  
  
  

<meta name="author" content="Qiushi Yan" />


<meta name="date" content="2020-04-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="combining-and-splitting.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Notes for Text Mining with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Text Mining with R</b></span></li>
<li class="chapter" data-level="1" data-path="tidy-text-format.html"><a href="tidy-text-format.html"><i class="fa fa-check"></i><b>1</b> Tidy text format</a><ul>
<li class="chapter" data-level="1.1" data-path="the-unnest-tokens-function.html"><a href="the-unnest-tokens-function.html"><i class="fa fa-check"></i><b>1.1</b> The <code>unnest_tokens()</code> function</a></li>
<li class="chapter" data-level="1.2" data-path="the-gutenbergr-package.html"><a href="the-gutenbergr-package.html"><i class="fa fa-check"></i><b>1.2</b> The <code>gutenbergr</code> package</a></li>
<li class="chapter" data-level="1.3" data-path="compare-word-frequency.html"><a href="compare-word-frequency.html"><i class="fa fa-check"></i><b>1.3</b> Compare word frequency</a></li>
<li class="chapter" data-level="1.4" data-path="other-tokenization-methods.html"><a href="other-tokenization-methods.html"><i class="fa fa-check"></i><b>1.4</b> Other tokenization methods</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sentiment-analysis-with-tidy-data.html"><a href="sentiment-analysis-with-tidy-data.html"><i class="fa fa-check"></i><b>2</b> Sentiment analysis with tidy data</a><ul>
<li class="chapter" data-level="2.1" data-path="the-sentiments-dataset.html"><a href="the-sentiments-dataset.html"><i class="fa fa-check"></i><b>2.1</b> The <code>sentiments</code> dataset</a></li>
<li class="chapter" data-level="2.2" data-path="sentiment-analysis-with-inner-join.html"><a href="sentiment-analysis-with-inner-join.html"><i class="fa fa-check"></i><b>2.2</b> Sentiment analysis with inner join</a></li>
<li class="chapter" data-level="2.3" data-path="comparing-3-different-dictionaries.html"><a href="comparing-3-different-dictionaries.html"><i class="fa fa-check"></i><b>2.3</b> Comparing 3 different dictionaries</a></li>
<li class="chapter" data-level="2.4" data-path="most-common-positive-and-negative-words.html"><a href="most-common-positive-and-negative-words.html"><i class="fa fa-check"></i><b>2.4</b> Most common positive and negative words</a></li>
<li class="chapter" data-level="2.5" data-path="wordclouds.html"><a href="wordclouds.html"><i class="fa fa-check"></i><b>2.5</b> Wordclouds</a></li>
<li class="chapter" data-level="2.6" data-path="units-other-than-words.html"><a href="units-other-than-words.html"><i class="fa fa-check"></i><b>2.6</b> Units other than words</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="analyzing-word-and-document-frequency.html"><a href="analyzing-word-and-document-frequency.html"><i class="fa fa-check"></i><b>3</b> Analyzing word and document frequency</a><ul>
<li class="chapter" data-level="3.1" data-path="tf-idf.html"><a href="tf-idf.html"><i class="fa fa-check"></i><b>3.1</b> tf-idf</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tf-idf.html"><a href="tf-idf.html#term-frequency-in-jane-austens-novels"><i class="fa fa-check"></i><b>3.1.1</b> Term frequency in Jane Austen’s novels</a></li>
<li class="chapter" data-level="3.1.2" data-path="tf-idf.html"><a href="tf-idf.html#zipfs-law"><i class="fa fa-check"></i><b>3.1.2</b> Zipf’s law</a></li>
<li class="chapter" data-level="3.1.3" data-path="tf-idf.html"><a href="tf-idf.html#word-rank-slope-chart"><i class="fa fa-check"></i><b>3.1.3</b> Word rank slope chart</a></li>
<li class="chapter" data-level="3.1.4" data-path="tf-idf.html"><a href="tf-idf.html#the-bind_tf_idf-function"><i class="fa fa-check"></i><b>3.1.4</b> The <code>bind_tf_idf()</code> function</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="weighted-log-odds-ratio.html"><a href="weighted-log-odds-ratio.html"><i class="fa fa-check"></i><b>3.2</b> Weighted log odds ratio</a><ul>
<li class="chapter" data-level="3.2.1" data-path="weighted-log-odds-ratio.html"><a href="weighted-log-odds-ratio.html#log-odds-ratio"><i class="fa fa-check"></i><b>3.2.1</b> Log odds ratio</a></li>
<li class="chapter" data-level="3.2.2" data-path="weighted-log-odds-ratio.html"><a href="weighted-log-odds-ratio.html#model-based-approach-weighted-log-odds-ratio"><i class="fa fa-check"></i><b>3.2.2</b> Model-based approach: Weighted log odds ratio</a></li>
<li class="chapter" data-level="3.2.3" data-path="weighted-log-odds-ratio.html"><a href="weighted-log-odds-ratio.html#discussions"><i class="fa fa-check"></i><b>3.2.3</b> Discussions</a></li>
<li class="chapter" data-level="3.2.4" data-path="weighted-log-odds-ratio.html"><a href="weighted-log-odds-ratio.html#bind_log_odds"><i class="fa fa-check"></i><b>3.2.4</b> <code>bind_log_odds()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="a-corpus-of-physics-texts.html"><a href="a-corpus-of-physics-texts.html"><i class="fa fa-check"></i><b>3.3</b> A corpus of physics texts</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="relationships-between-words-n-grams-and-correlations.html"><a href="relationships-between-words-n-grams-and-correlations.html"><i class="fa fa-check"></i><b>4</b> Relationships between words: n-grams and correlations</a><ul>
<li class="chapter" data-level="4.1" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html"><i class="fa fa-check"></i><b>4.1</b> Tokenizing by n-gram</a><ul>
<li class="chapter" data-level="4.1.1" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html#filtering-n-grams"><i class="fa fa-check"></i><b>4.1.1</b> Filtering n-grams</a></li>
<li class="chapter" data-level="4.1.2" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html#analyzing-bigrams"><i class="fa fa-check"></i><b>4.1.2</b> Analyzing bigrams</a></li>
<li class="chapter" data-level="4.1.3" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html#using-bigrams-to-provide-context-in-sentiment-analysis"><i class="fa fa-check"></i><b>4.1.3</b> Using bigrams to provide context in sentiment analysis</a></li>
<li class="chapter" data-level="4.1.4" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html#visualizing-a-network-of-bigrams-with-ggraph"><i class="fa fa-check"></i><b>4.1.4</b> Visualizing a network of bigrams with <code>ggraph</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="tokenizing-by-n-gram.html"><a href="tokenizing-by-n-gram.html#visualizing-friends"><i class="fa fa-check"></i><b>4.1.5</b> Visualizing “friends”</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="counting-and-correlating-pairs-of-words-with-widyr.html"><a href="counting-and-correlating-pairs-of-words-with-widyr.html"><i class="fa fa-check"></i><b>4.2</b> Counting and correlating pairs of words with <code>widyr</code></a><ul>
<li class="chapter" data-level="4.2.1" data-path="counting-and-correlating-pairs-of-words-with-widyr.html"><a href="counting-and-correlating-pairs-of-words-with-widyr.html#counting-and-correlating-among-sections"><i class="fa fa-check"></i><b>4.2.1</b> Counting and correlating among sections</a></li>
<li class="chapter" data-level="4.2.2" data-path="counting-and-correlating-pairs-of-words-with-widyr.html"><a href="counting-and-correlating-pairs-of-words-with-widyr.html#pairwise-correlation"><i class="fa fa-check"></i><b>4.2.2</b> Pairwise correlation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="converting-to-and-from-non-tidy-formats.html"><a href="converting-to-and-from-non-tidy-formats.html"><i class="fa fa-check"></i><b>5</b> Converting to and from non-tidy formats</a><ul>
<li class="chapter" data-level="5.1" data-path="tidying-a-document-term-matrix.html"><a href="tidying-a-document-term-matrix.html"><i class="fa fa-check"></i><b>5.1</b> Tidying a document-term matrix</a></li>
<li class="chapter" data-level="5.2" data-path="casting-tidy-text-data-into-a-matrix.html"><a href="casting-tidy-text-data-into-a-matrix.html"><i class="fa fa-check"></i><b>5.2</b> Casting tidy text data into a matrix</a></li>
<li class="chapter" data-level="5.3" data-path="tidying-corpus-objects-with-metadata.html"><a href="tidying-corpus-objects-with-metadata.html"><i class="fa fa-check"></i><b>5.3</b> Tidying corpus objects with metadata</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="topic-modeling.html"><a href="topic-modeling.html"><i class="fa fa-check"></i><b>6</b> Topic modeling</a><ul>
<li class="chapter" data-level="6.1" data-path="latent-dirichlet-allocation.html"><a href="latent-dirichlet-allocation.html"><i class="fa fa-check"></i><b>6.1</b> Latent Dirichlet Allocation</a><ul>
<li class="chapter" data-level="6.1.1" data-path="latent-dirichlet-allocation.html"><a href="latent-dirichlet-allocation.html#example-associated-press"><i class="fa fa-check"></i><b>6.1.1</b> Example: Associated Press</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="example-the-great-library-heist.html"><a href="example-the-great-library-heist.html"><i class="fa fa-check"></i><b>6.2</b> Example: the great library heist</a><ul>
<li class="chapter" data-level="6.2.1" data-path="example-the-great-library-heist.html"><a href="example-the-great-library-heist.html#lda-on-chapters"><i class="fa fa-check"></i><b>6.2.1</b> LDA on chapters</a></li>
<li class="chapter" data-level="6.2.2" data-path="example-the-great-library-heist.html"><a href="example-the-great-library-heist.html#per-document-classification"><i class="fa fa-check"></i><b>6.2.2</b> Per-document classification</a></li>
<li class="chapter" data-level="6.2.3" data-path="example-the-great-library-heist.html"><a href="example-the-great-library-heist.html#by-word-assignments-augment"><i class="fa fa-check"></i><b>6.2.3</b> By word assignments: <code>augment()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="reviews-on-regular-expressions.html"><a href="reviews-on-regular-expressions.html"><i class="fa fa-check"></i><b>A</b> Reviews on regular expressions</a><ul>
<li class="chapter" data-level="A.1" data-path="posix-character-classes.html"><a href="posix-character-classes.html"><i class="fa fa-check"></i><b>A.1</b> POSIX Character Classes</a></li>
<li class="chapter" data-level="A.2" data-path="greedy-and-lazy-quantifiers.html"><a href="greedy-and-lazy-quantifiers.html"><i class="fa fa-check"></i><b>A.2</b> Greedy and lazy quantifiers</a></li>
<li class="chapter" data-level="A.3" data-path="looking-ahead-and-back.html"><a href="looking-ahead-and-back.html"><i class="fa fa-check"></i><b>A.3</b> Looking ahead and back</a></li>
<li class="chapter" data-level="A.4" data-path="backreferences.html"><a href="backreferences.html"><i class="fa fa-check"></i><b>A.4</b> Backreferences</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="text-processing-examples-in-r.html"><a href="text-processing-examples-in-r.html"><i class="fa fa-check"></i><b>B</b> Text processing examples in R</a><ul>
<li class="chapter" data-level="B.1" data-path="replacing-and-removing.html"><a href="replacing-and-removing.html"><i class="fa fa-check"></i><b>B.1</b> Replacing and removing</a></li>
<li class="chapter" data-level="B.2" data-path="combining-and-splitting.html"><a href="combining-and-splitting.html"><i class="fa fa-check"></i><b>B.2</b> Combining and splitting</a></li>
<li class="chapter" data-level="B.3" data-path="extracting-text-from-pdf-and-other-files.html"><a href="extracting-text-from-pdf-and-other-files.html"><i class="fa fa-check"></i><b>B.3</b> Extracting text from pdf and other files</a><ul>
<li class="chapter" data-level="B.3.1" data-path="extracting-text-from-pdf-and-other-files.html"><a href="extracting-text-from-pdf-and-other-files.html#office-documents"><i class="fa fa-check"></i><b>B.3.1</b> Office documents</a></li>
<li class="chapter" data-level="B.3.2" data-path="extracting-text-from-pdf-and-other-files.html"><a href="extracting-text-from-pdf-and-other-files.html#images"><i class="fa fa-check"></i><b>B.3.2</b> Images</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Written with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Text Mining with R — Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extracting-text-from-pdf-and-other-files" class="section level2">
<h2><span class="header-section-number">B.3</span> Extracting text from pdf and other files</h2>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">library</span>(pdftools)</a>
<a class="sourceLine" id="cb132-2" title="2"></a>
<a class="sourceLine" id="cb132-3" title="3"><span class="kw">download.file</span>(<span class="st">&quot;http://arxiv.org/pdf/1403.2805.pdf&quot;</span>, <span class="st">&quot;data/1403.2805.pdf&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;wb&quot;</span>)</a>
<a class="sourceLine" id="cb132-4" title="4">txt &lt;-<span class="st"> </span><span class="kw">pdf_text</span>(<span class="st">&quot;data/1403.2805.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb132-5" title="5"></a>
<a class="sourceLine" id="cb132-6" title="6"><span class="co"># all 29 pages  </span></a>
<a class="sourceLine" id="cb132-7" title="7"><span class="kw">length</span>(txt) </a>
<a class="sourceLine" id="cb132-8" title="8"><span class="co">#&gt; [1] 29</span></a>
<a class="sourceLine" id="cb132-9" title="9"></a>
<a class="sourceLine" id="cb132-10" title="10"><span class="kw">cat</span>(txt[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb132-11" title="11"><span class="co">#&gt; JSON with R. We refer to Nolan and Temple Lang (2014) for a comprehensive introduction, or one of the</span></a>
<a class="sourceLine" id="cb132-12" title="12"><span class="co">#&gt; many tutorials available on the web. Instead we take a high level view and discuss how R data structures are</span></a>
<a class="sourceLine" id="cb132-13" title="13"><span class="co">#&gt; most naturally represented in JSON. This is not a trivial problem, particulary for complex or relational data</span></a>
<a class="sourceLine" id="cb132-14" title="14"><span class="co">#&gt; as they frequently appear in statistical applications. Several R packages implement toJSON and fromJSON</span></a>
<a class="sourceLine" id="cb132-15" title="15"><span class="co">#&gt; functions which directly convert R objects into JSON and vice versa. However, the exact mapping between</span></a>
<a class="sourceLine" id="cb132-16" title="16"><span class="co">#&gt; the various R data classes JSON structures is not self evident. Currently, there are no formal guidelines,</span></a>
<a class="sourceLine" id="cb132-17" title="17"><span class="co">#&gt; or even consensus between implementations on how R data should be represented in JSON. Furthermore,</span></a>
<a class="sourceLine" id="cb132-18" title="18"><span class="co">#&gt; upon closer inspection, even the most basic data structures in R actually do not perfectly map to their</span></a>
<a class="sourceLine" id="cb132-19" title="19"><span class="co">#&gt; JSON counterparts, and leave some ambiguity for edge cases. These problems have resulted in different</span></a>
<a class="sourceLine" id="cb132-20" title="20"><span class="co">#&gt; behavior between implementations, and can lead to unexpected output for certain special cases. To further</span></a>
<a class="sourceLine" id="cb132-21" title="21"><span class="co">#&gt; complicate things, best practices of representing data in JSON have been established outside the R community.</span></a>
<a class="sourceLine" id="cb132-22" title="22"><span class="co">#&gt; Incorporating these conventions where possible is important to maximize interoperability.</span></a>
<a class="sourceLine" id="cb132-23" title="23"><span class="co">#&gt; 1.1     Parsing and type safety</span></a>
<a class="sourceLine" id="cb132-24" title="24"><span class="co">#&gt; The JSON format specifies 4 primitive types (string, number, boolean, null) and two universal structures:</span></a>
<a class="sourceLine" id="cb132-25" title="25"><span class="co">#&gt;     • A JSON object : an unordered collection of zero or more name/value pairs, where a name is a string and</span></a>
<a class="sourceLine" id="cb132-26" title="26"><span class="co">#&gt;        a value is a string, number, boolean, null, object, or array.</span></a>
<a class="sourceLine" id="cb132-27" title="27"><span class="co">#&gt;     • A JSON array: an ordered sequence of zero or more values.</span></a>
<a class="sourceLine" id="cb132-28" title="28"><span class="co">#&gt; Both these structures are heterogeneous; i.e. they are allowed to contain elements of different types. There-</span></a>
<a class="sourceLine" id="cb132-29" title="29"><span class="co">#&gt; fore, the native R realization of these structures is a named list for JSON objects, and unnamed list for</span></a>
<a class="sourceLine" id="cb132-30" title="30"><span class="co">#&gt; JSON arrays. However, in practice a list is an awkward, inefficient type to store and manipulate data in R.</span></a>
<a class="sourceLine" id="cb132-31" title="31"><span class="co">#&gt; Most statistical applications work with (homogeneous) vectors, matrices or data frames. In order to give</span></a>
<a class="sourceLine" id="cb132-32" title="32"><span class="co">#&gt; these data structures a JSON representation, we can define certain special cases of JSON structures which get</span></a>
<a class="sourceLine" id="cb132-33" title="33"><span class="co">#&gt; parsed into other, more specific R types. For example, one convention which all current implementations</span></a>
<a class="sourceLine" id="cb132-34" title="34"><span class="co">#&gt; have in common is that a homogeneous array of primitives gets parsed into an atomic vector instead of a</span></a>
<a class="sourceLine" id="cb132-35" title="35"><span class="co">#&gt; list. The RJSONIO documentation uses the term “simplify” for this, and we adopt this jargon.</span></a>
<a class="sourceLine" id="cb132-36" title="36"><span class="co">#&gt; txt &lt;- &quot;[12, 3, 7]&quot;</span></a>
<a class="sourceLine" id="cb132-37" title="37"><span class="co">#&gt; x &lt;- fromJSON(txt)</span></a>
<a class="sourceLine" id="cb132-38" title="38"><span class="co">#&gt; is(x)</span></a>
<a class="sourceLine" id="cb132-39" title="39"><span class="co">#&gt; [1] &quot;numeric&quot; &quot;vector&quot;</span></a>
<a class="sourceLine" id="cb132-40" title="40"><span class="co">#&gt; print(x)</span></a>
<a class="sourceLine" id="cb132-41" title="41"><span class="co">#&gt; [1] 12     3   7</span></a>
<a class="sourceLine" id="cb132-42" title="42"><span class="co">#&gt; This seems very reasonable and it is the only practical solution to represent vectors in JSON. However the</span></a>
<a class="sourceLine" id="cb132-43" title="43"><span class="co">#&gt; price we pay is that automatic simplification can compromise type-safety in the context of dynamic data.</span></a>
<a class="sourceLine" id="cb132-44" title="44"><span class="co">#&gt; For example, suppose an R package uses fromJSON to pull data from a JSON API on the web, similar to</span></a>
<a class="sourceLine" id="cb132-45" title="45"><span class="co">#&gt; the example above. However, for some particular combination of parameters, the result includes a null</span></a>
<a class="sourceLine" id="cb132-46" title="46"><span class="co">#&gt; value, e.g: [12, null, 7]. This is actually quite common, many APIs use null for missing values or unset</span></a>
<a class="sourceLine" id="cb132-47" title="47"><span class="co">#&gt; fields. This case makes the behavior of parsers ambiguous, because the JSON array is technically no longer</span></a>
<a class="sourceLine" id="cb132-48" title="48"><span class="co">#&gt;                                                         2</span></a>
<a class="sourceLine" id="cb132-49" title="49"></a>
<a class="sourceLine" id="cb132-50" title="50"><span class="kw">enframe</span>(txt) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb132-51" title="51"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">page =</span> name) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb132-52" title="52"><span class="st">  </span><span class="kw">nest_paragraphs</span>(<span class="dt">input =</span> value, <span class="dt">width =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb132-53" title="53"><span class="co">#&gt;                                                                                                     text</span></a>
<a class="sourceLine" id="cb132-54" title="54"><span class="co">#&gt; 1   The jsonlite Package: A Practical and Consistent Mapping Between JSON Data and R Objects Jeroen Ooms</span></a>
<a class="sourceLine" id="cb132-55" title="55"><span class="co">#&gt; 2     arXiv:1403.2805v1 [stat.CO] 12 Mar 2014 UCLA Department of Statistics Abstract A naive realization</span></a>
<a class="sourceLine" id="cb132-56" title="56"><span class="co">#&gt; 3      of JSON data in R maps JSON arrays to an unnamed list, and JSON objects to a named list. However,</span></a>
<a class="sourceLine" id="cb132-57" title="57"><span class="co">#&gt; 4      in practice a list is an awkward, inefficient type to store and manipulate data. Most statistical</span></a>
<a class="sourceLine" id="cb132-58" title="58"><span class="co">#&gt; 5      applications work with (homogeneous) vectors, matrices or data frames. Therefore JSON packages in</span></a>
<a class="sourceLine" id="cb132-59" title="59"><span class="co">#&gt; 6    R typically define certain special cases of JSON structures which map to simpler R types. Currently</span></a>
<a class="sourceLine" id="cb132-60" title="60"><span class="co">#&gt; 7       there exist no formal guidelines, or even consensus between implementations on how R data should</span></a>
<a class="sourceLine" id="cb132-61" title="61"><span class="co">#&gt; 8       be represented in JSON. Furthermore, upon closer inspection, even the most basic data structures</span></a>
<a class="sourceLine" id="cb132-62" title="62"><span class="co">#&gt; 9        in R actually do not perfectly map to their JSON counterparts and leave some ambiguity for edge</span></a>
<a class="sourceLine" id="cb132-63" title="63"><span class="co">#&gt; 10        cases. These problems have resulted in different behavior between implementations and can lead</span></a>
<a class="sourceLine" id="cb132-64" title="64"><span class="co">#&gt; 11      to unexpected output. This paper explicitly describes a mapping between R classes and JSON data,</span></a>
<a class="sourceLine" id="cb132-65" title="65"><span class="co">#&gt; 12      highlights potential problems, and proposes conventions that generalize the mapping to cover all</span></a>
<a class="sourceLine" id="cb132-66" title="66"><span class="co">#&gt; 13        common structures. We emphasize the importance of type consistency when using JSON to exchange</span></a>
<a class="sourceLine" id="cb132-67" title="67"><span class="co">#&gt; 14  dynamic data, and illustrate using examples and anecdotes. The jsonlite R package is used throughout</span></a>
<a class="sourceLine" id="cb132-68" title="68"><span class="co">#&gt; 15   the paper as a reference implementation. 1 Introduction JavaScript Object Notation (JSON) is a text</span></a>
<a class="sourceLine" id="cb132-69" title="69"><span class="co">#&gt; 16     format for the serialization of structured data (Crockford, 2006a). It is derived from the object</span></a>
<a class="sourceLine" id="cb132-70" title="70"><span class="co">#&gt; 17     literals of JavaScript, as defined in the ECMAScript Programming Language Standard, Third Edition</span></a>
<a class="sourceLine" id="cb132-71" title="71"><span class="co">#&gt; 18       (ECMA, 1999). Design of JSON is simple and concise in comparison with other text based formats,</span></a>
<a class="sourceLine" id="cb132-72" title="72"><span class="co">#&gt; 19    and it was originally proposed by Douglas Crockford as a “fat-free alternative to XML” (Crockford,</span></a>
<a class="sourceLine" id="cb132-73" title="73"><span class="co">#&gt; 20      2006b). The syntax is easy for humans to read and write, easy for machines to parse and generate</span></a>
<a class="sourceLine" id="cb132-74" title="74"><span class="co">#&gt; 21      and completely described in a single page at http://www.json.org. The character encoding of JSON</span></a>
<a class="sourceLine" id="cb132-75" title="75"><span class="co">#&gt; 22     text is always Unicode, using UTF-8 by default (Crockford, 2006a), making it naturally compatible</span></a>
<a class="sourceLine" id="cb132-76" title="76"><span class="co">#&gt; 23     with non- latin alphabets. Over the past years, JSON has become hugely popular on the internet as</span></a>
<a class="sourceLine" id="cb132-77" title="77"><span class="co">#&gt; 24    a general purpose data interchange format. High quality parsing libraries are available for almost</span></a>
<a class="sourceLine" id="cb132-78" title="78"><span class="co">#&gt; 25     any programming language, making it easy to implement systems and applications that exchange data</span></a>
<a class="sourceLine" id="cb132-79" title="79"><span class="co">#&gt; 26      over the network using JSON. For R (R Core Team, 2013), several packages that assist the user in</span></a>
<a class="sourceLine" id="cb132-80" title="80"><span class="co">#&gt; 27    generating, parsing and validating JSON are available through CRAN, including rjson (Couture-Beil,</span></a>
<a class="sourceLine" id="cb132-81" title="81"><span class="co">#&gt; 28   2013), RJSONIO (Lang, 2013), and jsonlite (Ooms et al., 2014). The emphasis of this paper is not on</span></a>
<a class="sourceLine" id="cb132-82" title="82"><span class="co">#&gt; 29                               discussing the JSON format or any particular implementation for using 1</span></a>
<a class="sourceLine" id="cb132-83" title="83"><span class="co">#&gt; 30     JSON with R. We refer to Nolan and Temple Lang (2014) for a comprehensive introduction, or one of</span></a>
<a class="sourceLine" id="cb132-84" title="84"><span class="co">#&gt; 31     the many tutorials available on the web. Instead we take a high level view and discuss how R data</span></a>
<a class="sourceLine" id="cb132-85" title="85"><span class="co">#&gt; 32     structures are most naturally represented in JSON. This is not a trivial problem, particulary for</span></a>
<a class="sourceLine" id="cb132-86" title="86"><span class="co">#&gt; 33  complex or relational data as they frequently appear in statistical applications. Several R packages</span></a>
<a class="sourceLine" id="cb132-87" title="87"><span class="co">#&gt; 34    implement toJSON and fromJSON functions which directly convert R objects into JSON and vice versa.</span></a>
<a class="sourceLine" id="cb132-88" title="88"><span class="co">#&gt; 35    However, the exact mapping between the various R data classes JSON structures is not self evident.</span></a>
<a class="sourceLine" id="cb132-89" title="89"><span class="co">#&gt; 36         Currently, there are no formal guidelines, or even consensus between implementations on how R</span></a>
<a class="sourceLine" id="cb132-90" title="90"><span class="co">#&gt; 37     data should be represented in JSON. Furthermore, upon closer inspection, even the most basic data</span></a>
<a class="sourceLine" id="cb132-91" title="91"><span class="co">#&gt; 38    structures in R actually do not perfectly map to their JSON counterparts, and leave some ambiguity</span></a>
<a class="sourceLine" id="cb132-92" title="92"><span class="co">#&gt; 39   for edge cases. These problems have resulted in different behavior between implementations, and can</span></a>
<a class="sourceLine" id="cb132-93" title="93"><span class="co">#&gt; 40     lead to unexpected output for certain special cases. To further complicate things, best practices</span></a>
<a class="sourceLine" id="cb132-94" title="94"><span class="co">#&gt; 41       of representing data in JSON have been established outside the R community. Incorporating these</span></a>
<a class="sourceLine" id="cb132-95" title="95"><span class="co">#&gt; 42     conventions where possible is important to maximize interoperability. 1.1 Parsing and type safety</span></a>
<a class="sourceLine" id="cb132-96" title="96"><span class="co">#&gt; 43         The JSON format specifies 4 primitive types (string, number, boolean, null) and two universal</span></a>
<a class="sourceLine" id="cb132-97" title="97"><span class="co">#&gt; 44         structures: • A JSON object : an unordered collection of zero or more name/value pairs, where</span></a>
<a class="sourceLine" id="cb132-98" title="98"><span class="co">#&gt; 45         a name is a string and a value is a string, number, boolean, null, object, or array. • A JSON</span></a>
<a class="sourceLine" id="cb132-99" title="99"><span class="co">#&gt; 46      array: an ordered sequence of zero or more values. Both these structures are heterogeneous; i.e.</span></a>
<a class="sourceLine" id="cb132-100" title="100"><span class="co">#&gt; 47     they are allowed to contain elements of different types. There- fore, the native R realization of</span></a>
<a class="sourceLine" id="cb132-101" title="101"><span class="co">#&gt; 48      these structures is a named list for JSON objects, and unnamed list for JSON arrays. However, in</span></a>
<a class="sourceLine" id="cb132-102" title="102"><span class="co">#&gt; 49   practice a list is an awkward, inefficient type to store and manipulate data in R. Most statistical</span></a>
<a class="sourceLine" id="cb132-103" title="103"><span class="co">#&gt; 50         applications work with (homogeneous) vectors, matrices or data frames. In order to give these</span></a>
<a class="sourceLine" id="cb132-104" title="104"><span class="co">#&gt; 51         data structures a JSON representation, we can define certain special cases of JSON structures</span></a>
<a class="sourceLine" id="cb132-105" title="105"><span class="co">#&gt; 52     which get parsed into other, more specific R types. For example, one convention which all current</span></a>
<a class="sourceLine" id="cb132-106" title="106"><span class="co">#&gt; 53   implementations have in common is that a homogeneous array of primitives gets parsed into an atomic</span></a>
<a class="sourceLine" id="cb132-107" title="107"><span class="co">#&gt; 54   vector instead of a list. The RJSONIO documentation uses the term “simplify” for this, and we adopt</span></a>
<a class="sourceLine" id="cb132-108" title="108"><span class="co">#&gt; 55      this jargon. txt &lt;- &quot;[12, 3, 7]&quot; x &lt;- fromJSON(txt) is(x) [1] &quot;numeric&quot; &quot;vector&quot; print(x) [1] 12</span></a>
<a class="sourceLine" id="cb132-109" title="109"><span class="co">#&gt; 56    3 7 This seems very reasonable and it is the only practical solution to represent vectors in JSON.</span></a>
<a class="sourceLine" id="cb132-110" title="110"><span class="co">#&gt; 57   However the price we pay is that automatic simplification can compromise type-safety in the context</span></a>
<a class="sourceLine" id="cb132-111" title="111"><span class="co">#&gt; 58      of dynamic data. For example, suppose an R package uses fromJSON to pull data from a JSON API on</span></a>
<a class="sourceLine" id="cb132-112" title="112"><span class="co">#&gt; 59    the web, similar to the example above. However, for some particular combination of parameters, the</span></a>
<a class="sourceLine" id="cb132-113" title="113"><span class="co">#&gt; 60   result includes a null value, e.g: [12, null, 7]. This is actually quite common, many APIs use null</span></a>
<a class="sourceLine" id="cb132-114" title="114"><span class="co">#&gt; 61    for missing values or unset fields. This case makes the behavior of parsers ambiguous, because the</span></a>
<a class="sourceLine" id="cb132-115" title="115"><span class="co">#&gt; 62                                                                 JSON array is technically no longer 2</span></a>
<a class="sourceLine" id="cb132-116" title="116"><span class="co">#&gt; 63       homogenous. And indeed, some implementations will now return a list instead of a vector. If the</span></a>
<a class="sourceLine" id="cb132-117" title="117"><span class="co">#&gt; 64         user had not anticipated this scenario and the script assumes a vector, the code is likely to</span></a>
<a class="sourceLine" id="cb132-118" title="118"><span class="co">#&gt; 65      run into type errors. The lesson here is that we need to be very specific and explicit about the</span></a>
<a class="sourceLine" id="cb132-119" title="119"><span class="co">#&gt; 66     mapping that is implemented to convert between JSON and R objects. When relying on JSON as a data</span></a>
<a class="sourceLine" id="cb132-120" title="120"><span class="co">#&gt; 67    interchange format, the behavior of the parser must be consistent and unambiguous. Clients relying</span></a>
<a class="sourceLine" id="cb132-121" title="121"><span class="co">#&gt; 68  on JSON to get data in and out of R must know exactly what to expect in order to facilitate reliable</span></a>
<a class="sourceLine" id="cb132-122" title="122"><span class="co">#&gt; 69     communication, even if the data themselves are dynamic. Similarly, R code using dynamic JSON data</span></a>
<a class="sourceLine" id="cb132-123" title="123"><span class="co">#&gt; 70   from an external source is only reliable when the conversion from JSON to R is consistent. Moreover</span></a>
<a class="sourceLine" id="cb132-124" title="124"><span class="co">#&gt; 71    a practical mapping must incorporate existing conventions and uses the most natural representation</span></a>
<a class="sourceLine" id="cb132-125" title="125"><span class="co">#&gt; 72       of certain structures in R. For example, we could argue that instead of falling back on a list,</span></a>
<a class="sourceLine" id="cb132-126" title="126"><span class="co">#&gt; 73    the array above is more naturally interpreted as a numeric vector where the null becomes a missing</span></a>
<a class="sourceLine" id="cb132-127" title="127"><span class="co">#&gt; 74     value (NA). These principles will extrapolate as we start discussing more complex JSON structures</span></a>
<a class="sourceLine" id="cb132-128" title="128"><span class="co">#&gt; 75         representing matrices and data frames. 1.2 Reference implementation: the jsonlite package The</span></a>
<a class="sourceLine" id="cb132-129" title="129"><span class="co">#&gt; 76    jsonlite package provides a reference implementation of the conventions proposed in this document.</span></a>
<a class="sourceLine" id="cb132-130" title="130"><span class="co">#&gt; 77    jsonlite is a fork of the RJSONIO package by Duncan Temple Lang, which again builds on libjson C++</span></a>
<a class="sourceLine" id="cb132-131" title="131"><span class="co">#&gt; 78  library from Jonathan Wallace. The jsonlite package uses the parser from RJSONIO, but the R code has</span></a>
<a class="sourceLine" id="cb132-132" title="132"><span class="co">#&gt; 79  been rewritten from scratch. Both packages implement toJSON and fromJSON functions, but their output</span></a>
<a class="sourceLine" id="cb132-133" title="133"><span class="co">#&gt; 80      is quite different. Finally, the jsonlite package contains a large set of unit tests to validate</span></a>
<a class="sourceLine" id="cb132-134" title="134"><span class="co">#&gt; 81     that R objects are correctly converted to JSON and vice versa. These unit tests cover all classes</span></a>
<a class="sourceLine" id="cb132-135" title="135"><span class="co">#&gt; 82     and edge cases mentioned in this document, and could be used to validate if other implementations</span></a>
<a class="sourceLine" id="cb132-136" title="136"><span class="co">#&gt; 83    follow the same conventions. library(testthat) test_package(&quot;jsonlite&quot;) Note that even though JSON</span></a>
<a class="sourceLine" id="cb132-137" title="137"><span class="co">#&gt; 84    allows for inserting arbitrary white space and indentation, the unit tests assume that white space</span></a>
<a class="sourceLine" id="cb132-138" title="138"><span class="co">#&gt; 85       is trimmed. 1.3 Class-based versus type-based encoding The jsonlite package actually implements</span></a>
<a class="sourceLine" id="cb132-139" title="139"><span class="co">#&gt; 86       two systems for translating between R objects and JSON. This document focuses on the toJSON and</span></a>
<a class="sourceLine" id="cb132-140" title="140"><span class="co">#&gt; 87        fromJSON functions which use R’s class-based method dispatch. For all of the common classes in</span></a>
<a class="sourceLine" id="cb132-141" title="141"><span class="co">#&gt; 88         R, the jsonlite package implements toJSON methods as described in this doc- ument. Users in R</span></a>
<a class="sourceLine" id="cb132-142" title="142"><span class="co">#&gt; 89        can extend this system by implementing additional methods for other classes. However this also</span></a>
<a class="sourceLine" id="cb132-143" title="143"><span class="co">#&gt; 90     means that classes that do not have the toJSON method defined are not supported. Furthermore, the</span></a>
<a class="sourceLine" id="cb132-144" title="144"><span class="co">#&gt; 91  implementation of a specific toJSON method determines which data and metadata in the objects of this</span></a>
<a class="sourceLine" id="cb132-145" title="145"><span class="co">#&gt; 92    class gets encoded in its JSON representation, and how. In this respect, toJSON is similar to e.g.</span></a>
<a class="sourceLine" id="cb132-146" title="146"><span class="co">#&gt; 93  the print function, which also provides a certain representation of an object based on its class and</span></a>
<a class="sourceLine" id="cb132-147" title="147"><span class="co">#&gt; 94  option- ally some print parameters. This representation does not necessarily reflect all information</span></a>
<a class="sourceLine" id="cb132-148" title="148"><span class="co">#&gt; 95      stored in the object, and there is no guaranteed one-to-one correspondence between R objects and</span></a>
<a class="sourceLine" id="cb132-149" title="149"><span class="co">#&gt; 96   JSON. I.e. calling fromJSON(toJSON(object)) will return an object which only contains the data that</span></a>
<a class="sourceLine" id="cb132-150" title="150"><span class="co">#&gt; 97     was encoded by the toJSON method for this particular class, and which might even have a different</span></a>
<a class="sourceLine" id="cb132-151" title="151"><span class="co">#&gt; 98                                                                            class than the original. 3</span></a>
<a class="sourceLine" id="cb132-152" title="152"><span class="co">#&gt; 99          The alternative to class-based method dispatch is to use type-based encoding, which jsonlite</span></a>
<a class="sourceLine" id="cb132-153" title="153"><span class="co">#&gt; 100   implements in the functions serializeJSON and unserializeJSON. All data structures in R get stored</span></a>
<a class="sourceLine" id="cb132-154" title="154"><span class="co">#&gt; 101        in memory using one of the internal SEXP storage types, and serializeJSON defines an encoding</span></a>
<a class="sourceLine" id="cb132-155" title="155"><span class="co">#&gt; 102      schema which captures the type, value, and attributes for each storage type. The result is JSON</span></a>
<a class="sourceLine" id="cb132-156" title="156"><span class="co">#&gt; 103      output which closely resembles the internal structure of the underlying C data types, and which</span></a>
<a class="sourceLine" id="cb132-157" title="157"><span class="co">#&gt; 104  can be perfectly restored to the original R object using unserializeJSON. This system is relatively</span></a>
<a class="sourceLine" id="cb132-158" title="158"><span class="co">#&gt; 105   straightforward to implement, however the disadvantage is that the resulting JSON is very verbose,</span></a>
<a class="sourceLine" id="cb132-159" title="159"><span class="co">#&gt; 106      hard to interpret, and cumbersome to generate in the context of another language or system. For</span></a>
<a class="sourceLine" id="cb132-160" title="160"><span class="co">#&gt; 107 most applications this is actually impractical because it requires the client/consumer to understand</span></a>
<a class="sourceLine" id="cb132-161" title="161"><span class="co">#&gt; 108    and manipulate R data types, which is difficult and reduces interoperability. Instead we can make</span></a>
<a class="sourceLine" id="cb132-162" title="162"><span class="co">#&gt; 109        data in R more accessible to third parties by defining sensible JSON representations that are</span></a>
<a class="sourceLine" id="cb132-163" title="163"><span class="co">#&gt; 110    natural for the class of an object, rather than its internal storage type. This document does not</span></a>
<a class="sourceLine" id="cb132-164" title="164"><span class="co">#&gt; 111     discuss the serializeJSON system in any further detail, and solely treats the class based system</span></a>
<a class="sourceLine" id="cb132-165" title="165"><span class="co">#&gt; 112      implemented in toJSON and fromJSON. However the reader that is interested in full serialization</span></a>
<a class="sourceLine" id="cb132-166" title="166"><span class="co">#&gt; 113    of R objects into JSON is encouraged to have a look at the respective manual pages. 1.4 Scope and</span></a>
<a class="sourceLine" id="cb132-167" title="167"><span class="co">#&gt; 114   limitations Before continuing, we want to stress some limitations of encoding R data structures in</span></a>
<a class="sourceLine" id="cb132-168" title="168"><span class="co">#&gt; 115     JSON. Most impor- tantly, there are the limitations to types of objects that can be represented.</span></a>
<a class="sourceLine" id="cb132-169" title="169"><span class="co">#&gt; 116     In general, temporary in-memory properties such as connections, file descriptors and (recursive)</span></a>
<a class="sourceLine" id="cb132-170" title="170"><span class="co">#&gt; 117      memory references are always difficult if not impossible to store in a sensible way, regardless</span></a>
<a class="sourceLine" id="cb132-171" title="171"><span class="co">#&gt; 118     of the language or serialization method. This document focuses on the common R classes that hold</span></a>
<a class="sourceLine" id="cb132-172" title="172"><span class="co">#&gt; 119      data, such as vectors, factors, lists, matrices and data frames. We do not treat language level</span></a>
<a class="sourceLine" id="cb132-173" title="173"><span class="co">#&gt; 120   constructs such as expressions, functions, promises, which hold little meaning outside the context</span></a>
<a class="sourceLine" id="cb132-174" title="174"><span class="co">#&gt; 121   of R. We also don’t treat special compound classes such as linear models or custom classes defined</span></a>
<a class="sourceLine" id="cb132-175" title="175"><span class="co">#&gt; 122      in contributed packages. When designing systems or protocols that interact with R, it is highly</span></a>
<a class="sourceLine" id="cb132-176" title="176"><span class="co">#&gt; 123    recommended to stick with the standard data structures for the interface input/output. Then there</span></a>
<a class="sourceLine" id="cb132-177" title="177"><span class="co">#&gt; 124    are limitations introduced by the format. Because JSON is a human readable, text-based format, it</span></a>
<a class="sourceLine" id="cb132-178" title="178"><span class="co">#&gt; 125  does not support binary data, and numbers are stored in their decimal notation. The latter leads to</span></a>
<a class="sourceLine" id="cb132-179" title="179"><span class="co">#&gt; 126  loss of precision for real numbers, depending on how many digits the user decides to print. Several</span></a>
<a class="sourceLine" id="cb132-180" title="180"><span class="co">#&gt; 127 dialects of JSON exists such as BSON (Chodorow, 2013) or MSGPACK (Furuhashi, 2014), which extend the</span></a>
<a class="sourceLine" id="cb132-181" title="181"><span class="co">#&gt; 128  format with various binary types. However, these formats are much less popular, less interoperable,</span></a>
<a class="sourceLine" id="cb132-182" title="182"><span class="co">#&gt; 129  and often impractical, precisely because they require binary parsing and abandon human readability.</span></a>
<a class="sourceLine" id="cb132-183" title="183"><span class="co">#&gt; 130 The simplicity of JSON is what makes it an accessible and widely applicable data interchange format.</span></a>
<a class="sourceLine" id="cb132-184" title="184"><span class="co">#&gt; 131   In cases where it is really needed to include some binary data in JSON, one can use something like</span></a>
<a class="sourceLine" id="cb132-185" title="185"><span class="co">#&gt; 132    base64 to encode it as a string. Finally, as mentioned earlier, fromJSON is not a perfect inverse</span></a>
<a class="sourceLine" id="cb132-186" title="186"><span class="co">#&gt; 133   function of toJSON, as would be the case for serialializeJSON and unserializeJSON. The class based</span></a>
<a class="sourceLine" id="cb132-187" title="187"><span class="co">#&gt; 134  mappings are designed for concise and practical encoding of the various common data structures. Our</span></a>
<a class="sourceLine" id="cb132-188" title="188"><span class="co">#&gt; 135 implementation of toJSON and fromJSON approxi- mates a reversible mapping between R objects and JSON</span></a>
<a class="sourceLine" id="cb132-189" title="189"><span class="co">#&gt; 136     for the standard data classes, but there are always limitations and edge cases. For example, the</span></a>
<a class="sourceLine" id="cb132-190" title="190"><span class="co">#&gt; 137 JSON representation of an empty vector, empty list or empty data frame are all the same: &quot;[ ]&quot;. Also</span></a>
<a class="sourceLine" id="cb132-191" title="191"><span class="co">#&gt; 138 some special vector types such as factors, dates or timestamps get coerced to strings, as they would</span></a>
<a class="sourceLine" id="cb132-192" title="192"><span class="co">#&gt; 139   in for example CSV. This is a quite typical and expected behavior among text based formats, but it</span></a>
<a class="sourceLine" id="cb132-193" title="193"><span class="co">#&gt; 140                                  does require some additional interpretation on the consumer side. 4</span></a>
<a class="sourceLine" id="cb132-194" title="194"><span class="co">#&gt; 141      2 Converting between JSON and R classes This section lists examples of how the common R classes</span></a>
<a class="sourceLine" id="cb132-195" title="195"><span class="co">#&gt; 142   are represented in JSON. As explained before, the toJSON function relies on method dispatch, which</span></a>
<a class="sourceLine" id="cb132-196" title="196"><span class="co">#&gt; 143   means that objects get encoded according to their class. If an object has multiple class values, R</span></a>
<a class="sourceLine" id="cb132-197" title="197"><span class="co">#&gt; 144    uses the first occurring class which has a toJSON method. If none of the classes of an object has</span></a>
<a class="sourceLine" id="cb132-198" title="198"><span class="co">#&gt; 145  a toJSON method, an error is raised. 2.1 Atomic vectors The most basic data type in R is the atomic</span></a>
<a class="sourceLine" id="cb132-199" title="199"><span class="co">#&gt; 146   vector. The atomic vector holds an ordered set of homogeneous values of type &quot;logical&quot; (booleans),</span></a>
<a class="sourceLine" id="cb132-200" title="200"><span class="co">#&gt; 147    character (strings), &quot;raw&quot; (bytes), numeric (doubles), &quot;complex&quot; (complex numbers with a real and</span></a>
<a class="sourceLine" id="cb132-201" title="201"><span class="co">#&gt; 148       imaginary part), or integer. Because R is fully vectorized, there is no user level notion of a</span></a>
<a class="sourceLine" id="cb132-202" title="202"><span class="co">#&gt; 149     primitive: a scalar value is considered a vector of length 1. Atomic vectors map to JSON arrays:</span></a>
<a class="sourceLine" id="cb132-203" title="203"><span class="co">#&gt; 150      x &lt;- c(1, 2, pi) cat(toJSON(x)) [ 1, 2, 3.14 ] The JSON array is the only appropriate structure</span></a>
<a class="sourceLine" id="cb132-204" title="204"><span class="co">#&gt; 151        to encode a vector, however note that vectors in R are homogeneous, whereas the JSON array is</span></a>
<a class="sourceLine" id="cb132-205" title="205"><span class="co">#&gt; 152      actually heterogeneous, but JSON does not make this distinction. 2.1.1 Missing values A typical</span></a>
<a class="sourceLine" id="cb132-206" title="206"><span class="co">#&gt; 153 domain specific problem when working with statistical data is presented by missing values: a concept</span></a>
<a class="sourceLine" id="cb132-207" title="207"><span class="co">#&gt; 154    foreign to many other languages. Besides regular values, each vector type in R except for raw can</span></a>
<a class="sourceLine" id="cb132-208" title="208"><span class="co">#&gt; 155   hold NA as a value. Vectors of type double and complex define three additional types of non finite</span></a>
<a class="sourceLine" id="cb132-209" title="209"><span class="co">#&gt; 156   values: NaN, Inf and -Inf. The JSON format does not natively support any of these types; therefore</span></a>
<a class="sourceLine" id="cb132-210" title="210"><span class="co">#&gt; 157 such values values need to be encoded in some other way. There are two obvious approaches. The first</span></a>
<a class="sourceLine" id="cb132-211" title="211"><span class="co">#&gt; 158 one is to use the JSON null type. For example: x &lt;- c(TRUE, FALSE, NA) cat(toJSON(x)) [ true, false,</span></a>
<a class="sourceLine" id="cb132-212" title="212"><span class="co">#&gt; 159  null ] The other option is to encode missing values as strings by wrapping them in double quotes: x</span></a>
<a class="sourceLine" id="cb132-213" title="213"><span class="co">#&gt; 160  &lt;- c(1, 2, NA, NaN, Inf, 10) cat(toJSON(x)) [ 1, 2, &quot;NA&quot;, &quot;NaN&quot;, &quot;Inf&quot;, 10 ] Both methods result in</span></a>
<a class="sourceLine" id="cb132-214" title="214"><span class="co">#&gt; 161   valid JSON, but both have a limitation: the problem with the null type is that it is impossible to</span></a>
<a class="sourceLine" id="cb132-215" title="215"><span class="co">#&gt; 162   distinguish between different types of missing data, which could be a problem for numeric vectors.</span></a>
<a class="sourceLine" id="cb132-216" title="216"><span class="co">#&gt; 163    The values Inf, -Inf, NA and NaN carry different meanings, and these should not get lost in the 5</span></a>
<a class="sourceLine" id="cb132-217" title="217"><span class="co">#&gt; 164       encoding. However, the problem with encoding missing values as strings is that this method can</span></a>
<a class="sourceLine" id="cb132-218" title="218"><span class="co">#&gt; 165      not be used for character vectors, because the consumer won’t be able to distinguish the actual</span></a>
<a class="sourceLine" id="cb132-219" title="219"><span class="co">#&gt; 166       string &quot;NA&quot; and the missing value NA. This would create a likely source of bugs, where clients</span></a>
<a class="sourceLine" id="cb132-220" title="220"><span class="co">#&gt; 167      mistakenly interpret &quot;NA&quot; as an actual value, which is a common problem with text-based formats</span></a>
<a class="sourceLine" id="cb132-221" title="221"><span class="co">#&gt; 168         such as CSV. For this reason, jsonlite uses the following defaults: • Missing values in non-</span></a>
<a class="sourceLine" id="cb132-222" title="222"><span class="co">#&gt; 169        numeric vectors (logical, character) are encoded as null. • Missing values in numeric vectors</span></a>
<a class="sourceLine" id="cb132-223" title="223"><span class="co">#&gt; 170         (double, integer, complex) are encoded as strings. We expect that these conventions are most</span></a>
<a class="sourceLine" id="cb132-224" title="224"><span class="co">#&gt; 171  likely to result in the correct interpretation of missing values. Some examples: cat(toJSON(c(TRUE,</span></a>
<a class="sourceLine" id="cb132-225" title="225"><span class="co">#&gt; 172         NA, NA, FALSE))) [ true, null, null, false ] cat(toJSON(c(&quot;FOO&quot;, &quot;BAR&quot;, NA, &quot;NA&quot;))) [ &quot;FOO&quot;,</span></a>
<a class="sourceLine" id="cb132-226" title="226"><span class="co">#&gt; 173     &quot;BAR&quot;, null, &quot;NA&quot; ] cat(toJSON(c(3.14, NA, NaN, 21, Inf, -Inf))) [ 3.14, &quot;NA&quot;, &quot;NaN&quot;, 21, &quot;Inf&quot;,</span></a>
<a class="sourceLine" id="cb132-227" title="227"><span class="co">#&gt; 174           &quot;-Inf&quot; ] cat(toJSON(c(3.14, NA, NaN, 21, Inf, -Inf), na = &quot;null&quot;)) [ 3.14, null, null, 21,</span></a>
<a class="sourceLine" id="cb132-228" title="228"><span class="co">#&gt; 175       null, null ] 2.1.2 Special vector types: dates, times, factor, complex Besides missing values,</span></a>
<a class="sourceLine" id="cb132-229" title="229"><span class="co">#&gt; 176        JSON also lacks native support for some of the basic vector types in R that frequently appear</span></a>
<a class="sourceLine" id="cb132-230" title="230"><span class="co">#&gt; 177          in data sets. These include vectors of class Date, POSIXt (timestamps), factors and complex</span></a>
<a class="sourceLine" id="cb132-231" title="231"><span class="co">#&gt; 178       vectors. By default, the jsonlite package coerces these types to strings (using as.character):</span></a>
<a class="sourceLine" id="cb132-232" title="232"><span class="co">#&gt; 179            cat(toJSON(Sys.time() + 1:3)) [ &quot;2014-03-11 21:16:05&quot;, &quot;2014-03-11 21:16:06&quot;, &quot;2014-03-11</span></a>
<a class="sourceLine" id="cb132-233" title="233"><span class="co">#&gt; 180      21:16:07&quot; ] cat(toJSON(as.Date(Sys.time()) + 1:3)) [ &quot;2014-03-13&quot;, &quot;2014-03-14&quot;, &quot;2014-03-15&quot; ]</span></a>
<a class="sourceLine" id="cb132-234" title="234"><span class="co">#&gt; 181        cat(toJSON(factor(c(&quot;foo&quot;, &quot;bar&quot;, &quot;foo&quot;)))) [ &quot;foo&quot;, &quot;bar&quot;, &quot;foo&quot; ] cat(toJSON(complex(real =</span></a>
<a class="sourceLine" id="cb132-235" title="235"><span class="co">#&gt; 182        runif(3), imaginary = rnorm(3)))) [ &quot;0.5+1.7i&quot;, &quot;0-2i&quot;, &quot;0.37-0.13i&quot; ] When parsing such JSON</span></a>
<a class="sourceLine" id="cb132-236" title="236"><span class="co">#&gt; 183   strings, these values will appear as character vectors. In order to obtain the original types, the</span></a>
<a class="sourceLine" id="cb132-237" title="237"><span class="co">#&gt; 184     user needs to manually coerce them back to the desired type using the corresponding as function,</span></a>
<a class="sourceLine" id="cb132-238" title="238"><span class="co">#&gt; 185    e.g. as.POSIXct, as.Date, as.factor or as.complex. In this respect, JSON is subject to the same 6</span></a>
<a class="sourceLine" id="cb132-239" title="239"><span class="co">#&gt; 186     limitations as text based formats such as CSV. 2.1.3 Special cases: vectors of length 0 or 1 Two</span></a>
<a class="sourceLine" id="cb132-240" title="240"><span class="co">#&gt; 187       edge cases deserve special attention: vectors of length 0 and vectors of length 1. In jsonlite</span></a>
<a class="sourceLine" id="cb132-241" title="241"><span class="co">#&gt; 188      these are encoded respectively as an empty array, and an array of length 1: # vectors of length</span></a>
<a class="sourceLine" id="cb132-242" title="242"><span class="co">#&gt; 189    0 and 1 cat(toJSON(vector())) [ ] cat(toJSON(pi)) [ 3.14 ] # vectors of length 0 and 1 in a named</span></a>
<a class="sourceLine" id="cb132-243" title="243"><span class="co">#&gt; 190         list cat(toJSON(list(foo = vector()))) { &quot;foo&quot; : [ ] } cat(toJSON(list(foo = pi))) { &quot;foo&quot; :</span></a>
<a class="sourceLine" id="cb132-244" title="244"><span class="co">#&gt; 191        [ 3.14 ] } # vectors of length 0 and 1 in an unnamed list cat(toJSON(list(vector()))) [ [ ] ]</span></a>
<a class="sourceLine" id="cb132-245" title="245"><span class="co">#&gt; 192  cat(toJSON(list(pi))) [ [ 3.14 ] ] This might seem obvious but these cases result in very different</span></a>
<a class="sourceLine" id="cb132-246" title="246"><span class="co">#&gt; 193 behavior between different JSON packages. This is probably caused by the fact that R does not have a</span></a>
<a class="sourceLine" id="cb132-247" title="247"><span class="co">#&gt; 194 scalar type, and some package authors decided to treat vectors of length 1 as if they were a scalar.</span></a>
<a class="sourceLine" id="cb132-248" title="248"><span class="co">#&gt; 195        For example, in the current implementations, both RJSONIO and rjson encode a vector of length</span></a>
<a class="sourceLine" id="cb132-249" title="249"><span class="co">#&gt; 196      one as a JSON primitive when it appears within a list: # Other packages make different choices:</span></a>
<a class="sourceLine" id="cb132-250" title="250"><span class="co">#&gt; 197    cat(rjson::toJSON(list(n = c(1)))) {&quot;n&quot;:1} cat(rjson::toJSON(list(n = c(1, 2)))) {&quot;n&quot;:[1,2]} When</span></a>
<a class="sourceLine" id="cb132-251" title="251"><span class="co">#&gt; 198 encoding a single dataset this seems harmless, but in the context of dynamic data this inconsistency</span></a>
<a class="sourceLine" id="cb132-252" title="252"><span class="co">#&gt; 199    is almost guaranteed to cause bugs. For example, imagine an R web service which lets the user fit</span></a>
<a class="sourceLine" id="cb132-253" title="253"><span class="co">#&gt; 200   a linear model and sends back the fitted parameter estimates as a JSON array. The client code then</span></a>
<a class="sourceLine" id="cb132-254" title="254"><span class="co">#&gt; 201      parses the JSON, and iterates over the array of coefficients to display them in a GUI. All goes</span></a>
<a class="sourceLine" id="cb132-255" title="255"><span class="co">#&gt; 202    well, until the user decides to fit a model with only one predictor. If the JSON encoder suddenly</span></a>
<a class="sourceLine" id="cb132-256" title="256"><span class="co">#&gt; 203                                                         returns a primitive value where the client 7</span></a>
<a class="sourceLine" id="cb132-257" title="257"><span class="co">#&gt; 204     is assuming an array, the application will likely break. Any consumer or client would need to be</span></a>
<a class="sourceLine" id="cb132-258" title="258"><span class="co">#&gt; 205   aware of the special case where the vector becomes a primitive, and explicitly take this exception</span></a>
<a class="sourceLine" id="cb132-259" title="259"><span class="co">#&gt; 206    into account when processing the result. When the client fails to do so and proceeds as usual, it</span></a>
<a class="sourceLine" id="cb132-260" title="260"><span class="co">#&gt; 207 will probably call an iterator or loop method on a primitive value, resulting in the obvious errors.</span></a>
<a class="sourceLine" id="cb132-261" title="261"><span class="co">#&gt; 208     For this reason jsonlite uses consistent encoding schemes which do not depend on variable object</span></a>
<a class="sourceLine" id="cb132-262" title="262"><span class="co">#&gt; 209     properties such as its length. Hence, a vector is always encoded as an array, even when it is of</span></a>
<a class="sourceLine" id="cb132-263" title="263"><span class="co">#&gt; 210     length 0 or 1. 2.2 Matrices Arguably one of the strongest sides of R is its ability to interface</span></a>
<a class="sourceLine" id="cb132-264" title="264"><span class="co">#&gt; 211      libraries for basic linear algebra subpro- grams (Lawson et al., 1979) such as LAPACK (Anderson</span></a>
<a class="sourceLine" id="cb132-265" title="265"><span class="co">#&gt; 212     et al., 1999). These libraries provide well tuned, high performance implementations of important</span></a>
<a class="sourceLine" id="cb132-266" title="266"><span class="co">#&gt; 213     linear algebra operations to calculate anything from inner products and eigen values to singular</span></a>
<a class="sourceLine" id="cb132-267" title="267"><span class="co">#&gt; 214  value decompositions. These are in turn the building blocks of statis- tical methods such as linear</span></a>
<a class="sourceLine" id="cb132-268" title="268"><span class="co">#&gt; 215   regression or principal component analysis. Linear algebra methods operate on matrices, making the</span></a>
<a class="sourceLine" id="cb132-269" title="269"><span class="co">#&gt; 216 matrix one of the most central data classes in R. Conceptually, a matrix consists of a 2 dimensional</span></a>
<a class="sourceLine" id="cb132-270" title="270"><span class="co">#&gt; 217    structure of homogeneous values. It is indexed using 2 numbers (or vectors), representing the row</span></a>
<a class="sourceLine" id="cb132-271" title="271"><span class="co">#&gt; 218    and column number of the matrix respectively. x &lt;- matrix(1:12, nrow = 3, ncol = 4) print(x) [,1]</span></a>
<a class="sourceLine" id="cb132-272" title="272"><span class="co">#&gt; 219    [,2] [,3] [,4] [1,] 1 4 7 10 [2,] 2 5 8 11 [3,] 3 6 9 12 print(x[2, 4]) [1] 11 A matrix is stored</span></a>
<a class="sourceLine" id="cb132-273" title="273"><span class="co">#&gt; 220    in memory as a single atomic vector with an attribute called &quot;dim&quot; defining the dimensions of the</span></a>
<a class="sourceLine" id="cb132-274" title="274"><span class="co">#&gt; 221 matrix. The product of the dimensions is equal to the length of the vector. attributes(volcano) $dim</span></a>
<a class="sourceLine" id="cb132-275" title="275"><span class="co">#&gt; 222   [1] 87 61 length(volcano) [1] 5307 Even though the matrix is stored as a single vector, the way it</span></a>
<a class="sourceLine" id="cb132-276" title="276"><span class="co">#&gt; 223 is printed and indexed makes it conceptually a 2 dimensional structure. In jsonlite a matrix maps to</span></a>
<a class="sourceLine" id="cb132-277" title="277"><span class="co">#&gt; 224   an array of equal-length subarrays: x &lt;- matrix(1:12, nrow = 3, ncol = 4) cat(toJSON(x)) [ [ 1, 4,</span></a>
<a class="sourceLine" id="cb132-278" title="278"><span class="co">#&gt; 225                                                        7, 10 ], [ 2, 5, 8, 11 ], [ 3, 6, 9, 12 ] ] 8</span></a>
<a class="sourceLine" id="cb132-279" title="279"><span class="co">#&gt; 226    We expect this representation will be the most intuitive to interpret, also within languages that</span></a>
<a class="sourceLine" id="cb132-280" title="280"><span class="co">#&gt; 227     do not have a native notion of a matrix. Note that even though R stores matrices in column major</span></a>
<a class="sourceLine" id="cb132-281" title="281"><span class="co">#&gt; 228       order, jsonlite encodes matrices in row major order. This is a more conventional and intuitive</span></a>
<a class="sourceLine" id="cb132-282" title="282"><span class="co">#&gt; 229     way to represent matrices and is consistent with the row-based encoding of data frames discussed</span></a>
<a class="sourceLine" id="cb132-283" title="283"><span class="co">#&gt; 230     in the next section. When the JSON string is properly indented (recall that white space and line</span></a>
<a class="sourceLine" id="cb132-284" title="284"><span class="co">#&gt; 231 breaks are optional in JSON), it looks very similar to the way R prints matrices: [ [ 1, 4, 7, 10 ],</span></a>
<a class="sourceLine" id="cb132-285" title="285"><span class="co">#&gt; 232    [ 2, 5, 8, 11 ], [ 3, 6, 9, 12 ] ] Because the matrix is implemented in R as an atomic vector, it</span></a>
<a class="sourceLine" id="cb132-286" title="286"><span class="co">#&gt; 233      automatically inherits the conventions mentioned earlier with respect to edge cases and missing</span></a>
<a class="sourceLine" id="cb132-287" title="287"><span class="co">#&gt; 234 values: x &lt;- matrix(c(1, 2, 4, NA), nrow = 2) cat(toJSON(x)) [ [ 1, 4 ], [ 2, &quot;NA&quot; ] ] cat(toJSON(x,</span></a>
<a class="sourceLine" id="cb132-288" title="288"><span class="co">#&gt; 235    na = &quot;null&quot;)) [ [ 1, 4 ], [ 2, null ] ] cat(toJSON(matrix(pi))) [ [ 3.14 ] ] 2.2.1 Matrix row and</span></a>
<a class="sourceLine" id="cb132-289" title="289"><span class="co">#&gt; 236    column names Besides the &quot;dim&quot; attribute, the matrix class has an additional, optional attribute:</span></a>
<a class="sourceLine" id="cb132-290" title="290"><span class="co">#&gt; 237   &quot;dimnames&quot;. This attribute holds names for the rows and columns in the matrix. However, we decided</span></a>
<a class="sourceLine" id="cb132-291" title="291"><span class="co">#&gt; 238  not to include this information in the default JSON mapping for matrices for several reasons. First</span></a>
<a class="sourceLine" id="cb132-292" title="292"><span class="co">#&gt; 239  of all, because this attribute is optional, often either row or column names or both are NULL. This</span></a>
<a class="sourceLine" id="cb132-293" title="293"><span class="co">#&gt; 240    makes it difficult to define a practical encoding that covers all cases with and without row and/</span></a>
<a class="sourceLine" id="cb132-294" title="294"><span class="co">#&gt; 241  or column names. Secondly, the names in matrices are mostly there for annotation only; they are not</span></a>
<a class="sourceLine" id="cb132-295" title="295"><span class="co">#&gt; 242   actually used in calculations. The linear algebra subrou- tines mentioned before completely ignore</span></a>
<a class="sourceLine" id="cb132-296" title="296"><span class="co">#&gt; 243 them, and never include any names in their output. So there is often little purpose of setting names</span></a>
<a class="sourceLine" id="cb132-297" title="297"><span class="co">#&gt; 244      in the first place, other than annotation. When row or column names of a matrix seem to contain</span></a>
<a class="sourceLine" id="cb132-298" title="298"><span class="co">#&gt; 245    vital information, we might want to transform the data into a more appropriate structure. Wickham</span></a>
<a class="sourceLine" id="cb132-299" title="299"><span class="co">#&gt; 246      (2014) calls this “tidying” the data and outlines best practices on storing statistical data in</span></a>
<a class="sourceLine" id="cb132-300" title="300"><span class="co">#&gt; 247  its most appropriate form. He lists the issue where “column headers are values, not variable names”</span></a>
<a class="sourceLine" id="cb132-301" title="301"><span class="co">#&gt; 248     as the most common source of untidy data. This often happens when the structure is optimized for</span></a>
<a class="sourceLine" id="cb132-302" title="302"><span class="co">#&gt; 249  presentation (e.g. printing), rather than computation. In the following example taken from Wickham,</span></a>
<a class="sourceLine" id="cb132-303" title="303"><span class="co">#&gt; 250   the predictor variable (treatment) is stored in the column headers rather than the actual data. As</span></a>
<a class="sourceLine" id="cb132-304" title="304"><span class="co">#&gt; 251    a result, these values are not included in the JSON: x &lt;- matrix(c(NA, 1, 2, 5, NA, 3), nrow = 3)</span></a>
<a class="sourceLine" id="cb132-305" title="305"><span class="co">#&gt; 252                                                           row.names(x) &lt;- c(&quot;Joe&quot;, &quot;Jane&quot;, &quot;Mary&quot;) 9</span></a>
<a class="sourceLine" id="cb132-306" title="306"><span class="co">#&gt; 253        colnames(x) &lt;- c(&quot;Treatment A&quot;, &quot;Treatment B&quot;) print(x) Treatment A Treatment B Joe NA 5 Jane</span></a>
<a class="sourceLine" id="cb132-307" title="307"><span class="co">#&gt; 254          1 NA Mary 2 3 cat(toJSON(x)) [ [ &quot;NA&quot;, 5 ], [ 1, &quot;NA&quot; ], [ 2, 3 ] ] Wickham recommends that</span></a>
<a class="sourceLine" id="cb132-308" title="308"><span class="co">#&gt; 255       the data be melted into its tidy form. Once the data is tidy, the JSON encoding will naturally</span></a>
<a class="sourceLine" id="cb132-309" title="309"><span class="co">#&gt; 256   contain the treatment values: library(reshape2) y &lt;- melt(x, varnames = c(&quot;Subject&quot;, &quot;Treatment&quot;))</span></a>
<a class="sourceLine" id="cb132-310" title="310"><span class="co">#&gt; 257        print(y) Subject Treatment value 1 Joe Treatment A NA 2 Jane Treatment A 1 3 Mary Treatment A</span></a>
<a class="sourceLine" id="cb132-311" title="311"><span class="co">#&gt; 258       2 4 Joe Treatment B 5 5 Jane Treatment B NA 6 Mary Treatment B 3 cat(toJSON(y, pretty = TRUE))</span></a>
<a class="sourceLine" id="cb132-312" title="312"><span class="co">#&gt; 259 [ { &quot;Subject&quot; : &quot;Joe&quot;, &quot;Treatment&quot; : &quot;Treatment A&quot; }, { &quot;Subject&quot; : &quot;Jane&quot;, &quot;Treatment&quot; : &quot;Treatment</span></a>
<a class="sourceLine" id="cb132-313" title="313"><span class="co">#&gt; 260   A&quot;, &quot;value&quot; : 1 }, { &quot;Subject&quot; : &quot;Mary&quot;, &quot;Treatment&quot; : &quot;Treatment A&quot;, &quot;value&quot; : 2 }, { &quot;Subject&quot; :</span></a>
<a class="sourceLine" id="cb132-314" title="314"><span class="co">#&gt; 261                                                               &quot;Joe&quot;, &quot;Treatment&quot; : &quot;Treatment B&quot;, 10</span></a>
<a class="sourceLine" id="cb132-315" title="315"><span class="co">#&gt; 262            &quot;value&quot; : 5 }, { &quot;Subject&quot; : &quot;Jane&quot;, &quot;Treatment&quot; : &quot;Treatment B&quot; }, { &quot;Subject&quot; : &quot;Mary&quot;,</span></a>
<a class="sourceLine" id="cb132-316" title="316"><span class="co">#&gt; 263     &quot;Treatment&quot; : &quot;Treatment B&quot;, &quot;value&quot; : 3 } ] In some other cases, the column headers actually do</span></a>
<a class="sourceLine" id="cb132-317" title="317"><span class="co">#&gt; 264     contain variable names, and melting is inappropriate. For data sets with records consisting of a</span></a>
<a class="sourceLine" id="cb132-318" title="318"><span class="co">#&gt; 265     set of named columns (fields), R has more natural and flexible class: the data-frame. The toJSON</span></a>
<a class="sourceLine" id="cb132-319" title="319"><span class="co">#&gt; 266    method for data frames (described later) is more suitable when we want to refer to rows or fields</span></a>
<a class="sourceLine" id="cb132-320" title="320"><span class="co">#&gt; 267  by their name. Any matrix can easily be converted to a data-frame using the as.data.frame function:</span></a>
<a class="sourceLine" id="cb132-321" title="321"><span class="co">#&gt; 268     cat(toJSON(as.data.frame(x), pretty = TRUE)) [ { &quot;$row&quot; : &quot;Joe&quot;, &quot;Treatment B&quot; : 5 }, { &quot;$row&quot; :</span></a>
<a class="sourceLine" id="cb132-322" title="322"><span class="co">#&gt; 269    &quot;Jane&quot;, &quot;Treatment A&quot; : 1 }, { &quot;$row&quot; : &quot;Mary&quot;, &quot;Treatment A&quot; : 2, &quot;Treatment B&quot; : 3 } ] For some</span></a>
<a class="sourceLine" id="cb132-323" title="323"><span class="co">#&gt; 270    cases this results in the desired output, but in this example melting seems more appropriate. 2.3</span></a>
<a class="sourceLine" id="cb132-324" title="324"><span class="co">#&gt; 271 Lists The list is the most general purpose data structure in R. It holds an ordered set of elements,</span></a>
<a class="sourceLine" id="cb132-325" title="325"><span class="co">#&gt; 272  including other lists, each of arbitrary type and size. Two types of lists are distinguished: named</span></a>
<a class="sourceLine" id="cb132-326" title="326"><span class="co">#&gt; 273 lists and unnamed lists. A list is considered a named list if it has an attribute called &quot;names&quot;. In</span></a>
<a class="sourceLine" id="cb132-327" title="327"><span class="co">#&gt; 274                                                                         practice, a named list is 11</span></a>
<a class="sourceLine" id="cb132-328" title="328"><span class="co">#&gt; 275    any list for which we can access an element by its name, whereas elements of an unnamed lists can</span></a>
<a class="sourceLine" id="cb132-329" title="329"><span class="co">#&gt; 276  only be accessed using their index number: mylist1 &lt;- list(foo = 123, bar = 456) print(mylist1$bar)</span></a>
<a class="sourceLine" id="cb132-330" title="330"><span class="co">#&gt; 277 [1] 456 mylist2 &lt;- list(123, 456) print(mylist2[[2]]) [1] 456 2.3.1 Unnamed lists Just like vectors,</span></a>
<a class="sourceLine" id="cb132-331" title="331"><span class="co">#&gt; 278 an unnamed list maps to a JSON array: cat(toJSON(list(c(1, 2), &quot;test&quot;, TRUE, list(c(1, 2))))) [ [ 1,</span></a>
<a class="sourceLine" id="cb132-332" title="332"><span class="co">#&gt; 279   2 ], [ &quot;test&quot; ], [ true ], [ [ 1, 2 ] ] ] Note that even though both vectors and lists are encoded</span></a>
<a class="sourceLine" id="cb132-333" title="333"><span class="co">#&gt; 280      using JSON arrays, they can be distinguished from their contents: an R vector results in a JSON</span></a>
<a class="sourceLine" id="cb132-334" title="334"><span class="co">#&gt; 281     array containing only primitives, whereas a list results in a JSON array containing only objects</span></a>
<a class="sourceLine" id="cb132-335" title="335"><span class="co">#&gt; 282    and arrays. This allows the JSON parser to reconstruct the original type from encoded vectors and</span></a>
<a class="sourceLine" id="cb132-336" title="336"><span class="co">#&gt; 283      arrays: x &lt;- list(c(1, 2, NA), &quot;test&quot;, FALSE, list(foo = &quot;bar&quot;)) identical(fromJSON(toJSON(x)),</span></a>
<a class="sourceLine" id="cb132-337" title="337"><span class="co">#&gt; 284     x) [1] TRUE The only exception is the empty list and empty vector, which are both encoded as [ ]</span></a>
<a class="sourceLine" id="cb132-338" title="338"><span class="co">#&gt; 285       and therefore indistinguishable, but this is rarely a problem in practice. 2.3.2 Named lists A</span></a>
<a class="sourceLine" id="cb132-339" title="339"><span class="co">#&gt; 286     named list in R maps to a JSON object : cat(toJSON(list(foo = c(1, 2), bar = &quot;test&quot;))) { &quot;foo&quot; :</span></a>
<a class="sourceLine" id="cb132-340" title="340"><span class="co">#&gt; 287       [ 1, 2 ], &quot;bar&quot; : [ &quot;test&quot; ] } Because a list can contain other lists, this works recursively:</span></a>
<a class="sourceLine" id="cb132-341" title="341"><span class="co">#&gt; 288     cat(toJSON(list(foo=list(bar=list(baz=pi))))) { &quot;foo&quot; : { &quot;bar&quot; : { &quot;baz&quot; : [ 3.14 ] } } } Named</span></a>
<a class="sourceLine" id="cb132-342" title="342"><span class="co">#&gt; 289   lists map almost perfectly to JSON objects with one exception: list elements can have empty names:</span></a>
<a class="sourceLine" id="cb132-343" title="343"><span class="co">#&gt; 290                                                                                                   12</span></a>
<a class="sourceLine" id="cb132-344" title="344"><span class="co">#&gt; 291         x &lt;- list(foo = 123, &quot;test&quot;, TRUE) attr(x, &quot;names&quot;) [1] &quot;foo&quot; &quot;&quot; &quot;&quot; x$foo [1] 123 x[[2]] [1]</span></a>
<a class="sourceLine" id="cb132-345" title="345"><span class="co">#&gt; 292  &quot;test&quot; In a JSON object, each element in an object must have a valid name. To ensure this property,</span></a>
<a class="sourceLine" id="cb132-346" title="346"><span class="co">#&gt; 293   jsonlite uses the same solution as the print method, which is to fall back on indices for elements</span></a>
<a class="sourceLine" id="cb132-347" title="347"><span class="co">#&gt; 294   that do not have a proper name: x &lt;- list(foo = 123, &quot;test&quot;, TRUE) print(x) $foo [1] 123 [[2]] [1]</span></a>
<a class="sourceLine" id="cb132-348" title="348"><span class="co">#&gt; 295      &quot;test&quot; [[3]] [1] TRUE cat(toJSON(x)) { &quot;foo&quot; : [ 123 ], &quot;2&quot; : [ &quot;test&quot; ], &quot;3&quot; : [ true ] } This</span></a>
<a class="sourceLine" id="cb132-349" title="349"><span class="co">#&gt; 296       behavior ensures that all generated JSON is valid, however named lists with empty names should</span></a>
<a class="sourceLine" id="cb132-350" title="350"><span class="co">#&gt; 297     be avoided where possible. When actually designing R objects that should be interoperable, it is</span></a>
<a class="sourceLine" id="cb132-351" title="351"><span class="co">#&gt; 298  recommended that each list element is given a proper name. 2.4 Data frame The data frame is perhaps</span></a>
<a class="sourceLine" id="cb132-352" title="352"><span class="co">#&gt; 299   the most central data structure in R from the user point of view. This class holds tabular data in</span></a>
<a class="sourceLine" id="cb132-353" title="353"><span class="co">#&gt; 300  which each column is named and (usually) homogeneous. Conceptually it is very similar to a table in</span></a>
<a class="sourceLine" id="cb132-354" title="354"><span class="co">#&gt; 301   relational data bases such as MySQL, where fields are referred to as column names, and records are</span></a>
<a class="sourceLine" id="cb132-355" title="355"><span class="co">#&gt; 302  called row names. Like a matrix, a data frame can be subsetted with two indices, to extract certain</span></a>
<a class="sourceLine" id="cb132-356" title="356"><span class="co">#&gt; 303    rows and columns of the data: is(iris) [1] &quot;data.frame&quot; &quot;list&quot; &quot;oldClass&quot; &quot;vector&quot; names(iris) 13</span></a>
<a class="sourceLine" id="cb132-357" title="357"><span class="co">#&gt; 304     [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot; &quot;Petal.Length&quot; &quot;Petal.Width&quot; [5] &quot;Species&quot; print(iris[1:3, c(1,</span></a>
<a class="sourceLine" id="cb132-358" title="358"><span class="co">#&gt; 305    5)]) Sepal.Length Species 1 5.1 setosa 2 4.9 setosa 3 4.7 setosa print(iris[1:3, c(&quot;Sepal.Width&quot;,</span></a>
<a class="sourceLine" id="cb132-359" title="359"><span class="co">#&gt; 306 &quot;Species&quot;)]) Sepal.Width Species 1 3.5 setosa 2 3.0 setosa 3 3.2 setosa For the previously discussed</span></a>
<a class="sourceLine" id="cb132-360" title="360"><span class="co">#&gt; 307   classes such as vectors and matrices, behavior of jsonlite is quite similar to the other available</span></a>
<a class="sourceLine" id="cb132-361" title="361"><span class="co">#&gt; 308  packages that implement toJSON and toJSON functions, with only minor differences for missing values</span></a>
<a class="sourceLine" id="cb132-362" title="362"><span class="co">#&gt; 309    and edge cases. But when it comes to data frames, jsonlite takes a completely different approach.</span></a>
<a class="sourceLine" id="cb132-363" title="363"><span class="co">#&gt; 310     The behavior of jsonlite is designed for compatibility with conventional ways of encoding table-</span></a>
<a class="sourceLine" id="cb132-364" title="364"><span class="co">#&gt; 311        like structures outside the R community. The implementation is more complex, but results in a</span></a>
<a class="sourceLine" id="cb132-365" title="365"><span class="co">#&gt; 312   powerful and more natural way of interfacing data frames through JSON and vice versa. 2.4.1 Column</span></a>
<a class="sourceLine" id="cb132-366" title="366"><span class="co">#&gt; 313      based versus row based tables Generally speaking, tabular data structures can be implemented in</span></a>
<a class="sourceLine" id="cb132-367" title="367"><span class="co">#&gt; 314  two different ways: in a column based, or row based fashion. A column based structure consists of a</span></a>
<a class="sourceLine" id="cb132-368" title="368"><span class="co">#&gt; 315  named collection of equal-length, homogeneous arrays representing the table columns. In a row-based</span></a>
<a class="sourceLine" id="cb132-369" title="369"><span class="co">#&gt; 316   structure on the other hand, the table is implemented as a set of heterogeneous associative arrays</span></a>
<a class="sourceLine" id="cb132-370" title="370"><span class="co">#&gt; 317     representing table rows with field values for each particular record. Even though most languages</span></a>
<a class="sourceLine" id="cb132-371" title="371"><span class="co">#&gt; 318      provide flexible and abstracted interfaces that hide such implementation details from the user,</span></a>
<a class="sourceLine" id="cb132-372" title="372"><span class="co">#&gt; 319 they can have huge implications for performance. A column based structure is efficient for inserting</span></a>
<a class="sourceLine" id="cb132-373" title="373"><span class="co">#&gt; 320   or extracting certain columns of the data, but it is inefficient for manipulating individual rows.</span></a>
<a class="sourceLine" id="cb132-374" title="374"><span class="co">#&gt; 321     For example to insert a single row somewhere in the middle, each of the columns has to be sliced</span></a>
<a class="sourceLine" id="cb132-375" title="375"><span class="co">#&gt; 322      and stitched back together. For row-based implementations, it is the exact other way around: we</span></a>
<a class="sourceLine" id="cb132-376" title="376"><span class="co">#&gt; 323     can easily manipulate a particular record, but to insert/extract a whole column we would need to</span></a>
<a class="sourceLine" id="cb132-377" title="377"><span class="co">#&gt; 324     iterate over all records in the table and read/modify the appropriate field in each of them. The</span></a>
<a class="sourceLine" id="cb132-378" title="378"><span class="co">#&gt; 325   data frame in R is implemented in a column based fashion: it constitutes of a named list of equal-</span></a>
<a class="sourceLine" id="cb132-379" title="379"><span class="co">#&gt; 326   length vectors. Thereby the columns in the data frame naturally inherit the properties from atomic</span></a>
<a class="sourceLine" id="cb132-380" title="380"><span class="co">#&gt; 327     vectors discussed before, such as homogeneity, missing values, etc. Another argument for column-</span></a>
<a class="sourceLine" id="cb132-381" title="381"><span class="co">#&gt; 328      based implementation is that statistical methods generally operate on columns. For example, the</span></a>
<a class="sourceLine" id="cb132-382" title="382"><span class="co">#&gt; 329     lm function fits a linear regression by extracting the columns from a data frame as specified by</span></a>
<a class="sourceLine" id="cb132-383" title="383"><span class="co">#&gt; 330    the formula argument. R simply binds the specified columns together into a matrix X and calls out</span></a>
<a class="sourceLine" id="cb132-384" title="384"><span class="co">#&gt; 331      to a highly optimized FORTRAN subroutine to calculate the OLS estimates ß^ = (X T X)X T y using</span></a>
<a class="sourceLine" id="cb132-385" title="385"><span class="co">#&gt; 332   the QR factorization of X. Many other statistical modeling functions follow similar steps, and are</span></a>
<a class="sourceLine" id="cb132-386" title="386"><span class="co">#&gt; 333                                computationally efficient because of the column-based data storage 14</span></a>
<a class="sourceLine" id="cb132-387" title="387"><span class="co">#&gt; 334           in R. However, unfortunately R is an exception in its preference for column-based storage:</span></a>
<a class="sourceLine" id="cb132-388" title="388"><span class="co">#&gt; 335        most languages, systems, databases, APIs, etc, are optimized for record based operations. For</span></a>
<a class="sourceLine" id="cb132-389" title="389"><span class="co">#&gt; 336      this reason, the conventional way to store and communicate tabular data in JSON seems to almost</span></a>
<a class="sourceLine" id="cb132-390" title="390"><span class="co">#&gt; 337  exclusively row based. This discrepancy presents various complications when converting between data</span></a>
<a class="sourceLine" id="cb132-391" title="391"><span class="co">#&gt; 338      frames and JSON. The remaining of this section discusses details and challenges of consistently</span></a>
<a class="sourceLine" id="cb132-392" title="392"><span class="co">#&gt; 339   mapping record based JSON data as frequently encountered on the web, into column-based data frames</span></a>
<a class="sourceLine" id="cb132-393" title="393"><span class="co">#&gt; 340     which are convenient for statistical computing. 2.4.2 Row based data frame encoding The encoding</span></a>
<a class="sourceLine" id="cb132-394" title="394"><span class="co">#&gt; 341       of data frames is one of the major differences between jsonlite and implementations from other</span></a>
<a class="sourceLine" id="cb132-395" title="395"><span class="co">#&gt; 342        currently available packages. Instead of using the column-based encoding also used for lists,</span></a>
<a class="sourceLine" id="cb132-396" title="396"><span class="co">#&gt; 343          jsonlite maps data frames by default to an array of records: cat(toJSON(iris[1:2, ], pretty</span></a>
<a class="sourceLine" id="cb132-397" title="397"><span class="co">#&gt; 344        = TRUE)) [ { &quot;Sepal.Length&quot; : 5.1, &quot;Sepal.Width&quot; : 3.5, &quot;Petal.Length&quot; : 1.4, &quot;Petal.Width&quot; :</span></a>
<a class="sourceLine" id="cb132-398" title="398"><span class="co">#&gt; 345        0.2, &quot;Species&quot; : &quot;setosa&quot; }, { &quot;Sepal.Length&quot; : 4.9, &quot;Sepal.Width&quot; : 3, &quot;Petal.Length&quot; : 1.4,</span></a>
<a class="sourceLine" id="cb132-399" title="399"><span class="co">#&gt; 346    &quot;Petal.Width&quot; : 0.2, &quot;Species&quot; : &quot;setosa&quot; } ] This output looks a bit like a list of named lists.</span></a>
<a class="sourceLine" id="cb132-400" title="400"><span class="co">#&gt; 347      However, there is one major difference: the individual records contain JSON primitives, whereas</span></a>
<a class="sourceLine" id="cb132-401" title="401"><span class="co">#&gt; 348     lists always contain JSON objects or arrays: cat(toJSON(list(list(Species = &quot;Foo&quot;, Width = 21)),</span></a>
<a class="sourceLine" id="cb132-402" title="402"><span class="co">#&gt; 349                                       pretty = TRUE)) [ { &quot;Species&quot; : [ &quot;Foo&quot; ], &quot;Width&quot; : [ 21 ] 15</span></a>
<a class="sourceLine" id="cb132-403" title="403"><span class="co">#&gt; 350     } ] This leads to the following convention: when encoding R objects, JSON primitives only appear</span></a>
<a class="sourceLine" id="cb132-404" title="404"><span class="co">#&gt; 351     in vectors and data-frame rows. Primitive values within a JSON array indicate a vector, and JSON</span></a>
<a class="sourceLine" id="cb132-405" title="405"><span class="co">#&gt; 352  primitives appearing inside a JSON object indicate a data-frame row. A JSON encoded list, (named or</span></a>
<a class="sourceLine" id="cb132-406" title="406"><span class="co">#&gt; 353    unnamed) will never contain JSON primitives. This is a subtle but important convention that helps</span></a>
<a class="sourceLine" id="cb132-407" title="407"><span class="co">#&gt; 354     to distinguish between R classes from their JSON representation, without explicitly encoding any</span></a>
<a class="sourceLine" id="cb132-408" title="408"><span class="co">#&gt; 355    metadata. 2.4.3 Missing values in data frames The section on atomic vectors discussed two methods</span></a>
<a class="sourceLine" id="cb132-409" title="409"><span class="co">#&gt; 356    of encoding missing data appearing in a vector: either using strings or using the JSON null type.</span></a>
<a class="sourceLine" id="cb132-410" title="410"><span class="co">#&gt; 357 When a missing value appears in a data frame, there is a third option: simply not include this field</span></a>
<a class="sourceLine" id="cb132-411" title="411"><span class="co">#&gt; 358   in JSON record: x &lt;- data.frame(foo = c(FALSE, TRUE, NA, NA), bar = c(&quot;Aladdin&quot;, NA, NA, &quot;Mario&quot;))</span></a>
<a class="sourceLine" id="cb132-412" title="412"><span class="co">#&gt; 359      print(x) foo bar 1 FALSE Aladdin 2 TRUE &lt;NA&gt; 3 NA &lt;NA&gt; 4 NA Mario cat(toJSON(x, pretty = TRUE))</span></a>
<a class="sourceLine" id="cb132-413" title="413"><span class="co">#&gt; 360      [ { &quot;foo&quot; : false, &quot;bar&quot; : &quot;Aladdin&quot; }, { &quot;foo&quot; : true }, {}, { &quot;bar&quot; : &quot;Mario&quot; } ] The default</span></a>
<a class="sourceLine" id="cb132-414" title="414"><span class="co">#&gt; 361      behavior of jsonlite is to omit missing data from records in a data frame. This seems to be the</span></a>
<a class="sourceLine" id="cb132-415" title="415"><span class="co">#&gt; 362   most conventional method used on the web, and we expect this encoding will most likely lead to the</span></a>
<a class="sourceLine" id="cb132-416" title="416"><span class="co">#&gt; 363           correct interpretation of missingness, even in languages with no explicit notion of NA. 16</span></a>
<a class="sourceLine" id="cb132-417" title="417"><span class="co">#&gt; 364      2.4.4 Relational data: nested records Nested datasets are somewhat unusual in R, but frequently</span></a>
<a class="sourceLine" id="cb132-418" title="418"><span class="co">#&gt; 365         encountered in JSON. Such structures do not really fit the vector based paradigm which makes</span></a>
<a class="sourceLine" id="cb132-419" title="419"><span class="co">#&gt; 366     them harder to manipulate in R. However, nested structures are too common in JSON to ignore, and</span></a>
<a class="sourceLine" id="cb132-420" title="420"><span class="co">#&gt; 367       with a little work most cases still map to a data frame quite nicely. The most common scenario</span></a>
<a class="sourceLine" id="cb132-421" title="421"><span class="co">#&gt; 368        is a dataset in which a certain field within each record contains a subrecord with additional</span></a>
<a class="sourceLine" id="cb132-422" title="422"><span class="co">#&gt; 369        fields. The jsonlite implementation maps these subrecords to a nested data frame. Whereas the</span></a>
<a class="sourceLine" id="cb132-423" title="423"><span class="co">#&gt; 370       data frame class usually consists of vectors, technically a column can also be list or another</span></a>
<a class="sourceLine" id="cb132-424" title="424"><span class="co">#&gt; 371          data frame with matching dimension (this stretches the meaning of the word “column” a bit):</span></a>
<a class="sourceLine" id="cb132-425" title="425"><span class="co">#&gt; 372          options(stringsAsFactors=FALSE) x &lt;- data.frame(driver = c(&quot;Bowser&quot;, &quot;Peach&quot;), occupation =</span></a>
<a class="sourceLine" id="cb132-426" title="426"><span class="co">#&gt; 373         c(&quot;Koopa&quot;, &quot;Princess&quot;)) x$vehicle &lt;- data.frame(model = c(&quot;Piranha Prowler&quot;, &quot;Royal Racer&quot;))</span></a>
<a class="sourceLine" id="cb132-427" title="427"><span class="co">#&gt; 374       x$vehicle$stats &lt;- data.frame(speed = c(55, 34), weight = c(67, 24), drift = c(35, 32)) str(x)</span></a>
<a class="sourceLine" id="cb132-428" title="428"><span class="co">#&gt; 375       &#39;data.frame&#39;: 2 obs. of 3 variables: $ driver : chr &quot;Bowser&quot; &quot;Peach&quot; $ occupation: chr &quot;Koopa&quot;</span></a>
<a class="sourceLine" id="cb132-429" title="429"><span class="co">#&gt; 376   &quot;Princess&quot; $ vehicle :&#39;data.frame&#39;: 2 obs. of 2 variables: ..$ model: chr &quot;Piranha Prowler&quot; &quot;Royal</span></a>
<a class="sourceLine" id="cb132-430" title="430"><span class="co">#&gt; 377    Racer&quot; ..$ stats:&#39;data.frame&#39;: 2 obs. of 3 variables: .. ..$ speed : num 55 34 .. ..$ weight: num</span></a>
<a class="sourceLine" id="cb132-431" title="431"><span class="co">#&gt; 378   67 24 .. ..$ drift : num 35 32 cat(toJSON(x, pretty=TRUE)) [ { &quot;driver&quot; : &quot;Bowser&quot;, &quot;occupation&quot; :</span></a>
<a class="sourceLine" id="cb132-432" title="432"><span class="co">#&gt; 379         &quot;Koopa&quot;, &quot;vehicle&quot; : { &quot;model&quot; : &quot;Piranha Prowler&quot;, &quot;stats&quot; : { &quot;speed&quot; : 55, &quot;weight&quot; : 67,</span></a>
<a class="sourceLine" id="cb132-433" title="433"><span class="co">#&gt; 380                &quot;drift&quot; : 35 } } }, { &quot;driver&quot; : &quot;Peach&quot;, &quot;occupation&quot; : &quot;Princess&quot;, &quot;vehicle&quot; : { 17</span></a>
<a class="sourceLine" id="cb132-434" title="434"><span class="co">#&gt; 381     &quot;model&quot; : &quot;Royal Racer&quot;, &quot;stats&quot; : { &quot;speed&quot; : 34, &quot;weight&quot; : 24, &quot;drift&quot; : 32 } } } ] myjson &lt;-</span></a>
<a class="sourceLine" id="cb132-435" title="435"><span class="co">#&gt; 382       toJSON(x) y &lt;- fromJSON(myjson) identical(x,y) [1] TRUE When encountering JSON data containing</span></a>
<a class="sourceLine" id="cb132-436" title="436"><span class="co">#&gt; 383      nested records on the web, chances are that these data were generated from relational database.</span></a>
<a class="sourceLine" id="cb132-437" title="437"><span class="co">#&gt; 384   The JSON field containing a subrecord represents a foreign key pointing to a record in an external</span></a>
<a class="sourceLine" id="cb132-438" title="438"><span class="co">#&gt; 385   table. For the purpose of encoding these into a single JSON structure, the tables were joined into</span></a>
<a class="sourceLine" id="cb132-439" title="439"><span class="co">#&gt; 386    a nested structure. The directly nested subrecord represents a one-to-one or many-to-one relation</span></a>
<a class="sourceLine" id="cb132-440" title="440"><span class="co">#&gt; 387     between the parent and child table, and is most naturally stored in R using a nested data frame.</span></a>
<a class="sourceLine" id="cb132-441" title="441"><span class="co">#&gt; 388      In the example above, the vehicle field points to a table of vehicles, which in turn contains a</span></a>
<a class="sourceLine" id="cb132-442" title="442"><span class="co">#&gt; 389  stats field pointing to a table of stats. When there is no more than one subrecord for each record,</span></a>
<a class="sourceLine" id="cb132-443" title="443"><span class="co">#&gt; 390        we easily flatten the structure into a single non-nested data frame. z &lt;- cbind(x[c(&quot;driver&quot;,</span></a>
<a class="sourceLine" id="cb132-444" title="444"><span class="co">#&gt; 391   &quot;occupation&quot;)], x$vehicle[&quot;model&quot;], x$vehicle$stats) str(z) &#39;data.frame&#39;: 2 obs. of 6 variables: $</span></a>
<a class="sourceLine" id="cb132-445" title="445"><span class="co">#&gt; 392   driver : chr &quot;Bowser&quot; &quot;Peach&quot; $ occupation: chr &quot;Koopa&quot; &quot;Princess&quot; $ model : chr &quot;Piranha Prowler&quot;</span></a>
<a class="sourceLine" id="cb132-446" title="446"><span class="co">#&gt; 393    &quot;Royal Racer&quot; $ speed : num 55 34 $ weight : num 67 24 $ drift : num 35 32 2.4.5 Relational data:</span></a>
<a class="sourceLine" id="cb132-447" title="447"><span class="co">#&gt; 394 nested tables The one-to-one relation discussed above is relatively easy to store in R, because each</span></a>
<a class="sourceLine" id="cb132-448" title="448"><span class="co">#&gt; 395   record contains at most one subrecord. Therefore we can use either a nested data frame, or flatten</span></a>
<a class="sourceLine" id="cb132-449" title="449"><span class="co">#&gt; 396   the data frame. However, things get more difficult when JSON records contain a field with a nested</span></a>
<a class="sourceLine" id="cb132-450" title="450"><span class="co">#&gt; 397     array. Such a structure appears in relational data in case of a one-to-many relation. A standard</span></a>
<a class="sourceLine" id="cb132-451" title="451"><span class="co">#&gt; 398   textbook illustration is the relation between authors and titles. For example, a field can contain</span></a>
<a class="sourceLine" id="cb132-452" title="452"><span class="co">#&gt; 399                                                                               an array of values: 18</span></a>
<a class="sourceLine" id="cb132-453" title="453"><span class="co">#&gt; 400      x &lt;- data.frame(author = c(&quot;Homer&quot;, &quot;Virgil&quot;, &quot;Jeroen&quot;)) x$poems &lt;- list(c(&quot;Iliad&quot;, &quot;Odyssey&quot;),</span></a>
<a class="sourceLine" id="cb132-454" title="454"><span class="co">#&gt; 401          c(&quot;Eclogues&quot;, &quot;Georgics&quot;, &quot;Aeneid&quot;), vector()); names(x) [1] &quot;author&quot; &quot;poems&quot; cat(toJSON(x,</span></a>
<a class="sourceLine" id="cb132-455" title="455"><span class="co">#&gt; 402   pretty = TRUE)) [ { &quot;author&quot; : &quot;Homer&quot;, &quot;poems&quot; : [ &quot;Iliad&quot;, &quot;Odyssey&quot; ] }, { &quot;author&quot; : &quot;Virgil&quot;,</span></a>
<a class="sourceLine" id="cb132-456" title="456"><span class="co">#&gt; 403         &quot;poems&quot; : [ &quot;Eclogues&quot;, &quot;Georgics&quot;, &quot;Aeneid&quot; ] }, { &quot;author&quot; : &quot;Jeroen&quot;, &quot;poems&quot; : [] } ] As</span></a>
<a class="sourceLine" id="cb132-457" title="457"><span class="co">#&gt; 404     can be seen from the example, the way to store this in a data frame is using a list of character</span></a>
<a class="sourceLine" id="cb132-458" title="458"><span class="co">#&gt; 405  vectors. This works, and although unconventional, we can still create and read such structures in R</span></a>
<a class="sourceLine" id="cb132-459" title="459"><span class="co">#&gt; 406   relatively easily. However, in practice the one-to-many relation is often more complex. It results</span></a>
<a class="sourceLine" id="cb132-460" title="460"><span class="co">#&gt; 407    in fields containing a set of records. In R, the only way to model this is as a column containing</span></a>
<a class="sourceLine" id="cb132-461" title="461"><span class="co">#&gt; 408     a list of data frames, one separate data frame for each row: x &lt;- data.frame(author = c(&quot;Homer&quot;,</span></a>
<a class="sourceLine" id="cb132-462" title="462"><span class="co">#&gt; 409  &quot;Virgil&quot;, &quot;Jeroen&quot;)) x$poems &lt;- list( data.frame(title=c(&quot;Iliad&quot;, &quot;Odyssey&quot;), year=c(-1194, -800)),</span></a>
<a class="sourceLine" id="cb132-463" title="463"><span class="co">#&gt; 410         data.frame(title=c(&quot;Eclogues&quot;, &quot;Georgics&quot;, &quot;Aeneid&quot;), year=c(-44, -29, -19)), data.frame() )</span></a>
<a class="sourceLine" id="cb132-464" title="464"><span class="co">#&gt; 411                                                                   cat(toJSON(x, pretty=TRUE)) [ { 19</span></a>
<a class="sourceLine" id="cb132-465" title="465"><span class="co">#&gt; 412        &quot;author&quot; : &quot;Homer&quot;, &quot;poems&quot; : [ { &quot;title&quot; : &quot;Iliad&quot;, &quot;year&quot; : -1194 }, { &quot;title&quot; : &quot;Odyssey&quot;,</span></a>
<a class="sourceLine" id="cb132-466" title="466"><span class="co">#&gt; 413      &quot;year&quot; : -800 } ] }, { &quot;author&quot; : &quot;Virgil&quot;, &quot;poems&quot; : [ { &quot;title&quot; : &quot;Eclogues&quot;, &quot;year&quot; : -44 },</span></a>
<a class="sourceLine" id="cb132-467" title="467"><span class="co">#&gt; 414       { &quot;title&quot; : &quot;Georgics&quot;, &quot;year&quot; : -29 }, { &quot;title&quot; : &quot;Aeneid&quot;, &quot;year&quot; : -19 } ] }, { &quot;author&quot; :</span></a>
<a class="sourceLine" id="cb132-468" title="468"><span class="co">#&gt; 415    &quot;Jeroen&quot;, &quot;poems&quot; : [] } ] Because R doesn’t have native support for relational data, there is no</span></a>
<a class="sourceLine" id="cb132-469" title="469"><span class="co">#&gt; 416     natural class to store such structures. The best we can do is a column containing a list of sub-</span></a>
<a class="sourceLine" id="cb132-470" title="470"><span class="co">#&gt; 417   dataframes. This does the job, and allows the R user to access or generate nested JSON structures.</span></a>
<a class="sourceLine" id="cb132-471" title="471"><span class="co">#&gt; 418      However, a data frame like this cannot be flattened, and the class does not guarantee that each</span></a>
<a class="sourceLine" id="cb132-472" title="472"><span class="co">#&gt; 419      of the individual nested data frames contain the same fields, as would be the case in an actual</span></a>
<a class="sourceLine" id="cb132-473" title="473"><span class="co">#&gt; 420                                                                             relational data base. 20</span></a>
<a class="sourceLine" id="cb132-474" title="474"><span class="co">#&gt; 421         3 Structural consistency and type safety in dynamic data Systems that automatically exchange</span></a>
<a class="sourceLine" id="cb132-475" title="475"><span class="co">#&gt; 422        information over some interface, protocol or API require well defined and unambiguous meaning</span></a>
<a class="sourceLine" id="cb132-476" title="476"><span class="co">#&gt; 423      and arrangement of data. In order to process and interpret input and output, contents must obey</span></a>
<a class="sourceLine" id="cb132-477" title="477"><span class="co">#&gt; 424    a steady structure. Such structures are usually described either informally in documenta- tion or</span></a>
<a class="sourceLine" id="cb132-478" title="478"><span class="co">#&gt; 425    more formally in a schema language. The previous section emphasized the importance of consistency</span></a>
<a class="sourceLine" id="cb132-479" title="479"><span class="co">#&gt; 426  in the mapping between JSON data and R classes. This section takes a higher level view and explains</span></a>
<a class="sourceLine" id="cb132-480" title="480"><span class="co">#&gt; 427     the importance of structure consistency for dynamic data. This topic can be a bit subtle because</span></a>
<a class="sourceLine" id="cb132-481" title="481"><span class="co">#&gt; 428    it refers to consistency among different instantiations of a JSON structure, rather than a single</span></a>
<a class="sourceLine" id="cb132-482" title="482"><span class="co">#&gt; 429        case. We try to clarify by breaking down the concept into two important parts, and illustrate</span></a>
<a class="sourceLine" id="cb132-483" title="483"><span class="co">#&gt; 430   with analogies and examples from R. 3.1 Classes, types and data Most object-oriented languages are</span></a>
<a class="sourceLine" id="cb132-484" title="484"><span class="co">#&gt; 431    designed with the idea that all objects of a certain class implement the same fields and methods.</span></a>
<a class="sourceLine" id="cb132-485" title="485"><span class="co">#&gt; 432 In strong-typed languages such as S4 or Java, names and types of the fields are formally declared in</span></a>
<a class="sourceLine" id="cb132-486" title="486"><span class="co">#&gt; 433  a class definition. In other languages such as S3 or JavaScript, the fields are not enforced by the</span></a>
<a class="sourceLine" id="cb132-487" title="487"><span class="co">#&gt; 434  language but rather at the discretion of the programmer. However one way or another they all assume</span></a>
<a class="sourceLine" id="cb132-488" title="488"><span class="co">#&gt; 435      that members of a certain class agree on field names and types, so that the same methods can be</span></a>
<a class="sourceLine" id="cb132-489" title="489"><span class="co">#&gt; 436 applied to any object of a particular class. This basic principle holds for dynamic data exactly the</span></a>
<a class="sourceLine" id="cb132-490" title="490"><span class="co">#&gt; 437    same way as for objects. Software that process dynamic data can only work reliably if the various</span></a>
<a class="sourceLine" id="cb132-491" title="491"><span class="co">#&gt; 438 elements of the data have consistent names and structure. Consensus must exist between the different</span></a>
<a class="sourceLine" id="cb132-492" title="492"><span class="co">#&gt; 439   parties on data that is exchanged as part an interface or protocol. This requires the structure to</span></a>
<a class="sourceLine" id="cb132-493" title="493"><span class="co">#&gt; 440  follow some sort of template that specifies which attributes can appear in the data, what they mean</span></a>
<a class="sourceLine" id="cb132-494" title="494"><span class="co">#&gt; 441    and how they are composed. Thereby each possible scenario can be accounted for in the software so</span></a>
<a class="sourceLine" id="cb132-495" title="495"><span class="co">#&gt; 442     that data gets interpreted/processed appropriately and no exceptions arise during run-time. Some</span></a>
<a class="sourceLine" id="cb132-496" title="496"><span class="co">#&gt; 443      data interchange formats such as XML or Protocol Buffers take a formal approach to this matter,</span></a>
<a class="sourceLine" id="cb132-497" title="497"><span class="co">#&gt; 444    and have well established schema languages and interface description languages. Using such a meta</span></a>
<a class="sourceLine" id="cb132-498" title="498"><span class="co">#&gt; 445    language it is possible to define the exact structure, properties and actions of data interchange</span></a>
<a class="sourceLine" id="cb132-499" title="499"><span class="co">#&gt; 446   in a formal arrange- ment. However, in JSON, such formal definitions are relatively uncommon. Some</span></a>
<a class="sourceLine" id="cb132-500" title="500"><span class="co">#&gt; 447     initiatives for JSON schema languages exist (Galiegue and Zyp, 2013), but they are not very well</span></a>
<a class="sourceLine" id="cb132-501" title="501"><span class="co">#&gt; 448 established and rarely seen in practice. One reason for this might be that defining and implementing</span></a>
<a class="sourceLine" id="cb132-502" title="502"><span class="co">#&gt; 449    formal schemas is complicated and a lot of work which defeats the purpose of using an lightweight</span></a>
<a class="sourceLine" id="cb132-503" title="503"><span class="co">#&gt; 450  format such as JSON in the first place. But another reason is that it is often simply not necessary</span></a>
<a class="sourceLine" id="cb132-504" title="504"><span class="co">#&gt; 451  to be overly formal. The JSON format is simple and intuitive, and under some general conventions, a</span></a>
<a class="sourceLine" id="cb132-505" title="505"><span class="co">#&gt; 452  well chosen example can suffice to characterize the structure. This section describes two important</span></a>
<a class="sourceLine" id="cb132-506" title="506"><span class="co">#&gt; 453      rules that are required to ensure that data exchange using JSON is type safe. 3.2 Rule 1: Fixed</span></a>
<a class="sourceLine" id="cb132-507" title="507"><span class="co">#&gt; 454  keys When using JSON without a schema, there are no restrictions on the keys (field names) that can</span></a>
<a class="sourceLine" id="cb132-508" title="508"><span class="co">#&gt; 455    appear in a particular object. However, an API that returns a different set of keys every time it</span></a>
<a class="sourceLine" id="cb132-509" title="509"><span class="co">#&gt; 456  is called makes it very difficult to write software to process these data. Hence, the first rule is</span></a>
<a class="sourceLine" id="cb132-510" title="510"><span class="co">#&gt; 457   to limit JSON interfaces to a finite set of keys that are known a priory by all parties. It can be</span></a>
<a class="sourceLine" id="cb132-511" title="511"><span class="co">#&gt; 458                                                   helpful to think about this in analogy with for 21</span></a>
<a class="sourceLine" id="cb132-512" title="512"><span class="co">#&gt; 459     example a relational database. Here, the database model separates the data from metadata. At run</span></a>
<a class="sourceLine" id="cb132-513" title="513"><span class="co">#&gt; 460  time, records can be inserted or deleted, and a certain query might return different data each time</span></a>
<a class="sourceLine" id="cb132-514" title="514"><span class="co">#&gt; 461      it is executed. But for a given query, each execution will return exactly the same field names;</span></a>
<a class="sourceLine" id="cb132-515" title="515"><span class="co">#&gt; 462 hence as long as the table definitions are unchanged, the structure of the output consistent. Client</span></a>
<a class="sourceLine" id="cb132-516" title="516"><span class="co">#&gt; 463      software needs this structure to validate input, optimize implementation, and process each part</span></a>
<a class="sourceLine" id="cb132-517" title="517"><span class="co">#&gt; 464   of the data appropriately. In JSON, data and metadata are not formally separated as in a database,</span></a>
<a class="sourceLine" id="cb132-518" title="518"><span class="co">#&gt; 465       but similar principles that hold for fields in a database, apply to keys in dynamic JSON data.</span></a>
<a class="sourceLine" id="cb132-519" title="519"><span class="co">#&gt; 466     A beautiful example of this in practice was given by Mike Dewar at the New York Open Statistical</span></a>
<a class="sourceLine" id="cb132-520" title="520"><span class="co">#&gt; 467      Program- ming Meetup on Jan. 12, 2012 (Dewar, 2012). In his talk he emphasizes to use JSON keys</span></a>
<a class="sourceLine" id="cb132-521" title="521"><span class="co">#&gt; 468     only for names, and not for data. He refers to this principle as the “golden rule”, and explains</span></a>
<a class="sourceLine" id="cb132-522" title="522"><span class="co">#&gt; 469        how he learned his lesson the hard way. In one of his early applications, timeseries data was</span></a>
<a class="sourceLine" id="cb132-523" title="523"><span class="co">#&gt; 470     encoded by using the epoch timestamp as the JSON key. Therefore the keys are different each time</span></a>
<a class="sourceLine" id="cb132-524" title="524"><span class="co">#&gt; 471   the query is executed: [ { &quot;1325344443&quot; : 124 }, { &quot;1325344456&quot; : 131 }, { &quot;1325344478&quot; : 137 }, ]</span></a>
<a class="sourceLine" id="cb132-525" title="525"><span class="co">#&gt; 472  Even though being valid JSON, dynamic keys as in the example above are likely to introduce trouble.</span></a>
<a class="sourceLine" id="cb132-526" title="526"><span class="co">#&gt; 473   Most software will have great difficulty processing these values if we can not specify the keys in</span></a>
<a class="sourceLine" id="cb132-527" title="527"><span class="co">#&gt; 474  the code. Moreover when documenting the API, either informally or formally using a schema language,</span></a>
<a class="sourceLine" id="cb132-528" title="528"><span class="co">#&gt; 475   we need to describe for each property in the data what the value means and is composed of. Thereby</span></a>
<a class="sourceLine" id="cb132-529" title="529"><span class="co">#&gt; 476      a client or consumer can implement code that interprets and process each element in the data in</span></a>
<a class="sourceLine" id="cb132-530" title="530"><span class="co">#&gt; 477     an appropriate manner. Both the documentation and interpretation of JSON data rely on fixed keys</span></a>
<a class="sourceLine" id="cb132-531" title="531"><span class="co">#&gt; 478     with well defined meaning. Also note that the structure is difficult to extend in the future. If</span></a>
<a class="sourceLine" id="cb132-532" title="532"><span class="co">#&gt; 479     we want to add an additional property to each observation, the entire structure needs to change.</span></a>
<a class="sourceLine" id="cb132-533" title="533"><span class="co">#&gt; 480     In his talk, Dewar explains that life gets much easier when we switch to the following encoding:</span></a>
<a class="sourceLine" id="cb132-534" title="534"><span class="co">#&gt; 481        [ { &quot;time&quot;: &quot;1325344443&quot; : &quot;price&quot;: 124 }, { &quot;time&quot;: &quot;1325344456&quot; : &quot;price&quot;: 131 }, { &quot;time&quot;:</span></a>
<a class="sourceLine" id="cb132-535" title="535"><span class="co">#&gt; 482      &quot;1325344478&quot; : &quot;price&quot;: 137 } ] This structure will play much nicer with existing software that</span></a>
<a class="sourceLine" id="cb132-536" title="536"><span class="co">#&gt; 483    assumes fixed keys. Moreover, the structure can easily be described in documentation, or captured</span></a>
<a class="sourceLine" id="cb132-537" title="537"><span class="co">#&gt; 484       in a schema. Even when we have no intention of writing documentation or a schema for a dynamic</span></a>
<a class="sourceLine" id="cb132-538" title="538"><span class="co">#&gt; 485   JSON source, it is still wise to design the structure in such away that it could be described by a</span></a>
<a class="sourceLine" id="cb132-539" title="539"><span class="co">#&gt; 486  schema. When the keys are fixed, a well chosen example can provide all the information required for</span></a>
<a class="sourceLine" id="cb132-540" title="540"><span class="co">#&gt; 487    the consumer to implement client code. Also note that the new structure is extensible: additional</span></a>
<a class="sourceLine" id="cb132-541" title="541"><span class="co">#&gt; 488  properties can be added to each observation without breaking backward compatibility. In the context</span></a>
<a class="sourceLine" id="cb132-542" title="542"><span class="co">#&gt; 489    of R, consistency of keys is closely related to Wikcham’s concept of tidy data discussed earlier.</span></a>
<a class="sourceLine" id="cb132-543" title="543"><span class="co">#&gt; 490       Wickham states that the most common reason for messy data are column headers containing values</span></a>
<a class="sourceLine" id="cb132-544" title="544"><span class="co">#&gt; 491    instead of variable names. Column headers in tabular datasets become keys when converted to JSON.</span></a>
<a class="sourceLine" id="cb132-545" title="545"><span class="co">#&gt; 492                                                                                        Therefore, 22</span></a>
<a class="sourceLine" id="cb132-546" title="546"><span class="co">#&gt; 493       when headers are actually values, JSON keys contain in fact data and can become unpredictable.</span></a>
<a class="sourceLine" id="cb132-547" title="547"><span class="co">#&gt; 494   The cure to inconsistent keys is almost always to tidy the data according to recommendations given</span></a>
<a class="sourceLine" id="cb132-548" title="548"><span class="co">#&gt; 495     by Wickham (2014). 3.3 Rule 2: Consistent types In a strong typed language, fields declare their</span></a>
<a class="sourceLine" id="cb132-549" title="549"><span class="co">#&gt; 496  class before any values are assigned. Thereby the type of a given field is identical in all objects</span></a>
<a class="sourceLine" id="cb132-550" title="550"><span class="co">#&gt; 497       of a particular class, and arrays only contain objects of a single type. The S3 system in R is</span></a>
<a class="sourceLine" id="cb132-551" title="551"><span class="co">#&gt; 498   weakly typed and puts no formal restrictions on the class of a certain properties, or the types of</span></a>
<a class="sourceLine" id="cb132-552" title="552"><span class="co">#&gt; 499     objects that can be combined into a collection. For example, the list below contains a character</span></a>
<a class="sourceLine" id="cb132-553" title="553"><span class="co">#&gt; 500   vector, a numeric vector and a list: # Heterogeneous lists are bad! x &lt;- list(&quot;FOO&quot;, 1:3, list(bar</span></a>
<a class="sourceLine" id="cb132-554" title="554"><span class="co">#&gt; 501     = pi)) cat(toJSON(x)) [ [ &quot;FOO&quot; ], [ 1, 2, 3 ], { &quot;bar&quot; : [ 3.14 ] } ] However even though it is</span></a>
<a class="sourceLine" id="cb132-555" title="555"><span class="co">#&gt; 502      possible to generate such JSON, it is bad practice. Fields or collections with ambiguous object</span></a>
<a class="sourceLine" id="cb132-556" title="556"><span class="co">#&gt; 503         types are difficult to describe, interpret and process in the context of inter-system commu-</span></a>
<a class="sourceLine" id="cb132-557" title="557"><span class="co">#&gt; 504  nication. When using JSON to exchange dynamic data, it is important that each property and array is</span></a>
<a class="sourceLine" id="cb132-558" title="558"><span class="co">#&gt; 505   type consistent. In dynamically typed languages, the programmer needs to make sure that properties</span></a>
<a class="sourceLine" id="cb132-559" title="559"><span class="co">#&gt; 506      are of the correct type before encoding into JSON. It also means that unnamed lists in R should</span></a>
<a class="sourceLine" id="cb132-560" title="560"><span class="co">#&gt; 507   generally be avoided when designing interoperable structures because this type is not homogeneous.</span></a>
<a class="sourceLine" id="cb132-561" title="561"><span class="co">#&gt; 508    Note that consistency is somewhat subjective as it refers to the meaning of the elements; they do</span></a>
<a class="sourceLine" id="cb132-562" title="562"><span class="co">#&gt; 509     not necessarily have precisely the same structure. What is important is to keep in mind that the</span></a>
<a class="sourceLine" id="cb132-563" title="563"><span class="co">#&gt; 510       consumer of the data can interpret and process each element identically, e.g. iterate over the</span></a>
<a class="sourceLine" id="cb132-564" title="564"><span class="co">#&gt; 511       elements in the collection and apply the same method to each of them. To illustrate this, lets</span></a>
<a class="sourceLine" id="cb132-565" title="565"><span class="co">#&gt; 512  take the example of the data frame: # conceptually homogenous array x &lt;- data.frame(name = c(&quot;Jay&quot;,</span></a>
<a class="sourceLine" id="cb132-566" title="566"><span class="co">#&gt; 513     &quot;Mary&quot;, NA, NA), gender = c(&quot;M&quot;, NA, NA, &quot;F&quot;)) cat(toJSON(x, pretty = TRUE)) [ { &quot;name&quot; : &quot;Jay&quot;,</span></a>
<a class="sourceLine" id="cb132-567" title="567"><span class="co">#&gt; 514                                   &quot;gender&quot; : &quot;M&quot; }, { &quot;name&quot; : &quot;Mary&quot; }, {}, { &quot;gender&quot; : &quot;F&quot; } ] 23</span></a>
<a class="sourceLine" id="cb132-568" title="568"><span class="co">#&gt; 515     The JSON array above has 4 elements, each of which a JSON object. However, due to the NA values,</span></a>
<a class="sourceLine" id="cb132-569" title="569"><span class="co">#&gt; 516 not all elements have an identical structure: some records have more fields than others. But as long</span></a>
<a class="sourceLine" id="cb132-570" title="570"><span class="co">#&gt; 517   as they are conceptually the same type (e.g. a person), the consumer can iterate over the elements</span></a>
<a class="sourceLine" id="cb132-571" title="571"><span class="co">#&gt; 518   to process each person in the set according to a predefined action. For example each element could</span></a>
<a class="sourceLine" id="cb132-572" title="572"><span class="co">#&gt; 519   be used to construct a Person object. A collection of different object classes should be separated</span></a>
<a class="sourceLine" id="cb132-573" title="573"><span class="co">#&gt; 520    and organized using a named list: x &lt;- list( humans = data.frame(name = c(&quot;Jay&quot;, &quot;Mary&quot;), married</span></a>
<a class="sourceLine" id="cb132-574" title="574"><span class="co">#&gt; 521         = c(TRUE, FALSE)), horses = data.frame(name = c(&quot;Star&quot;, &quot;Dakota&quot;), price = c(5000, 30000)) )</span></a>
<a class="sourceLine" id="cb132-575" title="575"><span class="co">#&gt; 522          cat(toJSON(x, pretty=TRUE)) { &quot;humans&quot; : [ { &quot;name&quot; : &quot;Jay&quot;, &quot;married&quot; : true }, { &quot;name&quot; :</span></a>
<a class="sourceLine" id="cb132-576" title="576"><span class="co">#&gt; 523          &quot;Mary&quot;, &quot;married&quot; : false } ], &quot;horses&quot; : [ { &quot;name&quot; : &quot;Star&quot;, &quot;price&quot; : 5000 }, { &quot;name&quot; :</span></a>
<a class="sourceLine" id="cb132-577" title="577"><span class="co">#&gt; 524    &quot;Dakota&quot;, &quot;price&quot; : 30000 } ] } This might seem obvious, but dynamic languages such as R can make</span></a>
<a class="sourceLine" id="cb132-578" title="578"><span class="co">#&gt; 525   it dangerously tempting to create data containing mixed-type properties or collections. We already</span></a>
<a class="sourceLine" id="cb132-579" title="579"><span class="co">#&gt; 526  mentioned the example of other JSON packages which encode an atomic vector either as JSON primitive</span></a>
<a class="sourceLine" id="cb132-580" title="580"><span class="co">#&gt; 527    or JSON array, depending on its length. Such inconsistent typing is very difficult for clients to</span></a>
<a class="sourceLine" id="cb132-581" title="581"><span class="co">#&gt; 528   predict and a likely source of nasty bugs. Using consistent field names/types and homogeneous JSON</span></a>
<a class="sourceLine" id="cb132-582" title="582"><span class="co">#&gt; 529      arrays is a strong convention among public JSON APIs, for good reasons. We recommend R users to</span></a>
<a class="sourceLine" id="cb132-583" title="583"><span class="co">#&gt; 530                                         respect these conventions when generating JSON data in R. 24</span></a>
<a class="sourceLine" id="cb132-584" title="584"><span class="co">#&gt; 531      Appendices A Public JSON APIs This section lists some examples of public HTTP APIs that publish</span></a>
<a class="sourceLine" id="cb132-585" title="585"><span class="co">#&gt; 532   data in JSON format. These are great to get a sense of the complex structures that are encountered</span></a>
<a class="sourceLine" id="cb132-586" title="586"><span class="co">#&gt; 533        in real world JSON data. All services are free, but some require registration/authentication.</span></a>
<a class="sourceLine" id="cb132-587" title="587"><span class="co">#&gt; 534      Each example returns lots of data, therefore output is ommitted in this document. The reader is</span></a>
<a class="sourceLine" id="cb132-588" title="588"><span class="co">#&gt; 535  encouraged to run the examples in R and inspect the output manually. A.1 No authentication required</span></a>
<a class="sourceLine" id="cb132-589" title="589"><span class="co">#&gt; 536     The following APIs allow for (limited) use without any form of registration: Github Github is an</span></a>
<a class="sourceLine" id="cb132-590" title="590"><span class="co">#&gt; 537     online code repository and has APIs to get live data on almost all activity. Below some examples</span></a>
<a class="sourceLine" id="cb132-591" title="591"><span class="co">#&gt; 538       from a well known R package and author: hadley_orgs &lt;- fromJSON(&quot;https://api.github.com/users/</span></a>
<a class="sourceLine" id="cb132-592" title="592"><span class="co">#&gt; 539     hadley/orgs&quot;) hadley_repos &lt;- fromJSON(&quot;https://api.github.com/users/hadley/repos&quot;) gg_issues &lt;-</span></a>
<a class="sourceLine" id="cb132-593" title="593"><span class="co">#&gt; 540      fromJSON(&quot;https://api.github.com/repos/hadley/ggplot2/issues&quot;) gg_commits &lt;- fromJSON(&quot;https://</span></a>
<a class="sourceLine" id="cb132-594" title="594"><span class="co">#&gt; 541  api.github.com/repos/hadley/ggplot2/commits&quot;) CitiBike NYC A single public API that shows location,</span></a>
<a class="sourceLine" id="cb132-595" title="595"><span class="co">#&gt; 542        status and current availability for all stations in the New York City bike sharing initative.</span></a>
<a class="sourceLine" id="cb132-596" title="596"><span class="co">#&gt; 543    citibike &lt;- fromJSON(&quot;http://citibikenyc.com/stations/json&quot;) AngelList AngelList is a job listing</span></a>
<a class="sourceLine" id="cb132-597" title="597"><span class="co">#&gt; 544    directory for startups: res &lt;- fromJSON(&quot;http://api.angel.co/1/tags/59/startups&quot;) res$startups 25</span></a>
<a class="sourceLine" id="cb132-598" title="598"><span class="co">#&gt; 545    Ergast The Ergast Developer API is an experimental web service which provides a historical record</span></a>
<a class="sourceLine" id="cb132-599" title="599"><span class="co">#&gt; 546          of motor racing data for non-commercial purposes. races &lt;- fromJSON(&quot;http://ergast.com/api/</span></a>
<a class="sourceLine" id="cb132-600" title="600"><span class="co">#&gt; 547      f1/2012/1/results.json&quot;) races$RaceTable$Races$MRData$Results[[1]]$Driver A.2 Free registration</span></a>
<a class="sourceLine" id="cb132-601" title="601"><span class="co">#&gt; 548   required The following APIs require (free) registration of a key/token. In each case, registration</span></a>
<a class="sourceLine" id="cb132-602" title="602"><span class="co">#&gt; 549    is easy and a key will be emailed. This key has to be appended to the requests to query the APIs.</span></a>
<a class="sourceLine" id="cb132-603" title="603"><span class="co">#&gt; 550     The code below includes some example keys for illustration purposes. New York Times The New York</span></a>
<a class="sourceLine" id="cb132-604" title="604"><span class="co">#&gt; 551      Times has several free APIs that are part of the NYT developer network. These interface to data</span></a>
<a class="sourceLine" id="cb132-605" title="605"><span class="co">#&gt; 552     from various departments, such as news articles, book reviews, real estate, etc. # Register keys</span></a>
<a class="sourceLine" id="cb132-606" title="606"><span class="co">#&gt; 553       at http://developer.nytimes.com/docs/reference/keys # search for articles article_key = &quot;&amp;api-</span></a>
<a class="sourceLine" id="cb132-607" title="607"><span class="co">#&gt; 554           key=c2fede7bd9aea57c898f538e5ec0a1ee:6:68700045&quot; url = &quot;http://api.nytimes.com/svc/search/</span></a>
<a class="sourceLine" id="cb132-608" title="608"><span class="co">#&gt; 555        v2/articlesearch.json?q=obamacare+socialism&quot; articles &lt;- fromJSON(paste0(url, article_key)) #</span></a>
<a class="sourceLine" id="cb132-609" title="609"><span class="co">#&gt; 556      search for best sellers bestseller_key = &quot;&amp;api-key=5e260a86a6301f55546c83a47d139b0d:3:68700045&quot;</span></a>
<a class="sourceLine" id="cb132-610" title="610"><span class="co">#&gt; 557            url = &quot;http://api.nytimes.com/svc/books/v2/lists/overview.json?published_date=2013-01-01&quot;</span></a>
<a class="sourceLine" id="cb132-611" title="611"><span class="co">#&gt; 558              bestsellers &lt;- fromJSON(paste0(url, bestseller_key)) # movie reviews movie_key = &quot;&amp;api-</span></a>
<a class="sourceLine" id="cb132-612" title="612"><span class="co">#&gt; 559        key=5a3daaeee6bbc6b9df16284bc575e5ba:0:68700045&quot; url = &quot;http://api.nytimes.com/svc/movies/v2/</span></a>
<a class="sourceLine" id="cb132-613" title="613"><span class="co">#&gt; 560         reviews/dvd-picks.json?order=by-date&quot; reviews &lt;- fromJSON(paste0(url, movie_key)) CrunchBase</span></a>
<a class="sourceLine" id="cb132-614" title="614"><span class="co">#&gt; 561 CrunchBase is the free database of technology companies, people, and investors that anyone can edit.</span></a>
<a class="sourceLine" id="cb132-615" title="615"><span class="co">#&gt; 562   key &lt;- &quot;f6dv6cas5vw7arn5b9d7mdm3&quot; res &lt;- fromJSON(paste0(&quot;http://api.crunchbase.com/v/1/search.js?</span></a>
<a class="sourceLine" id="cb132-616" title="616"><span class="co">#&gt; 563                                                         query=R&amp;api_key=&quot;, key)) str(res$results) 26</span></a>
<a class="sourceLine" id="cb132-617" title="617"><span class="co">#&gt; 564            Sunlight Foundation The Sunlight Foundation is a non-profit that helps to make government</span></a>
<a class="sourceLine" id="cb132-618" title="618"><span class="co">#&gt; 565     transparent and accountable through data, tools, policy and journalism. #register key at http://</span></a>
<a class="sourceLine" id="cb132-619" title="619"><span class="co">#&gt; 566      sunlightfoundation.com/api/accounts/register/ key &lt;- &quot;&amp;apikey=39c83d5a4acc42be993ee637e2e4ba3d&quot;</span></a>
<a class="sourceLine" id="cb132-620" title="620"><span class="co">#&gt; 567         #some queries drones &lt;- fromJSON(paste0(&quot;http://openstates.org/api/v1/bills/?q=drone&quot;, key))</span></a>
<a class="sourceLine" id="cb132-621" title="621"><span class="co">#&gt; 568           word &lt;- fromJSON(paste0(&quot;http://capitolwords.org/api/1/dates.json?phrase=obamacare&quot;, key))</span></a>
<a class="sourceLine" id="cb132-622" title="622"><span class="co">#&gt; 569   legislators &lt;- fromJSON(paste0(&quot;http://congress.api.sunlightfoundation.com/&quot;, &quot;legislators/locate?</span></a>
<a class="sourceLine" id="cb132-623" title="623"><span class="co">#&gt; 570  latitude=42.96&amp;longitude=-108.09&quot;, key)) A.3 OAuth2 authentication Twitter The twitter API requires</span></a>
<a class="sourceLine" id="cb132-624" title="624"><span class="co">#&gt; 571     a more elaborate authentication process based on the OAuth2 protocol. Some example code: #Create</span></a>
<a class="sourceLine" id="cb132-625" title="625"><span class="co">#&gt; 572     your own appication key at https://dev.twitter.com/apps consumer_key = &quot;EZRy5JzOH2QQmVAe9B4j2w&quot;;</span></a>
<a class="sourceLine" id="cb132-626" title="626"><span class="co">#&gt; 573  consumer_secret = &quot;OIDC4MdfZJ82nbwpZfoUO4WOLTYjoRhpHRAWj6JMec&quot;; #basic auth library(httr) secret &lt;-</span></a>
<a class="sourceLine" id="cb132-627" title="627"><span class="co">#&gt; 574  RCurl::base64(paste(consumer_key, consumer_secret, sep=&quot;:&quot;)); req &lt;- POST(&quot;https://api.twitter.com/</span></a>
<a class="sourceLine" id="cb132-628" title="628"><span class="co">#&gt; 575       oauth2/token&quot;, config(httpheader = c( &quot;Authorization&quot; = paste(&quot;Basic&quot;, secret), &quot;Content-Type&quot;</span></a>
<a class="sourceLine" id="cb132-629" title="629"><span class="co">#&gt; 576      = &quot;application/x-www-form-urlencoded;charset=UTF-8&quot; )), body = &quot;grant_type=client_credentials&quot;,</span></a>
<a class="sourceLine" id="cb132-630" title="630"><span class="co">#&gt; 577                multipart = FALSE ); res &lt;- fromJSON(rawToChar(req$content)) token &lt;- paste(&quot;Bearer&quot;,</span></a>
<a class="sourceLine" id="cb132-631" title="631"><span class="co">#&gt; 578  res$access_token); #Actual API call url = &quot;https://api.twitter.com/1.1/statuses/user_timeline.json?</span></a>
<a class="sourceLine" id="cb132-632" title="632"><span class="co">#&gt; 579   count=10&amp;screen_name=UCLA&quot; call1 &lt;- GET(url, config(httpheader = c(&quot;Authorization&quot; = token))) obj1</span></a>
<a class="sourceLine" id="cb132-633" title="633"><span class="co">#&gt; 580                                                             &lt;- fromJSON(rawToChar(call1$content)) 27</span></a>
<a class="sourceLine" id="cb132-634" title="634"><span class="co">#&gt; 581  B Simple JSON RPC with OpenCPU The jsonlite package is used by OpenCPU to convert between JSON data</span></a>
<a class="sourceLine" id="cb132-635" title="635"><span class="co">#&gt; 582  and R ojects. Thereby clients can retrieve R objects, or remotely call R functions using JSON where</span></a>
<a class="sourceLine" id="cb132-636" title="636"><span class="co">#&gt; 583    the function arguments as well as function return value are JSON objects. For example to download</span></a>
<a class="sourceLine" id="cb132-637" title="637"><span class="co">#&gt; 584  the Boston data from the MASS package: Command in R Example URL on OpenCPU toJSON(Boston, digits=4)</span></a>
<a class="sourceLine" id="cb132-638" title="638"><span class="co">#&gt; 585         https://cran.ocpu.io/MASS/data/Boston/json?digits=4 toJSON(Boston, dataframe=&quot;col&quot;) https://</span></a>
<a class="sourceLine" id="cb132-639" title="639"><span class="co">#&gt; 586  cran.ocpu.io/MASS/data/Boston/json?dataframe=col toJSON(Boston, pretty=FALSE) https://cran.ocpu.io/</span></a>
<a class="sourceLine" id="cb132-640" title="640"><span class="co">#&gt; 587  MASS/data/Boston/json?pretty=false To calculate the variance of some the numbers 1:9 in the command</span></a>
<a class="sourceLine" id="cb132-641" title="641"><span class="co">#&gt; 588      line using using curl: curl https://demo.ocpu.io/stats/R/var/json -d &#39;x=[1,2,3,4,5,6,7,8,9]&#39; Or</span></a>
<a class="sourceLine" id="cb132-642" title="642"><span class="co">#&gt; 589       equivalently post the entire body in JSON format: curl https://demo.ocpu.io/stats/R/var/json -</span></a>
<a class="sourceLine" id="cb132-643" title="643"><span class="co">#&gt; 590  H &quot;Content-Type: application/json&quot; \\ -d &#39;{&quot;x&quot;:[1,2,3,4,5,6,7,8,9]}&#39; Below an example where we call</span></a>
<a class="sourceLine" id="cb132-644" title="644"><span class="co">#&gt; 591   the melt function from the reshape2 package using some example rows from the airquality data. Here</span></a>
<a class="sourceLine" id="cb132-645" title="645"><span class="co">#&gt; 592     both input and output consist of a data frame. curl https://cran.ocpu.io/reshape2/R/melt/json -d</span></a>
<a class="sourceLine" id="cb132-646" title="646"><span class="co">#&gt; 593 &#39;id=[&quot;Month&quot;, &quot;Day&quot;]&amp;data=[ { &quot;Ozone&quot; : 41, &quot;Solar.R&quot; : 190, &quot;Wind&quot; : 7.4, &quot;Temp&quot; : 67, &quot;Month&quot; : 5,</span></a>
<a class="sourceLine" id="cb132-647" title="647"><span class="co">#&gt; 594   &quot;Day&quot; : 1 }, { &quot;Ozone&quot; : 36, &quot;Solar.R&quot; : 118, &quot;Wind&quot; : 8, &quot;Temp&quot; : 72, &quot;Month&quot; : 5, &quot;Day&quot; : 2 } ]&#39;</span></a>
<a class="sourceLine" id="cb132-648" title="648"><span class="co">#&gt; 595  Or equivalently: curl https://cran.ocpu.io/reshape2/R/melt/json -H &quot;Content-Type: application/json&quot;</span></a>
<a class="sourceLine" id="cb132-649" title="649"><span class="co">#&gt; 596  \\ -d &#39;{&quot;id&quot; : [&quot;Month&quot;, &quot;Day&quot;], &quot;data&quot; : [ { &quot;Ozone&quot; : 41, &quot;Solar.R&quot; : 190, &quot;Wind&quot; : 7.4, &quot;Temp&quot; :</span></a>
<a class="sourceLine" id="cb132-650" title="650"><span class="co">#&gt; 597 67, &quot;Month&quot; : 5, &quot;Day&quot; : 1 }, { &quot;Ozone&quot; : 36, &quot;Solar.R&quot; : 118, &quot;Wind&quot; : 8, &quot;Temp&quot; : 72, &quot;Month&quot; : 5,</span></a>
<a class="sourceLine" id="cb132-651" title="651"><span class="co">#&gt; 598 &quot;Day&quot; : 2 } ] }&#39; This request basically executes the following R code: mydata &lt;- airquality[1:2, ] y</span></a>
<a class="sourceLine" id="cb132-652" title="652"><span class="co">#&gt; 599                           &lt;- reshape2::melt(data = mydata, id = c(&quot;Month&quot;, &quot;Day&quot;)) cat(toJSON(y)) 28</span></a>
<a class="sourceLine" id="cb132-653" title="653"><span class="co">#&gt; 600      References Edward Anderson, Zhaojun Bai, Christian Bischof, Susan Blackford, James Demmel, Jack</span></a>
<a class="sourceLine" id="cb132-654" title="654"><span class="co">#&gt; 601   Dongarra, Jeremy Du Croz, Anne Greenbaum, S Hammerling, Alan McKenney, et al. LAPACK Users’ guide,</span></a>
<a class="sourceLine" id="cb132-655" title="655"><span class="co">#&gt; 602  volume 9. Siam, 1999. Kristina Chodorow. MongoDB: the definitive guide. O’Reilly Media, Inc., 2013.</span></a>
<a class="sourceLine" id="cb132-656" title="656"><span class="co">#&gt; 603   Alex Couture-Beil. rjson: JSON for R, 2013. URL http://CRAN.R-project.org/package=rjson. R package</span></a>
<a class="sourceLine" id="cb132-657" title="657"><span class="co">#&gt; 604    version 0.2.13. Douglas Crockford. The application/json media type for javascript object notation</span></a>
<a class="sourceLine" id="cb132-658" title="658"><span class="co">#&gt; 605         (json), 2006a. URL http://tools.ietf.org/html/rfc4627. Douglas Crockford. JSON: The fat-free</span></a>
<a class="sourceLine" id="cb132-659" title="659"><span class="co">#&gt; 606  alternative to XML. In Proc. of XML, volume 2006, 2006b. URL http://www.json.org/fatfree.html. Mike</span></a>
<a class="sourceLine" id="cb132-660" title="660"><span class="co">#&gt; 607   Dewar. First steps in data visualisation using d3.js, 2012. URL http://vimeo.com/35005701#t=7m17s.</span></a>
<a class="sourceLine" id="cb132-661" title="661"><span class="co">#&gt; 608        New York Open Statistical Programming Meetup on Jan. 12, 2012. ECMA. 262: ECMAScript Language</span></a>
<a class="sourceLine" id="cb132-662" title="662"><span class="co">#&gt; 609         Specification. European Association for Standardizing Information and Communication Systems,</span></a>
<a class="sourceLine" id="cb132-663" title="663"><span class="co">#&gt; 610       1999. URL http://www.ecma-international.org/publications/files/ ECMA-ST/Ecma-262.pdf. Sadayuki</span></a>
<a class="sourceLine" id="cb132-664" title="664"><span class="co">#&gt; 611        Furuhashi. MessagePack: It’s like JSON. but fast and small, 2014. URL http://msgpack.org/. F.</span></a>
<a class="sourceLine" id="cb132-665" title="665"><span class="co">#&gt; 612         Galiegue and K. Zyp. JSON Schema: core definitions and terminology. draft-zyp-json-schema-04</span></a>
<a class="sourceLine" id="cb132-666" title="666"><span class="co">#&gt; 613    (work in progress), 2013. URL https://tools.ietf.org/html/draft-zyp-json-schema-04. Duncan Temple</span></a>
<a class="sourceLine" id="cb132-667" title="667"><span class="co">#&gt; 614     Lang. RJSONIO: Serialize R objects to JSON, JavaScript Object Notation, 2013. URL http://CRAN.R-</span></a>
<a class="sourceLine" id="cb132-668" title="668"><span class="co">#&gt; 615     project.org/package=RJSONIO. R package version 1.0-3. Chuck L Lawson, Richard J. Hanson, David R</span></a>
<a class="sourceLine" id="cb132-669" title="669"><span class="co">#&gt; 616     Kincaid, and Fred T. Krogh. Basic linear algebra subprograms for fortran usage. ACM Transactions</span></a>
<a class="sourceLine" id="cb132-670" title="670"><span class="co">#&gt; 617       on Mathematical Software (TOMS), 5(3):308–323, 1979. Deborah Nolan and Duncan Temple Lang. XML</span></a>
<a class="sourceLine" id="cb132-671" title="671"><span class="co">#&gt; 618         and Web Technologies for Data Sciences with R. Springer, 2014. URL http://link.springer.com/</span></a>
<a class="sourceLine" id="cb132-672" title="672"><span class="co">#&gt; 619     book/10.1007/978-1-4614-7900-0. Jeroen Ooms, Duncan Temple Lang, and Jonathan Wallace. jsonlite:</span></a>
<a class="sourceLine" id="cb132-673" title="673"><span class="co">#&gt; 620      A smarter JSON encoder/decoder for R, 2014. URL http://github.com/jeroenooms/jsonlite#readme. R</span></a>
<a class="sourceLine" id="cb132-674" title="674"><span class="co">#&gt; 621       package version 0.9.4. R Core Team. R: A Language and Environment for Statistical Computing. R</span></a>
<a class="sourceLine" id="cb132-675" title="675"><span class="co">#&gt; 622   Foundation for Statistical Computing, Vienna, Austria, 2013. URL http://www.R-project.org/. Hadley</span></a>
<a class="sourceLine" id="cb132-676" title="676"><span class="co">#&gt; 623           Wickham. Tidy Data. Under review, 2014. URL http://vita.had.co.nz/papers/tidy-data.pdf. 29</span></a>
<a class="sourceLine" id="cb132-677" title="677"><span class="co">#&gt;     page</span></a>
<a class="sourceLine" id="cb132-678" title="678"><span class="co">#&gt; 1      1</span></a>
<a class="sourceLine" id="cb132-679" title="679"><span class="co">#&gt; 2      1</span></a>
<a class="sourceLine" id="cb132-680" title="680"><span class="co">#&gt; 3      1</span></a>
<a class="sourceLine" id="cb132-681" title="681"><span class="co">#&gt; 4      1</span></a>
<a class="sourceLine" id="cb132-682" title="682"><span class="co">#&gt; 5      1</span></a>
<a class="sourceLine" id="cb132-683" title="683"><span class="co">#&gt; 6      1</span></a>
<a class="sourceLine" id="cb132-684" title="684"><span class="co">#&gt; 7      1</span></a>
<a class="sourceLine" id="cb132-685" title="685"><span class="co">#&gt; 8      1</span></a>
<a class="sourceLine" id="cb132-686" title="686"><span class="co">#&gt; 9      1</span></a>
<a class="sourceLine" id="cb132-687" title="687"><span class="co">#&gt; 10     1</span></a>
<a class="sourceLine" id="cb132-688" title="688"><span class="co">#&gt; 11     1</span></a>
<a class="sourceLine" id="cb132-689" title="689"><span class="co">#&gt; 12     1</span></a>
<a class="sourceLine" id="cb132-690" title="690"><span class="co">#&gt; 13     1</span></a>
<a class="sourceLine" id="cb132-691" title="691"><span class="co">#&gt; 14     1</span></a>
<a class="sourceLine" id="cb132-692" title="692"><span class="co">#&gt; 15     1</span></a>
<a class="sourceLine" id="cb132-693" title="693"><span class="co">#&gt; 16     1</span></a>
<a class="sourceLine" id="cb132-694" title="694"><span class="co">#&gt; 17     1</span></a>
<a class="sourceLine" id="cb132-695" title="695"><span class="co">#&gt; 18     1</span></a>
<a class="sourceLine" id="cb132-696" title="696"><span class="co">#&gt; 19     1</span></a>
<a class="sourceLine" id="cb132-697" title="697"><span class="co">#&gt; 20     1</span></a>
<a class="sourceLine" id="cb132-698" title="698"><span class="co">#&gt; 21     1</span></a>
<a class="sourceLine" id="cb132-699" title="699"><span class="co">#&gt; 22     1</span></a>
<a class="sourceLine" id="cb132-700" title="700"><span class="co">#&gt; 23     1</span></a>
<a class="sourceLine" id="cb132-701" title="701"><span class="co">#&gt; 24     1</span></a>
<a class="sourceLine" id="cb132-702" title="702"><span class="co">#&gt; 25     1</span></a>
<a class="sourceLine" id="cb132-703" title="703"><span class="co">#&gt; 26     1</span></a>
<a class="sourceLine" id="cb132-704" title="704"><span class="co">#&gt; 27     1</span></a>
<a class="sourceLine" id="cb132-705" title="705"><span class="co">#&gt; 28     1</span></a>
<a class="sourceLine" id="cb132-706" title="706"><span class="co">#&gt; 29     1</span></a>
<a class="sourceLine" id="cb132-707" title="707"><span class="co">#&gt; 30     2</span></a>
<a class="sourceLine" id="cb132-708" title="708"><span class="co">#&gt; 31     2</span></a>
<a class="sourceLine" id="cb132-709" title="709"><span class="co">#&gt; 32     2</span></a>
<a class="sourceLine" id="cb132-710" title="710"><span class="co">#&gt; 33     2</span></a>
<a class="sourceLine" id="cb132-711" title="711"><span class="co">#&gt; 34     2</span></a>
<a class="sourceLine" id="cb132-712" title="712"><span class="co">#&gt; 35     2</span></a>
<a class="sourceLine" id="cb132-713" title="713"><span class="co">#&gt; 36     2</span></a>
<a class="sourceLine" id="cb132-714" title="714"><span class="co">#&gt; 37     2</span></a>
<a class="sourceLine" id="cb132-715" title="715"><span class="co">#&gt; 38     2</span></a>
<a class="sourceLine" id="cb132-716" title="716"><span class="co">#&gt; 39     2</span></a>
<a class="sourceLine" id="cb132-717" title="717"><span class="co">#&gt; 40     2</span></a>
<a class="sourceLine" id="cb132-718" title="718"><span class="co">#&gt; 41     2</span></a>
<a class="sourceLine" id="cb132-719" title="719"><span class="co">#&gt; 42     2</span></a>
<a class="sourceLine" id="cb132-720" title="720"><span class="co">#&gt; 43     2</span></a>
<a class="sourceLine" id="cb132-721" title="721"><span class="co">#&gt; 44     2</span></a>
<a class="sourceLine" id="cb132-722" title="722"><span class="co">#&gt; 45     2</span></a>
<a class="sourceLine" id="cb132-723" title="723"><span class="co">#&gt; 46     2</span></a>
<a class="sourceLine" id="cb132-724" title="724"><span class="co">#&gt; 47     2</span></a>
<a class="sourceLine" id="cb132-725" title="725"><span class="co">#&gt; 48     2</span></a>
<a class="sourceLine" id="cb132-726" title="726"><span class="co">#&gt; 49     2</span></a>
<a class="sourceLine" id="cb132-727" title="727"><span class="co">#&gt; 50     2</span></a>
<a class="sourceLine" id="cb132-728" title="728"><span class="co">#&gt; 51     2</span></a>
<a class="sourceLine" id="cb132-729" title="729"><span class="co">#&gt; 52     2</span></a>
<a class="sourceLine" id="cb132-730" title="730"><span class="co">#&gt; 53     2</span></a>
<a class="sourceLine" id="cb132-731" title="731"><span class="co">#&gt; 54     2</span></a>
<a class="sourceLine" id="cb132-732" title="732"><span class="co">#&gt; 55     2</span></a>
<a class="sourceLine" id="cb132-733" title="733"><span class="co">#&gt; 56     2</span></a>
<a class="sourceLine" id="cb132-734" title="734"><span class="co">#&gt; 57     2</span></a>
<a class="sourceLine" id="cb132-735" title="735"><span class="co">#&gt; 58     2</span></a>
<a class="sourceLine" id="cb132-736" title="736"><span class="co">#&gt; 59     2</span></a>
<a class="sourceLine" id="cb132-737" title="737"><span class="co">#&gt; 60     2</span></a>
<a class="sourceLine" id="cb132-738" title="738"><span class="co">#&gt; 61     2</span></a>
<a class="sourceLine" id="cb132-739" title="739"><span class="co">#&gt; 62     2</span></a>
<a class="sourceLine" id="cb132-740" title="740"><span class="co">#&gt; 63     3</span></a>
<a class="sourceLine" id="cb132-741" title="741"><span class="co">#&gt; 64     3</span></a>
<a class="sourceLine" id="cb132-742" title="742"><span class="co">#&gt; 65     3</span></a>
<a class="sourceLine" id="cb132-743" title="743"><span class="co">#&gt; 66     3</span></a>
<a class="sourceLine" id="cb132-744" title="744"><span class="co">#&gt; 67     3</span></a>
<a class="sourceLine" id="cb132-745" title="745"><span class="co">#&gt; 68     3</span></a>
<a class="sourceLine" id="cb132-746" title="746"><span class="co">#&gt; 69     3</span></a>
<a class="sourceLine" id="cb132-747" title="747"><span class="co">#&gt; 70     3</span></a>
<a class="sourceLine" id="cb132-748" title="748"><span class="co">#&gt; 71     3</span></a>
<a class="sourceLine" id="cb132-749" title="749"><span class="co">#&gt; 72     3</span></a>
<a class="sourceLine" id="cb132-750" title="750"><span class="co">#&gt; 73     3</span></a>
<a class="sourceLine" id="cb132-751" title="751"><span class="co">#&gt; 74     3</span></a>
<a class="sourceLine" id="cb132-752" title="752"><span class="co">#&gt; 75     3</span></a>
<a class="sourceLine" id="cb132-753" title="753"><span class="co">#&gt; 76     3</span></a>
<a class="sourceLine" id="cb132-754" title="754"><span class="co">#&gt; 77     3</span></a>
<a class="sourceLine" id="cb132-755" title="755"><span class="co">#&gt; 78     3</span></a>
<a class="sourceLine" id="cb132-756" title="756"><span class="co">#&gt; 79     3</span></a>
<a class="sourceLine" id="cb132-757" title="757"><span class="co">#&gt; 80     3</span></a>
<a class="sourceLine" id="cb132-758" title="758"><span class="co">#&gt; 81     3</span></a>
<a class="sourceLine" id="cb132-759" title="759"><span class="co">#&gt; 82     3</span></a>
<a class="sourceLine" id="cb132-760" title="760"><span class="co">#&gt; 83     3</span></a>
<a class="sourceLine" id="cb132-761" title="761"><span class="co">#&gt; 84     3</span></a>
<a class="sourceLine" id="cb132-762" title="762"><span class="co">#&gt; 85     3</span></a>
<a class="sourceLine" id="cb132-763" title="763"><span class="co">#&gt; 86     3</span></a>
<a class="sourceLine" id="cb132-764" title="764"><span class="co">#&gt; 87     3</span></a>
<a class="sourceLine" id="cb132-765" title="765"><span class="co">#&gt; 88     3</span></a>
<a class="sourceLine" id="cb132-766" title="766"><span class="co">#&gt; 89     3</span></a>
<a class="sourceLine" id="cb132-767" title="767"><span class="co">#&gt; 90     3</span></a>
<a class="sourceLine" id="cb132-768" title="768"><span class="co">#&gt; 91     3</span></a>
<a class="sourceLine" id="cb132-769" title="769"><span class="co">#&gt; 92     3</span></a>
<a class="sourceLine" id="cb132-770" title="770"><span class="co">#&gt; 93     3</span></a>
<a class="sourceLine" id="cb132-771" title="771"><span class="co">#&gt; 94     3</span></a>
<a class="sourceLine" id="cb132-772" title="772"><span class="co">#&gt; 95     3</span></a>
<a class="sourceLine" id="cb132-773" title="773"><span class="co">#&gt; 96     3</span></a>
<a class="sourceLine" id="cb132-774" title="774"><span class="co">#&gt; 97     3</span></a>
<a class="sourceLine" id="cb132-775" title="775"><span class="co">#&gt; 98     3</span></a>
<a class="sourceLine" id="cb132-776" title="776"><span class="co">#&gt; 99     4</span></a>
<a class="sourceLine" id="cb132-777" title="777"><span class="co">#&gt; 100    4</span></a>
<a class="sourceLine" id="cb132-778" title="778"><span class="co">#&gt; 101    4</span></a>
<a class="sourceLine" id="cb132-779" title="779"><span class="co">#&gt; 102    4</span></a>
<a class="sourceLine" id="cb132-780" title="780"><span class="co">#&gt; 103    4</span></a>
<a class="sourceLine" id="cb132-781" title="781"><span class="co">#&gt; 104    4</span></a>
<a class="sourceLine" id="cb132-782" title="782"><span class="co">#&gt; 105    4</span></a>
<a class="sourceLine" id="cb132-783" title="783"><span class="co">#&gt; 106    4</span></a>
<a class="sourceLine" id="cb132-784" title="784"><span class="co">#&gt; 107    4</span></a>
<a class="sourceLine" id="cb132-785" title="785"><span class="co">#&gt; 108    4</span></a>
<a class="sourceLine" id="cb132-786" title="786"><span class="co">#&gt; 109    4</span></a>
<a class="sourceLine" id="cb132-787" title="787"><span class="co">#&gt; 110    4</span></a>
<a class="sourceLine" id="cb132-788" title="788"><span class="co">#&gt; 111    4</span></a>
<a class="sourceLine" id="cb132-789" title="789"><span class="co">#&gt; 112    4</span></a>
<a class="sourceLine" id="cb132-790" title="790"><span class="co">#&gt; 113    4</span></a>
<a class="sourceLine" id="cb132-791" title="791"><span class="co">#&gt; 114    4</span></a>
<a class="sourceLine" id="cb132-792" title="792"><span class="co">#&gt; 115    4</span></a>
<a class="sourceLine" id="cb132-793" title="793"><span class="co">#&gt; 116    4</span></a>
<a class="sourceLine" id="cb132-794" title="794"><span class="co">#&gt; 117    4</span></a>
<a class="sourceLine" id="cb132-795" title="795"><span class="co">#&gt; 118    4</span></a>
<a class="sourceLine" id="cb132-796" title="796"><span class="co">#&gt; 119    4</span></a>
<a class="sourceLine" id="cb132-797" title="797"><span class="co">#&gt; 120    4</span></a>
<a class="sourceLine" id="cb132-798" title="798"><span class="co">#&gt; 121    4</span></a>
<a class="sourceLine" id="cb132-799" title="799"><span class="co">#&gt; 122    4</span></a>
<a class="sourceLine" id="cb132-800" title="800"><span class="co">#&gt; 123    4</span></a>
<a class="sourceLine" id="cb132-801" title="801"><span class="co">#&gt; 124    4</span></a>
<a class="sourceLine" id="cb132-802" title="802"><span class="co">#&gt; 125    4</span></a>
<a class="sourceLine" id="cb132-803" title="803"><span class="co">#&gt; 126    4</span></a>
<a class="sourceLine" id="cb132-804" title="804"><span class="co">#&gt; 127    4</span></a>
<a class="sourceLine" id="cb132-805" title="805"><span class="co">#&gt; 128    4</span></a>
<a class="sourceLine" id="cb132-806" title="806"><span class="co">#&gt; 129    4</span></a>
<a class="sourceLine" id="cb132-807" title="807"><span class="co">#&gt; 130    4</span></a>
<a class="sourceLine" id="cb132-808" title="808"><span class="co">#&gt; 131    4</span></a>
<a class="sourceLine" id="cb132-809" title="809"><span class="co">#&gt; 132    4</span></a>
<a class="sourceLine" id="cb132-810" title="810"><span class="co">#&gt; 133    4</span></a>
<a class="sourceLine" id="cb132-811" title="811"><span class="co">#&gt; 134    4</span></a>
<a class="sourceLine" id="cb132-812" title="812"><span class="co">#&gt; 135    4</span></a>
<a class="sourceLine" id="cb132-813" title="813"><span class="co">#&gt; 136    4</span></a>
<a class="sourceLine" id="cb132-814" title="814"><span class="co">#&gt; 137    4</span></a>
<a class="sourceLine" id="cb132-815" title="815"><span class="co">#&gt; 138    4</span></a>
<a class="sourceLine" id="cb132-816" title="816"><span class="co">#&gt; 139    4</span></a>
<a class="sourceLine" id="cb132-817" title="817"><span class="co">#&gt; 140    4</span></a>
<a class="sourceLine" id="cb132-818" title="818"><span class="co">#&gt; 141    5</span></a>
<a class="sourceLine" id="cb132-819" title="819"><span class="co">#&gt; 142    5</span></a>
<a class="sourceLine" id="cb132-820" title="820"><span class="co">#&gt; 143    5</span></a>
<a class="sourceLine" id="cb132-821" title="821"><span class="co">#&gt; 144    5</span></a>
<a class="sourceLine" id="cb132-822" title="822"><span class="co">#&gt; 145    5</span></a>
<a class="sourceLine" id="cb132-823" title="823"><span class="co">#&gt; 146    5</span></a>
<a class="sourceLine" id="cb132-824" title="824"><span class="co">#&gt; 147    5</span></a>
<a class="sourceLine" id="cb132-825" title="825"><span class="co">#&gt; 148    5</span></a>
<a class="sourceLine" id="cb132-826" title="826"><span class="co">#&gt; 149    5</span></a>
<a class="sourceLine" id="cb132-827" title="827"><span class="co">#&gt; 150    5</span></a>
<a class="sourceLine" id="cb132-828" title="828"><span class="co">#&gt; 151    5</span></a>
<a class="sourceLine" id="cb132-829" title="829"><span class="co">#&gt; 152    5</span></a>
<a class="sourceLine" id="cb132-830" title="830"><span class="co">#&gt; 153    5</span></a>
<a class="sourceLine" id="cb132-831" title="831"><span class="co">#&gt; 154    5</span></a>
<a class="sourceLine" id="cb132-832" title="832"><span class="co">#&gt; 155    5</span></a>
<a class="sourceLine" id="cb132-833" title="833"><span class="co">#&gt; 156    5</span></a>
<a class="sourceLine" id="cb132-834" title="834"><span class="co">#&gt; 157    5</span></a>
<a class="sourceLine" id="cb132-835" title="835"><span class="co">#&gt; 158    5</span></a>
<a class="sourceLine" id="cb132-836" title="836"><span class="co">#&gt; 159    5</span></a>
<a class="sourceLine" id="cb132-837" title="837"><span class="co">#&gt; 160    5</span></a>
<a class="sourceLine" id="cb132-838" title="838"><span class="co">#&gt; 161    5</span></a>
<a class="sourceLine" id="cb132-839" title="839"><span class="co">#&gt; 162    5</span></a>
<a class="sourceLine" id="cb132-840" title="840"><span class="co">#&gt; 163    5</span></a>
<a class="sourceLine" id="cb132-841" title="841"><span class="co">#&gt; 164    6</span></a>
<a class="sourceLine" id="cb132-842" title="842"><span class="co">#&gt; 165    6</span></a>
<a class="sourceLine" id="cb132-843" title="843"><span class="co">#&gt; 166    6</span></a>
<a class="sourceLine" id="cb132-844" title="844"><span class="co">#&gt; 167    6</span></a>
<a class="sourceLine" id="cb132-845" title="845"><span class="co">#&gt; 168    6</span></a>
<a class="sourceLine" id="cb132-846" title="846"><span class="co">#&gt; 169    6</span></a>
<a class="sourceLine" id="cb132-847" title="847"><span class="co">#&gt; 170    6</span></a>
<a class="sourceLine" id="cb132-848" title="848"><span class="co">#&gt; 171    6</span></a>
<a class="sourceLine" id="cb132-849" title="849"><span class="co">#&gt; 172    6</span></a>
<a class="sourceLine" id="cb132-850" title="850"><span class="co">#&gt; 173    6</span></a>
<a class="sourceLine" id="cb132-851" title="851"><span class="co">#&gt; 174    6</span></a>
<a class="sourceLine" id="cb132-852" title="852"><span class="co">#&gt; 175    6</span></a>
<a class="sourceLine" id="cb132-853" title="853"><span class="co">#&gt; 176    6</span></a>
<a class="sourceLine" id="cb132-854" title="854"><span class="co">#&gt; 177    6</span></a>
<a class="sourceLine" id="cb132-855" title="855"><span class="co">#&gt; 178    6</span></a>
<a class="sourceLine" id="cb132-856" title="856"><span class="co">#&gt; 179    6</span></a>
<a class="sourceLine" id="cb132-857" title="857"><span class="co">#&gt; 180    6</span></a>
<a class="sourceLine" id="cb132-858" title="858"><span class="co">#&gt; 181    6</span></a>
<a class="sourceLine" id="cb132-859" title="859"><span class="co">#&gt; 182    6</span></a>
<a class="sourceLine" id="cb132-860" title="860"><span class="co">#&gt; 183    6</span></a>
<a class="sourceLine" id="cb132-861" title="861"><span class="co">#&gt; 184    6</span></a>
<a class="sourceLine" id="cb132-862" title="862"><span class="co">#&gt; 185    6</span></a>
<a class="sourceLine" id="cb132-863" title="863"><span class="co">#&gt; 186    7</span></a>
<a class="sourceLine" id="cb132-864" title="864"><span class="co">#&gt; 187    7</span></a>
<a class="sourceLine" id="cb132-865" title="865"><span class="co">#&gt; 188    7</span></a>
<a class="sourceLine" id="cb132-866" title="866"><span class="co">#&gt; 189    7</span></a>
<a class="sourceLine" id="cb132-867" title="867"><span class="co">#&gt; 190    7</span></a>
<a class="sourceLine" id="cb132-868" title="868"><span class="co">#&gt; 191    7</span></a>
<a class="sourceLine" id="cb132-869" title="869"><span class="co">#&gt; 192    7</span></a>
<a class="sourceLine" id="cb132-870" title="870"><span class="co">#&gt; 193    7</span></a>
<a class="sourceLine" id="cb132-871" title="871"><span class="co">#&gt; 194    7</span></a>
<a class="sourceLine" id="cb132-872" title="872"><span class="co">#&gt; 195    7</span></a>
<a class="sourceLine" id="cb132-873" title="873"><span class="co">#&gt; 196    7</span></a>
<a class="sourceLine" id="cb132-874" title="874"><span class="co">#&gt; 197    7</span></a>
<a class="sourceLine" id="cb132-875" title="875"><span class="co">#&gt; 198    7</span></a>
<a class="sourceLine" id="cb132-876" title="876"><span class="co">#&gt; 199    7</span></a>
<a class="sourceLine" id="cb132-877" title="877"><span class="co">#&gt; 200    7</span></a>
<a class="sourceLine" id="cb132-878" title="878"><span class="co">#&gt; 201    7</span></a>
<a class="sourceLine" id="cb132-879" title="879"><span class="co">#&gt; 202    7</span></a>
<a class="sourceLine" id="cb132-880" title="880"><span class="co">#&gt; 203    7</span></a>
<a class="sourceLine" id="cb132-881" title="881"><span class="co">#&gt; 204    8</span></a>
<a class="sourceLine" id="cb132-882" title="882"><span class="co">#&gt; 205    8</span></a>
<a class="sourceLine" id="cb132-883" title="883"><span class="co">#&gt; 206    8</span></a>
<a class="sourceLine" id="cb132-884" title="884"><span class="co">#&gt; 207    8</span></a>
<a class="sourceLine" id="cb132-885" title="885"><span class="co">#&gt; 208    8</span></a>
<a class="sourceLine" id="cb132-886" title="886"><span class="co">#&gt; 209    8</span></a>
<a class="sourceLine" id="cb132-887" title="887"><span class="co">#&gt; 210    8</span></a>
<a class="sourceLine" id="cb132-888" title="888"><span class="co">#&gt; 211    8</span></a>
<a class="sourceLine" id="cb132-889" title="889"><span class="co">#&gt; 212    8</span></a>
<a class="sourceLine" id="cb132-890" title="890"><span class="co">#&gt; 213    8</span></a>
<a class="sourceLine" id="cb132-891" title="891"><span class="co">#&gt; 214    8</span></a>
<a class="sourceLine" id="cb132-892" title="892"><span class="co">#&gt; 215    8</span></a>
<a class="sourceLine" id="cb132-893" title="893"><span class="co">#&gt; 216    8</span></a>
<a class="sourceLine" id="cb132-894" title="894"><span class="co">#&gt; 217    8</span></a>
<a class="sourceLine" id="cb132-895" title="895"><span class="co">#&gt; 218    8</span></a>
<a class="sourceLine" id="cb132-896" title="896"><span class="co">#&gt; 219    8</span></a>
<a class="sourceLine" id="cb132-897" title="897"><span class="co">#&gt; 220    8</span></a>
<a class="sourceLine" id="cb132-898" title="898"><span class="co">#&gt; 221    8</span></a>
<a class="sourceLine" id="cb132-899" title="899"><span class="co">#&gt; 222    8</span></a>
<a class="sourceLine" id="cb132-900" title="900"><span class="co">#&gt; 223    8</span></a>
<a class="sourceLine" id="cb132-901" title="901"><span class="co">#&gt; 224    8</span></a>
<a class="sourceLine" id="cb132-902" title="902"><span class="co">#&gt; 225    8</span></a>
<a class="sourceLine" id="cb132-903" title="903"><span class="co">#&gt; 226    9</span></a>
<a class="sourceLine" id="cb132-904" title="904"><span class="co">#&gt; 227    9</span></a>
<a class="sourceLine" id="cb132-905" title="905"><span class="co">#&gt; 228    9</span></a>
<a class="sourceLine" id="cb132-906" title="906"><span class="co">#&gt; 229    9</span></a>
<a class="sourceLine" id="cb132-907" title="907"><span class="co">#&gt; 230    9</span></a>
<a class="sourceLine" id="cb132-908" title="908"><span class="co">#&gt; 231    9</span></a>
<a class="sourceLine" id="cb132-909" title="909"><span class="co">#&gt; 232    9</span></a>
<a class="sourceLine" id="cb132-910" title="910"><span class="co">#&gt; 233    9</span></a>
<a class="sourceLine" id="cb132-911" title="911"><span class="co">#&gt; 234    9</span></a>
<a class="sourceLine" id="cb132-912" title="912"><span class="co">#&gt; 235    9</span></a>
<a class="sourceLine" id="cb132-913" title="913"><span class="co">#&gt; 236    9</span></a>
<a class="sourceLine" id="cb132-914" title="914"><span class="co">#&gt; 237    9</span></a>
<a class="sourceLine" id="cb132-915" title="915"><span class="co">#&gt; 238    9</span></a>
<a class="sourceLine" id="cb132-916" title="916"><span class="co">#&gt; 239    9</span></a>
<a class="sourceLine" id="cb132-917" title="917"><span class="co">#&gt; 240    9</span></a>
<a class="sourceLine" id="cb132-918" title="918"><span class="co">#&gt; 241    9</span></a>
<a class="sourceLine" id="cb132-919" title="919"><span class="co">#&gt; 242    9</span></a>
<a class="sourceLine" id="cb132-920" title="920"><span class="co">#&gt; 243    9</span></a>
<a class="sourceLine" id="cb132-921" title="921"><span class="co">#&gt; 244    9</span></a>
<a class="sourceLine" id="cb132-922" title="922"><span class="co">#&gt; 245    9</span></a>
<a class="sourceLine" id="cb132-923" title="923"><span class="co">#&gt; 246    9</span></a>
<a class="sourceLine" id="cb132-924" title="924"><span class="co">#&gt; 247    9</span></a>
<a class="sourceLine" id="cb132-925" title="925"><span class="co">#&gt; 248    9</span></a>
<a class="sourceLine" id="cb132-926" title="926"><span class="co">#&gt; 249    9</span></a>
<a class="sourceLine" id="cb132-927" title="927"><span class="co">#&gt; 250    9</span></a>
<a class="sourceLine" id="cb132-928" title="928"><span class="co">#&gt; 251    9</span></a>
<a class="sourceLine" id="cb132-929" title="929"><span class="co">#&gt; 252    9</span></a>
<a class="sourceLine" id="cb132-930" title="930"><span class="co">#&gt; 253   10</span></a>
<a class="sourceLine" id="cb132-931" title="931"><span class="co">#&gt; 254   10</span></a>
<a class="sourceLine" id="cb132-932" title="932"><span class="co">#&gt; 255   10</span></a>
<a class="sourceLine" id="cb132-933" title="933"><span class="co">#&gt; 256   10</span></a>
<a class="sourceLine" id="cb132-934" title="934"><span class="co">#&gt; 257   10</span></a>
<a class="sourceLine" id="cb132-935" title="935"><span class="co">#&gt; 258   10</span></a>
<a class="sourceLine" id="cb132-936" title="936"><span class="co">#&gt; 259   10</span></a>
<a class="sourceLine" id="cb132-937" title="937"><span class="co">#&gt; 260   10</span></a>
<a class="sourceLine" id="cb132-938" title="938"><span class="co">#&gt; 261   10</span></a>
<a class="sourceLine" id="cb132-939" title="939"><span class="co">#&gt; 262   11</span></a>
<a class="sourceLine" id="cb132-940" title="940"><span class="co">#&gt; 263   11</span></a>
<a class="sourceLine" id="cb132-941" title="941"><span class="co">#&gt; 264   11</span></a>
<a class="sourceLine" id="cb132-942" title="942"><span class="co">#&gt; 265   11</span></a>
<a class="sourceLine" id="cb132-943" title="943"><span class="co">#&gt; 266   11</span></a>
<a class="sourceLine" id="cb132-944" title="944"><span class="co">#&gt; 267   11</span></a>
<a class="sourceLine" id="cb132-945" title="945"><span class="co">#&gt; 268   11</span></a>
<a class="sourceLine" id="cb132-946" title="946"><span class="co">#&gt; 269   11</span></a>
<a class="sourceLine" id="cb132-947" title="947"><span class="co">#&gt; 270   11</span></a>
<a class="sourceLine" id="cb132-948" title="948"><span class="co">#&gt; 271   11</span></a>
<a class="sourceLine" id="cb132-949" title="949"><span class="co">#&gt; 272   11</span></a>
<a class="sourceLine" id="cb132-950" title="950"><span class="co">#&gt; 273   11</span></a>
<a class="sourceLine" id="cb132-951" title="951"><span class="co">#&gt; 274   11</span></a>
<a class="sourceLine" id="cb132-952" title="952"><span class="co">#&gt; 275   12</span></a>
<a class="sourceLine" id="cb132-953" title="953"><span class="co">#&gt; 276   12</span></a>
<a class="sourceLine" id="cb132-954" title="954"><span class="co">#&gt; 277   12</span></a>
<a class="sourceLine" id="cb132-955" title="955"><span class="co">#&gt; 278   12</span></a>
<a class="sourceLine" id="cb132-956" title="956"><span class="co">#&gt; 279   12</span></a>
<a class="sourceLine" id="cb132-957" title="957"><span class="co">#&gt; 280   12</span></a>
<a class="sourceLine" id="cb132-958" title="958"><span class="co">#&gt; 281   12</span></a>
<a class="sourceLine" id="cb132-959" title="959"><span class="co">#&gt; 282   12</span></a>
<a class="sourceLine" id="cb132-960" title="960"><span class="co">#&gt; 283   12</span></a>
<a class="sourceLine" id="cb132-961" title="961"><span class="co">#&gt; 284   12</span></a>
<a class="sourceLine" id="cb132-962" title="962"><span class="co">#&gt; 285   12</span></a>
<a class="sourceLine" id="cb132-963" title="963"><span class="co">#&gt; 286   12</span></a>
<a class="sourceLine" id="cb132-964" title="964"><span class="co">#&gt; 287   12</span></a>
<a class="sourceLine" id="cb132-965" title="965"><span class="co">#&gt; 288   12</span></a>
<a class="sourceLine" id="cb132-966" title="966"><span class="co">#&gt; 289   12</span></a>
<a class="sourceLine" id="cb132-967" title="967"><span class="co">#&gt; 290   12</span></a>
<a class="sourceLine" id="cb132-968" title="968"><span class="co">#&gt; 291   13</span></a>
<a class="sourceLine" id="cb132-969" title="969"><span class="co">#&gt; 292   13</span></a>
<a class="sourceLine" id="cb132-970" title="970"><span class="co">#&gt; 293   13</span></a>
<a class="sourceLine" id="cb132-971" title="971"><span class="co">#&gt; 294   13</span></a>
<a class="sourceLine" id="cb132-972" title="972"><span class="co">#&gt; 295   13</span></a>
<a class="sourceLine" id="cb132-973" title="973"><span class="co">#&gt; 296   13</span></a>
<a class="sourceLine" id="cb132-974" title="974"><span class="co">#&gt; 297   13</span></a>
<a class="sourceLine" id="cb132-975" title="975"><span class="co">#&gt; 298   13</span></a>
<a class="sourceLine" id="cb132-976" title="976"><span class="co">#&gt; 299   13</span></a>
<a class="sourceLine" id="cb132-977" title="977"><span class="co">#&gt; 300   13</span></a>
<a class="sourceLine" id="cb132-978" title="978"><span class="co">#&gt; 301   13</span></a>
<a class="sourceLine" id="cb132-979" title="979"><span class="co">#&gt; 302   13</span></a>
<a class="sourceLine" id="cb132-980" title="980"><span class="co">#&gt; 303   13</span></a>
<a class="sourceLine" id="cb132-981" title="981"><span class="co">#&gt; 304   14</span></a>
<a class="sourceLine" id="cb132-982" title="982"><span class="co">#&gt; 305   14</span></a>
<a class="sourceLine" id="cb132-983" title="983"><span class="co">#&gt; 306   14</span></a>
<a class="sourceLine" id="cb132-984" title="984"><span class="co">#&gt; 307   14</span></a>
<a class="sourceLine" id="cb132-985" title="985"><span class="co">#&gt; 308   14</span></a>
<a class="sourceLine" id="cb132-986" title="986"><span class="co">#&gt; 309   14</span></a>
<a class="sourceLine" id="cb132-987" title="987"><span class="co">#&gt; 310   14</span></a>
<a class="sourceLine" id="cb132-988" title="988"><span class="co">#&gt; 311   14</span></a>
<a class="sourceLine" id="cb132-989" title="989"><span class="co">#&gt; 312   14</span></a>
<a class="sourceLine" id="cb132-990" title="990"><span class="co">#&gt; 313   14</span></a>
<a class="sourceLine" id="cb132-991" title="991"><span class="co">#&gt; 314   14</span></a>
<a class="sourceLine" id="cb132-992" title="992"><span class="co">#&gt; 315   14</span></a>
<a class="sourceLine" id="cb132-993" title="993"><span class="co">#&gt; 316   14</span></a>
<a class="sourceLine" id="cb132-994" title="994"><span class="co">#&gt; 317   14</span></a>
<a class="sourceLine" id="cb132-995" title="995"><span class="co">#&gt; 318   14</span></a>
<a class="sourceLine" id="cb132-996" title="996"><span class="co">#&gt; 319   14</span></a>
<a class="sourceLine" id="cb132-997" title="997"><span class="co">#&gt; 320   14</span></a>
<a class="sourceLine" id="cb132-998" title="998"><span class="co">#&gt; 321   14</span></a>
<a class="sourceLine" id="cb132-999" title="999"><span class="co">#&gt; 322   14</span></a>
<a class="sourceLine" id="cb132-1000" title="1000"><span class="co">#&gt; 323   14</span></a>
<a class="sourceLine" id="cb132-1001" title="1001"><span class="co">#&gt; 324   14</span></a>
<a class="sourceLine" id="cb132-1002" title="1002"><span class="co">#&gt; 325   14</span></a>
<a class="sourceLine" id="cb132-1003" title="1003"><span class="co">#&gt; 326   14</span></a>
<a class="sourceLine" id="cb132-1004" title="1004"><span class="co">#&gt; 327   14</span></a>
<a class="sourceLine" id="cb132-1005" title="1005"><span class="co">#&gt; 328   14</span></a>
<a class="sourceLine" id="cb132-1006" title="1006"><span class="co">#&gt; 329   14</span></a>
<a class="sourceLine" id="cb132-1007" title="1007"><span class="co">#&gt; 330   14</span></a>
<a class="sourceLine" id="cb132-1008" title="1008"><span class="co">#&gt; 331   14</span></a>
<a class="sourceLine" id="cb132-1009" title="1009"><span class="co">#&gt; 332   14</span></a>
<a class="sourceLine" id="cb132-1010" title="1010"><span class="co">#&gt; 333   14</span></a>
<a class="sourceLine" id="cb132-1011" title="1011"><span class="co">#&gt; 334   15</span></a>
<a class="sourceLine" id="cb132-1012" title="1012"><span class="co">#&gt; 335   15</span></a>
<a class="sourceLine" id="cb132-1013" title="1013"><span class="co">#&gt; 336   15</span></a>
<a class="sourceLine" id="cb132-1014" title="1014"><span class="co">#&gt; 337   15</span></a>
<a class="sourceLine" id="cb132-1015" title="1015"><span class="co">#&gt; 338   15</span></a>
<a class="sourceLine" id="cb132-1016" title="1016"><span class="co">#&gt; 339   15</span></a>
<a class="sourceLine" id="cb132-1017" title="1017"><span class="co">#&gt; 340   15</span></a>
<a class="sourceLine" id="cb132-1018" title="1018"><span class="co">#&gt; 341   15</span></a>
<a class="sourceLine" id="cb132-1019" title="1019"><span class="co">#&gt; 342   15</span></a>
<a class="sourceLine" id="cb132-1020" title="1020"><span class="co">#&gt; 343   15</span></a>
<a class="sourceLine" id="cb132-1021" title="1021"><span class="co">#&gt; 344   15</span></a>
<a class="sourceLine" id="cb132-1022" title="1022"><span class="co">#&gt; 345   15</span></a>
<a class="sourceLine" id="cb132-1023" title="1023"><span class="co">#&gt; 346   15</span></a>
<a class="sourceLine" id="cb132-1024" title="1024"><span class="co">#&gt; 347   15</span></a>
<a class="sourceLine" id="cb132-1025" title="1025"><span class="co">#&gt; 348   15</span></a>
<a class="sourceLine" id="cb132-1026" title="1026"><span class="co">#&gt; 349   15</span></a>
<a class="sourceLine" id="cb132-1027" title="1027"><span class="co">#&gt; 350   16</span></a>
<a class="sourceLine" id="cb132-1028" title="1028"><span class="co">#&gt; 351   16</span></a>
<a class="sourceLine" id="cb132-1029" title="1029"><span class="co">#&gt; 352   16</span></a>
<a class="sourceLine" id="cb132-1030" title="1030"><span class="co">#&gt; 353   16</span></a>
<a class="sourceLine" id="cb132-1031" title="1031"><span class="co">#&gt; 354   16</span></a>
<a class="sourceLine" id="cb132-1032" title="1032"><span class="co">#&gt; 355   16</span></a>
<a class="sourceLine" id="cb132-1033" title="1033"><span class="co">#&gt; 356   16</span></a>
<a class="sourceLine" id="cb132-1034" title="1034"><span class="co">#&gt; 357   16</span></a>
<a class="sourceLine" id="cb132-1035" title="1035"><span class="co">#&gt; 358   16</span></a>
<a class="sourceLine" id="cb132-1036" title="1036"><span class="co">#&gt; 359   16</span></a>
<a class="sourceLine" id="cb132-1037" title="1037"><span class="co">#&gt; 360   16</span></a>
<a class="sourceLine" id="cb132-1038" title="1038"><span class="co">#&gt; 361   16</span></a>
<a class="sourceLine" id="cb132-1039" title="1039"><span class="co">#&gt; 362   16</span></a>
<a class="sourceLine" id="cb132-1040" title="1040"><span class="co">#&gt; 363   16</span></a>
<a class="sourceLine" id="cb132-1041" title="1041"><span class="co">#&gt; 364   17</span></a>
<a class="sourceLine" id="cb132-1042" title="1042"><span class="co">#&gt; 365   17</span></a>
<a class="sourceLine" id="cb132-1043" title="1043"><span class="co">#&gt; 366   17</span></a>
<a class="sourceLine" id="cb132-1044" title="1044"><span class="co">#&gt; 367   17</span></a>
<a class="sourceLine" id="cb132-1045" title="1045"><span class="co">#&gt; 368   17</span></a>
<a class="sourceLine" id="cb132-1046" title="1046"><span class="co">#&gt; 369   17</span></a>
<a class="sourceLine" id="cb132-1047" title="1047"><span class="co">#&gt; 370   17</span></a>
<a class="sourceLine" id="cb132-1048" title="1048"><span class="co">#&gt; 371   17</span></a>
<a class="sourceLine" id="cb132-1049" title="1049"><span class="co">#&gt; 372   17</span></a>
<a class="sourceLine" id="cb132-1050" title="1050"><span class="co">#&gt; 373   17</span></a>
<a class="sourceLine" id="cb132-1051" title="1051"><span class="co">#&gt; 374   17</span></a>
<a class="sourceLine" id="cb132-1052" title="1052"><span class="co">#&gt; 375   17</span></a>
<a class="sourceLine" id="cb132-1053" title="1053"><span class="co">#&gt; 376   17</span></a>
<a class="sourceLine" id="cb132-1054" title="1054"><span class="co">#&gt; 377   17</span></a>
<a class="sourceLine" id="cb132-1055" title="1055"><span class="co">#&gt; 378   17</span></a>
<a class="sourceLine" id="cb132-1056" title="1056"><span class="co">#&gt; 379   17</span></a>
<a class="sourceLine" id="cb132-1057" title="1057"><span class="co">#&gt; 380   17</span></a>
<a class="sourceLine" id="cb132-1058" title="1058"><span class="co">#&gt; 381   18</span></a>
<a class="sourceLine" id="cb132-1059" title="1059"><span class="co">#&gt; 382   18</span></a>
<a class="sourceLine" id="cb132-1060" title="1060"><span class="co">#&gt; 383   18</span></a>
<a class="sourceLine" id="cb132-1061" title="1061"><span class="co">#&gt; 384   18</span></a>
<a class="sourceLine" id="cb132-1062" title="1062"><span class="co">#&gt; 385   18</span></a>
<a class="sourceLine" id="cb132-1063" title="1063"><span class="co">#&gt; 386   18</span></a>
<a class="sourceLine" id="cb132-1064" title="1064"><span class="co">#&gt; 387   18</span></a>
<a class="sourceLine" id="cb132-1065" title="1065"><span class="co">#&gt; 388   18</span></a>
<a class="sourceLine" id="cb132-1066" title="1066"><span class="co">#&gt; 389   18</span></a>
<a class="sourceLine" id="cb132-1067" title="1067"><span class="co">#&gt; 390   18</span></a>
<a class="sourceLine" id="cb132-1068" title="1068"><span class="co">#&gt; 391   18</span></a>
<a class="sourceLine" id="cb132-1069" title="1069"><span class="co">#&gt; 392   18</span></a>
<a class="sourceLine" id="cb132-1070" title="1070"><span class="co">#&gt; 393   18</span></a>
<a class="sourceLine" id="cb132-1071" title="1071"><span class="co">#&gt; 394   18</span></a>
<a class="sourceLine" id="cb132-1072" title="1072"><span class="co">#&gt; 395   18</span></a>
<a class="sourceLine" id="cb132-1073" title="1073"><span class="co">#&gt; 396   18</span></a>
<a class="sourceLine" id="cb132-1074" title="1074"><span class="co">#&gt; 397   18</span></a>
<a class="sourceLine" id="cb132-1075" title="1075"><span class="co">#&gt; 398   18</span></a>
<a class="sourceLine" id="cb132-1076" title="1076"><span class="co">#&gt; 399   18</span></a>
<a class="sourceLine" id="cb132-1077" title="1077"><span class="co">#&gt; 400   19</span></a>
<a class="sourceLine" id="cb132-1078" title="1078"><span class="co">#&gt; 401   19</span></a>
<a class="sourceLine" id="cb132-1079" title="1079"><span class="co">#&gt; 402   19</span></a>
<a class="sourceLine" id="cb132-1080" title="1080"><span class="co">#&gt; 403   19</span></a>
<a class="sourceLine" id="cb132-1081" title="1081"><span class="co">#&gt; 404   19</span></a>
<a class="sourceLine" id="cb132-1082" title="1082"><span class="co">#&gt; 405   19</span></a>
<a class="sourceLine" id="cb132-1083" title="1083"><span class="co">#&gt; 406   19</span></a>
<a class="sourceLine" id="cb132-1084" title="1084"><span class="co">#&gt; 407   19</span></a>
<a class="sourceLine" id="cb132-1085" title="1085"><span class="co">#&gt; 408   19</span></a>
<a class="sourceLine" id="cb132-1086" title="1086"><span class="co">#&gt; 409   19</span></a>
<a class="sourceLine" id="cb132-1087" title="1087"><span class="co">#&gt; 410   19</span></a>
<a class="sourceLine" id="cb132-1088" title="1088"><span class="co">#&gt; 411   19</span></a>
<a class="sourceLine" id="cb132-1089" title="1089"><span class="co">#&gt; 412   20</span></a>
<a class="sourceLine" id="cb132-1090" title="1090"><span class="co">#&gt; 413   20</span></a>
<a class="sourceLine" id="cb132-1091" title="1091"><span class="co">#&gt; 414   20</span></a>
<a class="sourceLine" id="cb132-1092" title="1092"><span class="co">#&gt; 415   20</span></a>
<a class="sourceLine" id="cb132-1093" title="1093"><span class="co">#&gt; 416   20</span></a>
<a class="sourceLine" id="cb132-1094" title="1094"><span class="co">#&gt; 417   20</span></a>
<a class="sourceLine" id="cb132-1095" title="1095"><span class="co">#&gt; 418   20</span></a>
<a class="sourceLine" id="cb132-1096" title="1096"><span class="co">#&gt; 419   20</span></a>
<a class="sourceLine" id="cb132-1097" title="1097"><span class="co">#&gt; 420   20</span></a>
<a class="sourceLine" id="cb132-1098" title="1098"><span class="co">#&gt; 421   21</span></a>
<a class="sourceLine" id="cb132-1099" title="1099"><span class="co">#&gt; 422   21</span></a>
<a class="sourceLine" id="cb132-1100" title="1100"><span class="co">#&gt; 423   21</span></a>
<a class="sourceLine" id="cb132-1101" title="1101"><span class="co">#&gt; 424   21</span></a>
<a class="sourceLine" id="cb132-1102" title="1102"><span class="co">#&gt; 425   21</span></a>
<a class="sourceLine" id="cb132-1103" title="1103"><span class="co">#&gt; 426   21</span></a>
<a class="sourceLine" id="cb132-1104" title="1104"><span class="co">#&gt; 427   21</span></a>
<a class="sourceLine" id="cb132-1105" title="1105"><span class="co">#&gt; 428   21</span></a>
<a class="sourceLine" id="cb132-1106" title="1106"><span class="co">#&gt; 429   21</span></a>
<a class="sourceLine" id="cb132-1107" title="1107"><span class="co">#&gt; 430   21</span></a>
<a class="sourceLine" id="cb132-1108" title="1108"><span class="co">#&gt; 431   21</span></a>
<a class="sourceLine" id="cb132-1109" title="1109"><span class="co">#&gt; 432   21</span></a>
<a class="sourceLine" id="cb132-1110" title="1110"><span class="co">#&gt; 433   21</span></a>
<a class="sourceLine" id="cb132-1111" title="1111"><span class="co">#&gt; 434   21</span></a>
<a class="sourceLine" id="cb132-1112" title="1112"><span class="co">#&gt; 435   21</span></a>
<a class="sourceLine" id="cb132-1113" title="1113"><span class="co">#&gt; 436   21</span></a>
<a class="sourceLine" id="cb132-1114" title="1114"><span class="co">#&gt; 437   21</span></a>
<a class="sourceLine" id="cb132-1115" title="1115"><span class="co">#&gt; 438   21</span></a>
<a class="sourceLine" id="cb132-1116" title="1116"><span class="co">#&gt; 439   21</span></a>
<a class="sourceLine" id="cb132-1117" title="1117"><span class="co">#&gt; 440   21</span></a>
<a class="sourceLine" id="cb132-1118" title="1118"><span class="co">#&gt; 441   21</span></a>
<a class="sourceLine" id="cb132-1119" title="1119"><span class="co">#&gt; 442   21</span></a>
<a class="sourceLine" id="cb132-1120" title="1120"><span class="co">#&gt; 443   21</span></a>
<a class="sourceLine" id="cb132-1121" title="1121"><span class="co">#&gt; 444   21</span></a>
<a class="sourceLine" id="cb132-1122" title="1122"><span class="co">#&gt; 445   21</span></a>
<a class="sourceLine" id="cb132-1123" title="1123"><span class="co">#&gt; 446   21</span></a>
<a class="sourceLine" id="cb132-1124" title="1124"><span class="co">#&gt; 447   21</span></a>
<a class="sourceLine" id="cb132-1125" title="1125"><span class="co">#&gt; 448   21</span></a>
<a class="sourceLine" id="cb132-1126" title="1126"><span class="co">#&gt; 449   21</span></a>
<a class="sourceLine" id="cb132-1127" title="1127"><span class="co">#&gt; 450   21</span></a>
<a class="sourceLine" id="cb132-1128" title="1128"><span class="co">#&gt; 451   21</span></a>
<a class="sourceLine" id="cb132-1129" title="1129"><span class="co">#&gt; 452   21</span></a>
<a class="sourceLine" id="cb132-1130" title="1130"><span class="co">#&gt; 453   21</span></a>
<a class="sourceLine" id="cb132-1131" title="1131"><span class="co">#&gt; 454   21</span></a>
<a class="sourceLine" id="cb132-1132" title="1132"><span class="co">#&gt; 455   21</span></a>
<a class="sourceLine" id="cb132-1133" title="1133"><span class="co">#&gt; 456   21</span></a>
<a class="sourceLine" id="cb132-1134" title="1134"><span class="co">#&gt; 457   21</span></a>
<a class="sourceLine" id="cb132-1135" title="1135"><span class="co">#&gt; 458   21</span></a>
<a class="sourceLine" id="cb132-1136" title="1136"><span class="co">#&gt; 459   22</span></a>
<a class="sourceLine" id="cb132-1137" title="1137"><span class="co">#&gt; 460   22</span></a>
<a class="sourceLine" id="cb132-1138" title="1138"><span class="co">#&gt; 461   22</span></a>
<a class="sourceLine" id="cb132-1139" title="1139"><span class="co">#&gt; 462   22</span></a>
<a class="sourceLine" id="cb132-1140" title="1140"><span class="co">#&gt; 463   22</span></a>
<a class="sourceLine" id="cb132-1141" title="1141"><span class="co">#&gt; 464   22</span></a>
<a class="sourceLine" id="cb132-1142" title="1142"><span class="co">#&gt; 465   22</span></a>
<a class="sourceLine" id="cb132-1143" title="1143"><span class="co">#&gt; 466   22</span></a>
<a class="sourceLine" id="cb132-1144" title="1144"><span class="co">#&gt; 467   22</span></a>
<a class="sourceLine" id="cb132-1145" title="1145"><span class="co">#&gt; 468   22</span></a>
<a class="sourceLine" id="cb132-1146" title="1146"><span class="co">#&gt; 469   22</span></a>
<a class="sourceLine" id="cb132-1147" title="1147"><span class="co">#&gt; 470   22</span></a>
<a class="sourceLine" id="cb132-1148" title="1148"><span class="co">#&gt; 471   22</span></a>
<a class="sourceLine" id="cb132-1149" title="1149"><span class="co">#&gt; 472   22</span></a>
<a class="sourceLine" id="cb132-1150" title="1150"><span class="co">#&gt; 473   22</span></a>
<a class="sourceLine" id="cb132-1151" title="1151"><span class="co">#&gt; 474   22</span></a>
<a class="sourceLine" id="cb132-1152" title="1152"><span class="co">#&gt; 475   22</span></a>
<a class="sourceLine" id="cb132-1153" title="1153"><span class="co">#&gt; 476   22</span></a>
<a class="sourceLine" id="cb132-1154" title="1154"><span class="co">#&gt; 477   22</span></a>
<a class="sourceLine" id="cb132-1155" title="1155"><span class="co">#&gt; 478   22</span></a>
<a class="sourceLine" id="cb132-1156" title="1156"><span class="co">#&gt; 479   22</span></a>
<a class="sourceLine" id="cb132-1157" title="1157"><span class="co">#&gt; 480   22</span></a>
<a class="sourceLine" id="cb132-1158" title="1158"><span class="co">#&gt; 481   22</span></a>
<a class="sourceLine" id="cb132-1159" title="1159"><span class="co">#&gt; 482   22</span></a>
<a class="sourceLine" id="cb132-1160" title="1160"><span class="co">#&gt; 483   22</span></a>
<a class="sourceLine" id="cb132-1161" title="1161"><span class="co">#&gt; 484   22</span></a>
<a class="sourceLine" id="cb132-1162" title="1162"><span class="co">#&gt; 485   22</span></a>
<a class="sourceLine" id="cb132-1163" title="1163"><span class="co">#&gt; 486   22</span></a>
<a class="sourceLine" id="cb132-1164" title="1164"><span class="co">#&gt; 487   22</span></a>
<a class="sourceLine" id="cb132-1165" title="1165"><span class="co">#&gt; 488   22</span></a>
<a class="sourceLine" id="cb132-1166" title="1166"><span class="co">#&gt; 489   22</span></a>
<a class="sourceLine" id="cb132-1167" title="1167"><span class="co">#&gt; 490   22</span></a>
<a class="sourceLine" id="cb132-1168" title="1168"><span class="co">#&gt; 491   22</span></a>
<a class="sourceLine" id="cb132-1169" title="1169"><span class="co">#&gt; 492   22</span></a>
<a class="sourceLine" id="cb132-1170" title="1170"><span class="co">#&gt; 493   23</span></a>
<a class="sourceLine" id="cb132-1171" title="1171"><span class="co">#&gt; 494   23</span></a>
<a class="sourceLine" id="cb132-1172" title="1172"><span class="co">#&gt; 495   23</span></a>
<a class="sourceLine" id="cb132-1173" title="1173"><span class="co">#&gt; 496   23</span></a>
<a class="sourceLine" id="cb132-1174" title="1174"><span class="co">#&gt; 497   23</span></a>
<a class="sourceLine" id="cb132-1175" title="1175"><span class="co">#&gt; 498   23</span></a>
<a class="sourceLine" id="cb132-1176" title="1176"><span class="co">#&gt; 499   23</span></a>
<a class="sourceLine" id="cb132-1177" title="1177"><span class="co">#&gt; 500   23</span></a>
<a class="sourceLine" id="cb132-1178" title="1178"><span class="co">#&gt; 501   23</span></a>
<a class="sourceLine" id="cb132-1179" title="1179"><span class="co">#&gt; 502   23</span></a>
<a class="sourceLine" id="cb132-1180" title="1180"><span class="co">#&gt; 503   23</span></a>
<a class="sourceLine" id="cb132-1181" title="1181"><span class="co">#&gt; 504   23</span></a>
<a class="sourceLine" id="cb132-1182" title="1182"><span class="co">#&gt; 505   23</span></a>
<a class="sourceLine" id="cb132-1183" title="1183"><span class="co">#&gt; 506   23</span></a>
<a class="sourceLine" id="cb132-1184" title="1184"><span class="co">#&gt; 507   23</span></a>
<a class="sourceLine" id="cb132-1185" title="1185"><span class="co">#&gt; 508   23</span></a>
<a class="sourceLine" id="cb132-1186" title="1186"><span class="co">#&gt; 509   23</span></a>
<a class="sourceLine" id="cb132-1187" title="1187"><span class="co">#&gt; 510   23</span></a>
<a class="sourceLine" id="cb132-1188" title="1188"><span class="co">#&gt; 511   23</span></a>
<a class="sourceLine" id="cb132-1189" title="1189"><span class="co">#&gt; 512   23</span></a>
<a class="sourceLine" id="cb132-1190" title="1190"><span class="co">#&gt; 513   23</span></a>
<a class="sourceLine" id="cb132-1191" title="1191"><span class="co">#&gt; 514   23</span></a>
<a class="sourceLine" id="cb132-1192" title="1192"><span class="co">#&gt; 515   24</span></a>
<a class="sourceLine" id="cb132-1193" title="1193"><span class="co">#&gt; 516   24</span></a>
<a class="sourceLine" id="cb132-1194" title="1194"><span class="co">#&gt; 517   24</span></a>
<a class="sourceLine" id="cb132-1195" title="1195"><span class="co">#&gt; 518   24</span></a>
<a class="sourceLine" id="cb132-1196" title="1196"><span class="co">#&gt; 519   24</span></a>
<a class="sourceLine" id="cb132-1197" title="1197"><span class="co">#&gt; 520   24</span></a>
<a class="sourceLine" id="cb132-1198" title="1198"><span class="co">#&gt; 521   24</span></a>
<a class="sourceLine" id="cb132-1199" title="1199"><span class="co">#&gt; 522   24</span></a>
<a class="sourceLine" id="cb132-1200" title="1200"><span class="co">#&gt; 523   24</span></a>
<a class="sourceLine" id="cb132-1201" title="1201"><span class="co">#&gt; 524   24</span></a>
<a class="sourceLine" id="cb132-1202" title="1202"><span class="co">#&gt; 525   24</span></a>
<a class="sourceLine" id="cb132-1203" title="1203"><span class="co">#&gt; 526   24</span></a>
<a class="sourceLine" id="cb132-1204" title="1204"><span class="co">#&gt; 527   24</span></a>
<a class="sourceLine" id="cb132-1205" title="1205"><span class="co">#&gt; 528   24</span></a>
<a class="sourceLine" id="cb132-1206" title="1206"><span class="co">#&gt; 529   24</span></a>
<a class="sourceLine" id="cb132-1207" title="1207"><span class="co">#&gt; 530   24</span></a>
<a class="sourceLine" id="cb132-1208" title="1208"><span class="co">#&gt; 531   25</span></a>
<a class="sourceLine" id="cb132-1209" title="1209"><span class="co">#&gt; 532   25</span></a>
<a class="sourceLine" id="cb132-1210" title="1210"><span class="co">#&gt; 533   25</span></a>
<a class="sourceLine" id="cb132-1211" title="1211"><span class="co">#&gt; 534   25</span></a>
<a class="sourceLine" id="cb132-1212" title="1212"><span class="co">#&gt; 535   25</span></a>
<a class="sourceLine" id="cb132-1213" title="1213"><span class="co">#&gt; 536   25</span></a>
<a class="sourceLine" id="cb132-1214" title="1214"><span class="co">#&gt; 537   25</span></a>
<a class="sourceLine" id="cb132-1215" title="1215"><span class="co">#&gt; 538   25</span></a>
<a class="sourceLine" id="cb132-1216" title="1216"><span class="co">#&gt; 539   25</span></a>
<a class="sourceLine" id="cb132-1217" title="1217"><span class="co">#&gt; 540   25</span></a>
<a class="sourceLine" id="cb132-1218" title="1218"><span class="co">#&gt; 541   25</span></a>
<a class="sourceLine" id="cb132-1219" title="1219"><span class="co">#&gt; 542   25</span></a>
<a class="sourceLine" id="cb132-1220" title="1220"><span class="co">#&gt; 543   25</span></a>
<a class="sourceLine" id="cb132-1221" title="1221"><span class="co">#&gt; 544   25</span></a>
<a class="sourceLine" id="cb132-1222" title="1222"><span class="co">#&gt; 545   26</span></a>
<a class="sourceLine" id="cb132-1223" title="1223"><span class="co">#&gt; 546   26</span></a>
<a class="sourceLine" id="cb132-1224" title="1224"><span class="co">#&gt; 547   26</span></a>
<a class="sourceLine" id="cb132-1225" title="1225"><span class="co">#&gt; 548   26</span></a>
<a class="sourceLine" id="cb132-1226" title="1226"><span class="co">#&gt; 549   26</span></a>
<a class="sourceLine" id="cb132-1227" title="1227"><span class="co">#&gt; 550   26</span></a>
<a class="sourceLine" id="cb132-1228" title="1228"><span class="co">#&gt; 551   26</span></a>
<a class="sourceLine" id="cb132-1229" title="1229"><span class="co">#&gt; 552   26</span></a>
<a class="sourceLine" id="cb132-1230" title="1230"><span class="co">#&gt; 553   26</span></a>
<a class="sourceLine" id="cb132-1231" title="1231"><span class="co">#&gt; 554   26</span></a>
<a class="sourceLine" id="cb132-1232" title="1232"><span class="co">#&gt; 555   26</span></a>
<a class="sourceLine" id="cb132-1233" title="1233"><span class="co">#&gt; 556   26</span></a>
<a class="sourceLine" id="cb132-1234" title="1234"><span class="co">#&gt; 557   26</span></a>
<a class="sourceLine" id="cb132-1235" title="1235"><span class="co">#&gt; 558   26</span></a>
<a class="sourceLine" id="cb132-1236" title="1236"><span class="co">#&gt; 559   26</span></a>
<a class="sourceLine" id="cb132-1237" title="1237"><span class="co">#&gt; 560   26</span></a>
<a class="sourceLine" id="cb132-1238" title="1238"><span class="co">#&gt; 561   26</span></a>
<a class="sourceLine" id="cb132-1239" title="1239"><span class="co">#&gt; 562   26</span></a>
<a class="sourceLine" id="cb132-1240" title="1240"><span class="co">#&gt; 563   26</span></a>
<a class="sourceLine" id="cb132-1241" title="1241"><span class="co">#&gt; 564   27</span></a>
<a class="sourceLine" id="cb132-1242" title="1242"><span class="co">#&gt; 565   27</span></a>
<a class="sourceLine" id="cb132-1243" title="1243"><span class="co">#&gt; 566   27</span></a>
<a class="sourceLine" id="cb132-1244" title="1244"><span class="co">#&gt; 567   27</span></a>
<a class="sourceLine" id="cb132-1245" title="1245"><span class="co">#&gt; 568   27</span></a>
<a class="sourceLine" id="cb132-1246" title="1246"><span class="co">#&gt; 569   27</span></a>
<a class="sourceLine" id="cb132-1247" title="1247"><span class="co">#&gt; 570   27</span></a>
<a class="sourceLine" id="cb132-1248" title="1248"><span class="co">#&gt; 571   27</span></a>
<a class="sourceLine" id="cb132-1249" title="1249"><span class="co">#&gt; 572   27</span></a>
<a class="sourceLine" id="cb132-1250" title="1250"><span class="co">#&gt; 573   27</span></a>
<a class="sourceLine" id="cb132-1251" title="1251"><span class="co">#&gt; 574   27</span></a>
<a class="sourceLine" id="cb132-1252" title="1252"><span class="co">#&gt; 575   27</span></a>
<a class="sourceLine" id="cb132-1253" title="1253"><span class="co">#&gt; 576   27</span></a>
<a class="sourceLine" id="cb132-1254" title="1254"><span class="co">#&gt; 577   27</span></a>
<a class="sourceLine" id="cb132-1255" title="1255"><span class="co">#&gt; 578   27</span></a>
<a class="sourceLine" id="cb132-1256" title="1256"><span class="co">#&gt; 579   27</span></a>
<a class="sourceLine" id="cb132-1257" title="1257"><span class="co">#&gt; 580   27</span></a>
<a class="sourceLine" id="cb132-1258" title="1258"><span class="co">#&gt; 581   28</span></a>
<a class="sourceLine" id="cb132-1259" title="1259"><span class="co">#&gt; 582   28</span></a>
<a class="sourceLine" id="cb132-1260" title="1260"><span class="co">#&gt; 583   28</span></a>
<a class="sourceLine" id="cb132-1261" title="1261"><span class="co">#&gt; 584   28</span></a>
<a class="sourceLine" id="cb132-1262" title="1262"><span class="co">#&gt; 585   28</span></a>
<a class="sourceLine" id="cb132-1263" title="1263"><span class="co">#&gt; 586   28</span></a>
<a class="sourceLine" id="cb132-1264" title="1264"><span class="co">#&gt; 587   28</span></a>
<a class="sourceLine" id="cb132-1265" title="1265"><span class="co">#&gt; 588   28</span></a>
<a class="sourceLine" id="cb132-1266" title="1266"><span class="co">#&gt; 589   28</span></a>
<a class="sourceLine" id="cb132-1267" title="1267"><span class="co">#&gt; 590   28</span></a>
<a class="sourceLine" id="cb132-1268" title="1268"><span class="co">#&gt; 591   28</span></a>
<a class="sourceLine" id="cb132-1269" title="1269"><span class="co">#&gt; 592   28</span></a>
<a class="sourceLine" id="cb132-1270" title="1270"><span class="co">#&gt; 593   28</span></a>
<a class="sourceLine" id="cb132-1271" title="1271"><span class="co">#&gt; 594   28</span></a>
<a class="sourceLine" id="cb132-1272" title="1272"><span class="co">#&gt; 595   28</span></a>
<a class="sourceLine" id="cb132-1273" title="1273"><span class="co">#&gt; 596   28</span></a>
<a class="sourceLine" id="cb132-1274" title="1274"><span class="co">#&gt; 597   28</span></a>
<a class="sourceLine" id="cb132-1275" title="1275"><span class="co">#&gt; 598   28</span></a>
<a class="sourceLine" id="cb132-1276" title="1276"><span class="co">#&gt; 599   28</span></a>
<a class="sourceLine" id="cb132-1277" title="1277"><span class="co">#&gt; 600   29</span></a>
<a class="sourceLine" id="cb132-1278" title="1278"><span class="co">#&gt; 601   29</span></a>
<a class="sourceLine" id="cb132-1279" title="1279"><span class="co">#&gt; 602   29</span></a>
<a class="sourceLine" id="cb132-1280" title="1280"><span class="co">#&gt; 603   29</span></a>
<a class="sourceLine" id="cb132-1281" title="1281"><span class="co">#&gt; 604   29</span></a>
<a class="sourceLine" id="cb132-1282" title="1282"><span class="co">#&gt; 605   29</span></a>
<a class="sourceLine" id="cb132-1283" title="1283"><span class="co">#&gt; 606   29</span></a>
<a class="sourceLine" id="cb132-1284" title="1284"><span class="co">#&gt; 607   29</span></a>
<a class="sourceLine" id="cb132-1285" title="1285"><span class="co">#&gt; 608   29</span></a>
<a class="sourceLine" id="cb132-1286" title="1286"><span class="co">#&gt; 609   29</span></a>
<a class="sourceLine" id="cb132-1287" title="1287"><span class="co">#&gt; 610   29</span></a>
<a class="sourceLine" id="cb132-1288" title="1288"><span class="co">#&gt; 611   29</span></a>
<a class="sourceLine" id="cb132-1289" title="1289"><span class="co">#&gt; 612   29</span></a>
<a class="sourceLine" id="cb132-1290" title="1290"><span class="co">#&gt; 613   29</span></a>
<a class="sourceLine" id="cb132-1291" title="1291"><span class="co">#&gt; 614   29</span></a>
<a class="sourceLine" id="cb132-1292" title="1292"><span class="co">#&gt; 615   29</span></a>
<a class="sourceLine" id="cb132-1293" title="1293"><span class="co">#&gt; 616   29</span></a>
<a class="sourceLine" id="cb132-1294" title="1294"><span class="co">#&gt; 617   29</span></a>
<a class="sourceLine" id="cb132-1295" title="1295"><span class="co">#&gt; 618   29</span></a>
<a class="sourceLine" id="cb132-1296" title="1296"><span class="co">#&gt; 619   29</span></a>
<a class="sourceLine" id="cb132-1297" title="1297"><span class="co">#&gt; 620   29</span></a>
<a class="sourceLine" id="cb132-1298" title="1298"><span class="co">#&gt; 621   29</span></a>
<a class="sourceLine" id="cb132-1299" title="1299"><span class="co">#&gt; 622   29</span></a>
<a class="sourceLine" id="cb132-1300" title="1300"><span class="co">#&gt; 623   29</span></a></code></pre></div>
<div id="office-documents" class="section level3">
<h3><span class="header-section-number">B.3.1</span> Office documents</h3>
</div>
<div id="images" class="section level3">
<h3><span class="header-section-number">B.3.2</span> Images</h3>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="combining-and-splitting.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/enixam/tidy-text-mining/edit/master/book/text-processing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
